var app=function(){"use strict";function t(){}const e=t=>t;function r(t){return t()}function i(){return Object.create(null)}function n(t){t.forEach(r)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,r,i){if(t){const n=h(t,e,r,i);return t[0](n)}}function h(t,e,r,i){return t[1]&&i?function(t,e){for(const r in e)t[r]=e[r];return t}(r.ctx.slice(),t[1](i(e))):r.ctx}function u(t,e,r,i){if(t[2]&&i){const n=t[2](i(r));if("object"==typeof e.dirty){const t=[],r=Math.max(e.dirty.length,n.length);for(let i=0;i<r;i+=1)t[i]=e.dirty[i]|n[i];return t}return e.dirty|n}return e.dirty}const l="undefined"!=typeof window;let c=l?()=>window.performance.now():()=>Date.now(),d=l?t=>requestAnimationFrame(t):t;const p=new Set;function f(t){p.forEach(e=>{e.c(t)||(p.delete(e),e.f())}),0!==p.size&&d(f)}function m(t){let e;return 0===p.size&&d(f),{promise:new Promise(r=>{p.add(e={c:t,f:r})}),abort(){p.delete(e)}}}function _(t,e){t.appendChild(e)}function g(t,e,r){t.insertBefore(e,r||null)}function v(t){t.parentNode.removeChild(t)}function y(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function b(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function T(){return x(" ")}function E(){return x("")}function w(t,e,r,i){return t.addEventListener(e,r,i),()=>t.removeEventListener(e,r,i)}function A(t,e,r){null==r?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function O(t,e){(null!=e||t.value)&&(t.value=e)}function R(t,e,r,i){t.style.setProperty(e,r,i?"important":"")}function P(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const r=document.createElement("object");let i;return r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.type="text/html",r.tabIndex=-1,r.onload=()=>{i=r.contentDocument.defaultView,i.addEventListener("resize",e)},/Trident/.test(navigator.userAgent)?(t.appendChild(r),r.data="about:blank"):(r.data="about:blank",t.appendChild(r)),{cancel:()=>{i&&i.removeEventListener&&i.removeEventListener("resize",e),t.removeChild(r)}}}function I(t,e,r){t.classList[r?"add":"remove"](e)}function M(t,e){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!1,!1,e),r}class C{constructor(t,e=null){this.e=b("div"),this.a=e,this.u(t)}m(t,e=null){for(let r=0;r<this.n.length;r+=1)g(t,this.n[r],e);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(v)}}let D,L,N=0,F={};function B(t,e,r,i,n,s,o,a=0){const h=16.666/i;let u="{\n";for(let t=0;t<=1;t+=h){const i=e+(r-e)*s(t);u+=100*t+`%{${o(i,1-i)}}\n`}const l=u+`100% {${o(r,1-r)}}\n}`,c=`__svelte_${function(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}(l)}_${a}`;if(!F[c]){if(!D){const t=b("style");document.head.appendChild(t),D=t.sheet}F[c]=!0,D.insertRule(`@keyframes ${c} ${l}`,D.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${c} ${i}ms linear ${n}ms 1 both`,N+=1,c}function U(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--N&&d(()=>{if(N)return;let t=D.cssRules.length;for(;t--;)D.deleteRule(t);F={}})}function G(t){L=t}function k(){if(!L)throw new Error("Function called outside component initialization");return L}function X(){const t=k();return(e,r)=>{const i=t.$$.callbacks[e];if(i){const n=M(e,r);i.slice().forEach(e=>{e.call(t,n)})}}}function $(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach(t=>t(e))}const j=[],H=[],z=[],Y=[],q=Promise.resolve();let V,W=!1;function Z(t){z.push(t)}function K(t){Y.push(t)}function J(){const t=new Set;do{for(;j.length;){const t=j.shift();G(t),Q(t.$$)}for(;H.length;)H.pop()();for(let e=0;e<z.length;e+=1){const r=z[e];t.has(r)||(r(),t.add(r))}z.length=0}while(j.length);for(;Y.length;)Y.pop()();W=!1}function Q(t){if(null!==t.fragment){t.update(),n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}function tt(){return V||(V=Promise.resolve(),V.then(()=>{V=null})),V}function et(t,e,r){t.dispatchEvent(M(`${e?"intro":"outro"}${r}`))}const rt=new Set;let it;function nt(){it={r:0,c:[],p:it}}function st(){it.r||n(it.c),it=it.p}function ot(t,e){t&&t.i&&(rt.delete(t),t.i(e))}function at(t,e,r,i){if(t&&t.o){if(rt.has(t))return;rt.add(t),it.c.push(()=>{rt.delete(t),i&&(r&&t.d(1),i())}),t.o(e)}}const ht={duration:0};function ut(r,i,o){let a,h=i(r,o),u=!0;const l=it;function d(){const{delay:i=0,duration:s=300,easing:o=e,tick:d=t,css:p}=h||ht;p&&(a=B(r,1,0,s,i,o,p));const f=c()+i,_=f+s;Z(()=>et(r,!1,"start")),m(t=>{if(u){if(t>=_)return d(0,1),et(r,!1,"end"),--l.r||n(l.c),!1;if(t>=f){const e=o((t-f)/s);d(1-e,e)}}return u})}return l.r+=1,s(h)?tt().then(()=>{h=h(),d()}):d(),{end(t){t&&h.tick&&h.tick(1,0),u&&(a&&U(r,a),u=!1)}}}function lt(r,i,o,a){let h=i(r,o),u=a?0:1,l=null,d=null,p=null;function f(){p&&U(r,p)}function _(t,e){const r=t.b-u;return e*=Math.abs(r),{a:u,b:t.b,d:r,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(i){const{delay:s=0,duration:o=300,easing:a=e,tick:g=t,css:v}=h||ht,y={start:c()+s,b:i};i||(y.group=it,it.r+=1),l?d=y:(v&&(f(),p=B(r,u,i,o,s,a,v)),i&&g(0,1),l=_(y,o),Z(()=>et(r,i,"start")),m(t=>{if(d&&t>d.start&&(l=_(d,o),d=null,et(r,l.b,"start"),v&&(f(),p=B(r,u,l.b,l.duration,0,a,h.css))),l)if(t>=l.end)g(u=l.b,1-u),et(r,l.b,"end"),d||(l.b?f():--l.group.r||n(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;u=l.a+l.d*a(e/l.duration),g(u,1-u)}return!(!l&&!d)}))}return{run(t){s(h)?tt().then(()=>{h=h(),g(t)}):g(t)},end(){f(),l=d=null}}}function ct(t,e,r){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=r,r(t.$$.ctx[i]))}function dt(t){t&&t.c()}function pt(t,e,i){const{fragment:o,on_mount:a,on_destroy:h,after_update:u}=t.$$;o&&o.m(e,i),Z(()=>{const e=a.map(r).filter(s);h?h.push(...e):n(e),t.$$.on_mount=[]}),u.forEach(Z)}function ft(t,e){const r=t.$$;null!==r.fragment&&(n(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function mt(t,e){-1===t.$$.dirty[0]&&(j.push(t),W||(W=!0,q.then(J)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function _t(e,r,s,o,a,h,u=[-1]){const l=L;G(e);const c=r.props||{},d=e.$$={fragment:null,ctx:null,props:h,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:u};let p=!1;d.ctx=s?s(e,c,(t,r,...i)=>{const n=i.length?i[0]:r;return d.ctx&&a(d.ctx[t],d.ctx[t]=n)&&(d.bound[t]&&d.bound[t](n),p&&mt(e,t)),r}):[],d.update(),p=!0,n(d.before_update),d.fragment=!!o&&o(d.ctx),r.target&&(r.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(r.target)):d.fragment&&d.fragment.c(),r.intro&&ot(e.$$.fragment),pt(e,r.target,r.anchor),J()),G(l)}class gt{$destroy(){ft(this,1),this.$destroy=t}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(){}}var vt=setTimeout;function yt(t){return Boolean(t&&void 0!==t.length)}function bt(){}function xt(t){if(!(this instanceof xt))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Ot(t,this)}function Tt(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,xt._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var i;try{i=r(t._value)}catch(t){return void wt(e.promise,t)}Et(e.promise,i)}else(1===t._state?Et:wt)(e.promise,t._value)}))):t._deferreds.push(e)}function Et(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if(e instanceof xt)return t._state=3,t._value=e,void At(t);if("function"==typeof r)return void Ot((i=r,n=e,function(){i.apply(n,arguments)}),t)}t._state=1,t._value=e,At(t)}catch(e){wt(t,e)}var i,n}function wt(t,e){t._state=2,t._value=e,At(t)}function At(t){2===t._state&&0===t._deferreds.length&&xt._immediateFn((function(){t._handled||xt._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)Tt(t,t._deferreds[e]);t._deferreds=null}function St(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function Ot(t,e){var r=!1;try{t((function(t){r||(r=!0,Et(e,t))}),(function(t){r||(r=!0,wt(e,t))}))}catch(t){if(r)return;r=!0,wt(e,t)}}xt.prototype.catch=function(t){return this.then(null,t)},xt.prototype.then=function(t,e){var r=new this.constructor(bt);return Tt(this,new St(t,e,r)),r},xt.prototype.finally=function(t){var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))},xt.all=function(t){return new xt((function(e,r){if(!yt(t))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var n=i.length;function s(t,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(e){s(t,e)}),r)}i[t]=o,0==--n&&e(i)}catch(t){r(t)}}for(var o=0;o<i.length;o++)s(o,i[o])}))},xt.allSettled=function(t){return new this((function(e,r){if(!t||void 0===t.length)return r(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var n=i.length;function s(t,r){if(r&&("object"==typeof r||"function"==typeof r)){var o=r.then;if("function"==typeof o)return void o.call(r,(function(e){s(t,e)}),(function(r){i[t]={status:"rejected",reason:r},0==--n&&e(i)}))}i[t]={status:"fulfilled",value:r},0==--n&&e(i)}for(var o=0;o<i.length;o++)s(o,i[o])}))},xt.resolve=function(t){return t&&"object"==typeof t&&t.constructor===xt?t:new xt((function(e){e(t)}))},xt.reject=function(t){return new xt((function(e,r){r(t)}))},xt.race=function(t){return new xt((function(e,r){if(!yt(t))return r(new TypeError("Promise.race accepts an array"));for(var i=0,n=t.length;i<n;i++)xt.resolve(t[i]).then(e,r)}))},xt._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){vt(t,0)},xt._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */
var Rt=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable;function Mt(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var Ct=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,i,n=Mt(t),s=1;s<arguments.length;s++){for(var o in r=Object(arguments[s]))Pt.call(r,o)&&(n[o]=r[o]);if(Rt){i=Rt(r);for(var a=0;a<i.length;a++)It.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n};
/*!
     * @pixi/polyfill - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/polyfill is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */self.Promise||(self.Promise=xt),Object.assign||(Object.assign=Ct);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!self.performance||!self.performance.now){var Dt=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-Dt}}for(var Lt=Date.now(),Nt=["ms","moz","webkit","o"],Ft=0;Ft<Nt.length&&!self.requestAnimationFrame;++Ft){var Bt=Nt[Ft];self.requestAnimationFrame=self[Bt+"RequestAnimationFrame"],self.cancelAnimationFrame=self[Bt+"CancelAnimationFrame"]||self[Bt+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+Lt-e;return r<0&&(r=0),Lt=e,self.setTimeout((function(){Lt=Date.now(),t(performance.now())}),r)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array);var Ut=/iPhone/i,Gt=/iPod/i,kt=/iPad/i,Xt=/\biOS-universal(?:.+)Mac\b/i,$t=/\bAndroid(?:.+)Mobile\b/i,jt=/Android/i,Ht=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,zt=/Silk/i,Yt=/Windows Phone/i,qt=/\bWindows(?:.+)ARM\b/i,Vt=/BlackBerry/i,Wt=/BB10/i,Zt=/Opera Mini/i,Kt=/\b(CriOS|Chrome)(?:.+)Mobile/i,Jt=/Mobile(?:.+)Firefox\b/i,Qt=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
     * @pixi/settings - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/settings is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
var te=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,i=r.split("[FBAN");void 0!==i[1]&&(r=i[0]),void 0!==(i=r.split("Twitter"))[1]&&(r=i[0]);var n=function(t){return function(e){return e.test(t)}}(r),s={apple:{phone:n(Ut)&&!n(Yt),ipod:n(Gt),tablet:!n(Ut)&&(n(kt)||Qt(e))&&!n(Yt),universal:n(Xt),device:(n(Ut)||n(Gt)||n(kt)||n(Xt)||Qt(e))&&!n(Yt)},amazon:{phone:n(Ht),tablet:!n(Ht)&&n(zt),device:n(Ht)||n(zt)},android:{phone:!n(Yt)&&n(Ht)||!n(Yt)&&n($t),tablet:!n(Yt)&&!n(Ht)&&!n($t)&&(n(zt)||n(jt)),device:!n(Yt)&&(n(Ht)||n(zt)||n($t)||n(jt))||n(/\bokhttp\b/i)},windows:{phone:n(Yt),tablet:n(qt),device:n(Yt)||n(qt)},other:{blackberry:n(Vt),blackberry10:n(Wt),opera:n(Zt),firefox:n(Jt),chrome:n(Kt),device:n(Vt)||n(Wt)||n(Zt)||n(Jt)||n(Kt)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(self.navigator);var ee={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(te.tablet||te.phone){var r;if(te.apple.device)if(r=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(r[1],10)<11&&(e=!1);if(te.android.device)if(r=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(r[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:te.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!te.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};function re(t,e){return t(e={exports:{}},e.exports),e.exports}var ie=re((function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new n(i,s||t,o),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o},a.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,n,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var h,u,l=this._events[a],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,n),!0;case 5:return l.fn.call(l.context,e,i,n,s),!0;case 6:return l.fn.call(l.context,e,i,n,s,o),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var d,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,i);break;case 4:l[u].fn.call(l[u].context,e,i,n);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];l[u].fn.apply(l[u].context,h)}}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||o(this,s);else{for(var h=0,u=[],l=a.length;h<l;h++)(a[h].fn!==e||n&&!a[h].once||i&&a[h].context!==i)&&u.push(a[h]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})),ne=oe,se=oe;function oe(t,e,r){r=r||2;var i,n,s,o,a,h,u,l=e&&e.length,c=l?e[0]*r:t.length,d=ae(t,0,c,r,!0),p=[];if(!d||d.next===d.prev)return p;if(l&&(d=function(t,e,r,i){var n,s,o,a,h,u=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(h=ae(t,o,a,i,!1))===h.next&&(h.steiner=!0),u.push(ve(h));for(u.sort(fe),n=0;n<u.length;n++)me(u[n],r),r=he(r,r.next);return r}(t,e,d,r)),t.length>80*r){i=s=t[0],n=o=t[1];for(var f=r;f<c;f+=r)(a=t[f])<i&&(i=a),(h=t[f+1])<n&&(n=h),a>s&&(s=a),h>o&&(o=h);u=0!==(u=Math.max(s-i,o-n))?1/u:0}return ue(d,p,r,i,n,u),p}function ae(t,e,r,i,n){var s,o;if(n===Me(t,e,r,i)>0)for(s=e;s<r;s+=i)o=Re(s,t[s],t[s+1],o);else for(s=r-i;s>=e;s-=i)o=Re(s,t[s],t[s+1],o);return o&&Te(o,o.next)&&(Pe(o),o=o.next),o}function he(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!Te(i,i.next)&&0!==xe(i.prev,i,i.next))i=i.next;else{if(Pe(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function ue(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;do{null===n.z&&(n.z=ge(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,i=r,a=0,e=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;a>0||h>0&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}s.nextZ=null,u*=2}while(o>1)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?ce(t,i,n,s):le(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),Pe(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?ue(t=de(he(t),e,r),e,r,i,n,s,2):2===o&&pe(t,e,r,i,n,s):ue(he(t),e,r,i,n,s,1);break}}}function le(t){var e=t.prev,r=t,i=t.next;if(xe(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(ye(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&xe(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function ce(t,e,r,i){var n=t.prev,s=t,o=t.next;if(xe(n,s,o)>=0)return!1;for(var a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,h=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,u=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,l=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,c=ge(a,h,e,r,i),d=ge(u,l,e,r,i),p=t.prevZ,f=t.nextZ;p&&p.z>=c&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&ye(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&xe(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&ye(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&xe(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&ye(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&xe(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&ye(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&xe(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function de(t,e,r){var i=t;do{var n=i.prev,s=i.next.next;!Te(n,s)&&Ee(n,i,i.next,s)&&Se(n,s)&&Se(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),Pe(i),Pe(i.next),i=t=s),i=i.next}while(i!==t);return he(i)}function pe(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&be(o,a)){var h=Oe(o,a);return o=he(o,o.next),h=he(h,h.next),ue(o,e,r,i,n,s),void ue(h,e,r,i,n,s)}a=a.next}o=o.next}while(o!==t)}function fe(t,e){return t.x-e.x}function me(t,e){if(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>o){if(o=a,a===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;do{n>=i.x&&i.x>=l&&n!==i.x&&ye(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),Se(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&_e(r,i)))&&(r=i,d=h)),i=i.next}while(i!==u);return r}(t,e)){var r=Oe(e,t);he(e,e.next),he(r,r.next)}}function _e(t,e){return xe(t.prev,t,e.prev)<0&&xe(e.next,t,t.next)<0}function ge(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ve(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function ye(t,e,r,i,n,s,o,a){return(n-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(r-o)*(e-a)>=0&&(r-o)*(s-a)-(n-o)*(i-a)>=0}function be(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Ee(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Se(t,e)&&Se(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(xe(t.prev,t,e.prev)||xe(t,e.prev,e))||Te(t,e)&&xe(t.prev,t,t.next)>0&&xe(e.prev,e,e.next)>0)}function xe(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Te(t,e){return t.x===e.x&&t.y===e.y}function Ee(t,e,r,i){var n=Ae(xe(t,e,r)),s=Ae(xe(t,e,i)),o=Ae(xe(r,i,t)),a=Ae(xe(r,i,e));return n!==s&&o!==a||(!(0!==n||!we(t,r,e))||(!(0!==s||!we(t,i,e))||(!(0!==o||!we(r,t,i))||!(0!==a||!we(r,e,i)))))}function we(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ae(t){return t>0?1:t<0?-1:0}function Se(t,e){return xe(t.prev,t,t.next)<0?xe(t,e,t.next)>=0&&xe(t,t.prev,e)>=0:xe(t,e,t.prev)<0||xe(t,t.next,e)<0}function Oe(t,e){var r=new Ie(t.i,t.x,t.y),i=new Ie(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function Re(t,e,r,i){var n=new Ie(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Pe(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ie(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Me(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}oe.deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(Me(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(Me(t,u,l,r))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*r,p=i[a+1]*r,f=i[a+2]*r;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},oe.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r},ne.default=se;
/*! https://mths.be/punycode v1.4.1 by @mathias */
var Ce=/[^\x20-\x7E]/,De=/[\x2E\u3002\uFF0E\uFF61]/g,Le={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ne=Math.floor,Fe=String.fromCharCode;function Be(t){throw new RangeError(Le[t])}function Ue(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function Ge(t,e,r){var i=0;for(t=r?Ne(t/700):t>>1,t+=Ne(t/e);t>455;i+=36)t=Ne(t/35);return Ne(i+36*t/(t+38))}function ke(t){return function(t,e){var r=t.split("@"),i="";r.length>1&&(i=r[0]+"@",t=r[1]);var n=function(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}((t=t.replace(De,".")).split("."),e).join(".");return i+n}(t,(function(t){return Ce.test(t)?"xn--"+function(t){var e,r,i,n,s,o,a,h,u,l,c,d,p,f,m,_=[];for(d=(t=function(t){for(var e,r,i=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}(t)).length,e=128,r=0,s=72,o=0;o<d;++o)(c=t[o])<128&&_.push(Fe(c));for(i=n=_.length,n&&_.push("-");i<d;){for(a=2147483647,o=0;o<d;++o)(c=t[o])>=e&&c<a&&(a=c);for(a-e>Ne((2147483647-r)/(p=i+1))&&Be("overflow"),r+=(a-e)*p,e=a,o=0;o<d;++o)if((c=t[o])<e&&++r>2147483647&&Be("overflow"),c==e){for(h=r,u=36;!(h<(l=u<=s?1:u>=s+26?26:u-s));u+=36)m=h-l,f=36-l,_.push(Fe(Ue(l+m%f,0))),h=Ne(m/f);_.push(Fe(Ue(h,0))),s=Ge(r,p,i==n),r=0,++i}++r,++e}return _.join("")}(t):t}))}var Xe="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},$e=[],je=[],He="undefined"!=typeof Uint8Array?Uint8Array:Array,ze=!1;function Ye(){ze=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)$e[e]=t[e],je[t.charCodeAt(e)]=e;je["-".charCodeAt(0)]=62,je["_".charCodeAt(0)]=63}function qe(t,e,r){for(var i,n,s=[],o=e;o<r;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push($e[(n=i)>>18&63]+$e[n>>12&63]+$e[n>>6&63]+$e[63&n]);return s.join("")}function Ve(t){var e;ze||Ye();for(var r=t.length,i=r%3,n="",s=[],o=0,a=r-i;o<a;o+=16383)s.push(qe(t,o,o+16383>a?a:o+16383));return 1===i?(e=t[r-1],n+=$e[e>>2],n+=$e[e<<4&63],n+="=="):2===i&&(e=(t[r-2]<<8)+t[r-1],n+=$e[e>>10],n+=$e[e>>4&63],n+=$e[e<<2&63],n+="="),s.push(n),s.join("")}function We(t,e,r,i,n){var s,o,a=8*n-i-1,h=(1<<a)-1,u=h>>1,l=-7,c=r?n-1:0,d=r?-1:1,p=t[e+c];for(c+=d,s=p&(1<<-l)-1,p>>=-l,l+=a;l>0;s=256*s+t[e+c],c+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=i;l>0;o=256*o+t[e+c],c+=d,l-=8);if(0===s)s=1-u;else{if(s===h)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=u}return(p?-1:1)*o*Math.pow(2,s-i)}function Ze(t,e,r,i,n,s){var o,a,h,u=8*s-n-1,l=(1<<u)-1,c=l>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+c>=1?d/h:d*Math.pow(2,1-c))*h>=2&&(o++,h/=2),o+c>=l?(a=0,o=l):o+c>=1?(a=(e*h-1)*Math.pow(2,n),o+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;t[r+p]=255&a,p+=f,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;t[r+p]=255&o,p+=f,o/=256,u-=8);t[r+p-f]|=128*m}var Ke={}.toString,Je=Array.isArray||function(t){return"[object Array]"==Ke.call(t)};function Qe(){return er.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function tr(t,e){if(Qe()<e)throw new RangeError("Invalid typed array length");return er.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=er.prototype:(null===t&&(t=new er(e)),t.length=e),t}function er(t,e,r){if(!(er.TYPED_ARRAY_SUPPORT||this instanceof er))return new er(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return nr(this,t)}return rr(this,t,e,r)}function rr(t,e,r,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i);er.TYPED_ARRAY_SUPPORT?(t=e).__proto__=er.prototype:t=sr(t,e);return t}(t,e,r,i):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!er.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|hr(e,r),n=(t=tr(t,i)).write(e,r);n!==i&&(t=t.slice(0,n));return t}(t,e,r):function(t,e){if(ar(e)){var r=0|or(e.length);return 0===(t=tr(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?tr(t,0):sr(t,e);if("Buffer"===e.type&&Je(e.data))return sr(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function ir(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function nr(t,e){if(ir(e),t=tr(t,e<0?0:0|or(e)),!er.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function sr(t,e){var r=e.length<0?0:0|or(e.length);t=tr(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function or(t){if(t>=Qe())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qe().toString(16)+" bytes");return 0|t}function ar(t){return!(null==t||!t._isBuffer)}function hr(t,e){if(ar(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Lr(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Nr(t).length;default:if(i)return Lr(t).length;e=(""+e).toLowerCase(),i=!0}}function ur(t,e,r){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Er(this,e,r);case"utf8":case"utf-8":return br(this,e,r);case"ascii":return xr(this,e,r);case"latin1":case"binary":return Tr(this,e,r);case"base64":return yr(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wr(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function lr(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function cr(t,e,r,i,n){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=er.from(e,i)),ar(e))return 0===e.length?-1:dr(t,e,r,i,n);if("number"==typeof e)return e&=255,er.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):dr(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function dr(t,e,r,i,n){var s,o=1,a=t.length,h=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){var l=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===h)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+h>a&&(r=a-h),s=r;s>=0;s--){for(var c=!0,d=0;d<h;d++)if(u(t,s+d)!==u(e,d)){c=!1;break}if(c)return s}return-1}function pr(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[r+o]=a}return o}function fr(t,e,r,i){return Fr(Lr(e,t.length-r),t,r,i)}function mr(t,e,r,i){return Fr(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,i)}function _r(t,e,r,i){return mr(t,e,r,i)}function gr(t,e,r,i){return Fr(Nr(e),t,r,i)}function vr(t,e,r,i){return Fr(function(t,e){for(var r,i,n,s=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),i=r>>8,n=r%256,s.push(n),s.push(i);return s}(e,t.length-r),t,r,i)}function yr(t,e,r){return 0===e&&r===t.length?Ve(t):Ve(t.slice(e,r))}function br(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var s,o,a,h,u=t[n],l=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c<=r)switch(c){case 1:u<128&&(l=u);break;case 2:128==(192&(s=t[n+1]))&&(h=(31&u)<<6|63&s)>127&&(l=h);break;case 3:s=t[n+1],o=t[n+2],128==(192&s)&&128==(192&o)&&(h=(15&u)<<12|(63&s)<<6|63&o)>2047&&(h<55296||h>57343)&&(l=h);break;case 4:s=t[n+1],o=t[n+2],a=t[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(h=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(l=h)}null===l?(l=65533,c=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),n+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return r}(i)}er.TYPED_ARRAY_SUPPORT=void 0===Xe.TYPED_ARRAY_SUPPORT||Xe.TYPED_ARRAY_SUPPORT,er.poolSize=8192,er._augment=function(t){return t.__proto__=er.prototype,t},er.from=function(t,e,r){return rr(null,t,e,r)},er.TYPED_ARRAY_SUPPORT&&(er.prototype.__proto__=Uint8Array.prototype,er.__proto__=Uint8Array),er.alloc=function(t,e,r){return function(t,e,r,i){return ir(e),e<=0?tr(t,e):void 0!==r?"string"==typeof i?tr(t,e).fill(r,i):tr(t,e).fill(r):tr(t,e)}(null,t,e,r)},er.allocUnsafe=function(t){return nr(null,t)},er.allocUnsafeSlow=function(t){return nr(null,t)},er.isBuffer=function(t){return null!=t&&(!!t._isBuffer||Br(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Br(t.slice(0,0))}(t))},er.compare=function(t,e){if(!ar(t)||!ar(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,n=0,s=Math.min(r,i);n<s;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},er.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},er.concat=function(t,e){if(!Je(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return er.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=er.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var s=t[r];if(!ar(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},er.byteLength=hr,er.prototype._isBuffer=!0,er.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)lr(this,e,e+1);return this},er.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)lr(this,e,e+3),lr(this,e+1,e+2);return this},er.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)lr(this,e,e+7),lr(this,e+1,e+6),lr(this,e+2,e+5),lr(this,e+3,e+4);return this},er.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?br(this,0,t):ur.apply(this,arguments)},er.prototype.equals=function(t){if(!ar(t))throw new TypeError("Argument must be a Buffer");return this===t||0===er.compare(this,t)},er.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},er.prototype.compare=function(t,e,r,i,n){if(!ar(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(n>>>=0)-(i>>>=0),o=(r>>>=0)-(e>>>=0),a=Math.min(s,o),h=this.slice(i,n),u=t.slice(e,r),l=0;l<a;++l)if(h[l]!==u[l]){s=h[l],o=u[l];break}return s<o?-1:o<s?1:0},er.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},er.prototype.indexOf=function(t,e,r){return cr(this,t,e,r,!0)},er.prototype.lastIndexOf=function(t,e,r){return cr(this,t,e,r,!1)},er.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return pr(this,t,e,r);case"utf8":case"utf-8":return fr(this,t,e,r);case"ascii":return mr(this,t,e,r);case"latin1":case"binary":return _r(this,t,e,r);case"base64":return gr(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vr(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},er.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xr(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}function Tr(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function Er(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",s=e;s<r;++s)n+=Dr(t[s]);return n}function wr(t,e,r){for(var i=t.slice(e,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}function Ar(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function Sr(t,e,r,i,n,s){if(!ar(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function Or(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(t.length-r,2);n<s;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function Rr(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(t.length-r,4);n<s;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function Pr(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ir(t,e,r,i,n){return n||Pr(t,0,r,4),Ze(t,e,r,i,23,4),r+4}function Mr(t,e,r,i,n){return n||Pr(t,0,r,8),Ze(t,e,r,i,52,8),r+8}er.prototype.slice=function(t,e){var r,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),er.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=er.prototype;else{var n=e-t;r=new er(n,void 0);for(var s=0;s<n;++s)r[s]=this[s+t]}return r},er.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||Ar(t,e,this.length);for(var i=this[t],n=1,s=0;++s<e&&(n*=256);)i+=this[t+s]*n;return i},er.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||Ar(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},er.prototype.readUInt8=function(t,e){return e||Ar(t,1,this.length),this[t]},er.prototype.readUInt16LE=function(t,e){return e||Ar(t,2,this.length),this[t]|this[t+1]<<8},er.prototype.readUInt16BE=function(t,e){return e||Ar(t,2,this.length),this[t]<<8|this[t+1]},er.prototype.readUInt32LE=function(t,e){return e||Ar(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},er.prototype.readUInt32BE=function(t,e){return e||Ar(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},er.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||Ar(t,e,this.length);for(var i=this[t],n=1,s=0;++s<e&&(n*=256);)i+=this[t+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},er.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||Ar(t,e,this.length);for(var i=e,n=1,s=this[t+--i];i>0&&(n*=256);)s+=this[t+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*e)),s},er.prototype.readInt8=function(t,e){return e||Ar(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},er.prototype.readInt16LE=function(t,e){e||Ar(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},er.prototype.readInt16BE=function(t,e){e||Ar(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},er.prototype.readInt32LE=function(t,e){return e||Ar(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},er.prototype.readInt32BE=function(t,e){return e||Ar(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},er.prototype.readFloatLE=function(t,e){return e||Ar(t,4,this.length),We(this,t,!0,23,4)},er.prototype.readFloatBE=function(t,e){return e||Ar(t,4,this.length),We(this,t,!1,23,4)},er.prototype.readDoubleLE=function(t,e){return e||Ar(t,8,this.length),We(this,t,!0,52,8)},er.prototype.readDoubleBE=function(t,e){return e||Ar(t,8,this.length),We(this,t,!1,52,8)},er.prototype.writeUIntLE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||Sr(this,t,e,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[e]=255&t;++s<r&&(n*=256);)this[e+s]=t/n&255;return e+r},er.prototype.writeUIntBE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||Sr(this,t,e,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+r},er.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,1,255,0),er.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},er.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,2,65535,0),er.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Or(this,t,e,!0),e+2},er.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,2,65535,0),er.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Or(this,t,e,!1),e+2},er.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,4,4294967295,0),er.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Rr(this,t,e,!0),e+4},er.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,4,4294967295,0),er.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Rr(this,t,e,!1),e+4},er.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);Sr(this,t,e,r,n-1,-n)}var s=0,o=1,a=0;for(this[e]=255&t;++s<r&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},er.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);Sr(this,t,e,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},er.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,1,127,-128),er.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},er.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,2,32767,-32768),er.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Or(this,t,e,!0),e+2},er.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,2,32767,-32768),er.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Or(this,t,e,!1),e+2},er.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,4,2147483647,-2147483648),er.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Rr(this,t,e,!0),e+4},er.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||Sr(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),er.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Rr(this,t,e,!1),e+4},er.prototype.writeFloatLE=function(t,e,r){return Ir(this,t,e,!0,r)},er.prototype.writeFloatBE=function(t,e,r){return Ir(this,t,e,!1,r)},er.prototype.writeDoubleLE=function(t,e,r){return Mr(this,t,e,!0,r)},er.prototype.writeDoubleBE=function(t,e,r){return Mr(this,t,e,!1,r)},er.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var n,s=i-r;if(this===t&&r<e&&e<i)for(n=s-1;n>=0;--n)t[n+e]=this[n+r];else if(s<1e3||!er.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},er.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!er.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var o=ar(t)?t:Lr(new er(t,i).toString()),a=o.length;for(s=0;s<r-e;++s)this[s+e]=o[s%a]}return this};var Cr=/[^+\/0-9A-Za-z-_]/g;function Dr(t){return t<16?"0"+t.toString(16):t.toString(16)}function Lr(t,e){var r;e=e||1/0;for(var i=t.length,n=null,s=[],o=0;o<i;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function Nr(t){return function(t){var e,r,i,n,s,o;ze||Ye();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===t[a-2]?2:"="===t[a-1]?1:0,o=new He(3*a/4-s),i=s>0?a-4:a;var h=0;for(e=0,r=0;e<i;e+=4,r+=3)n=je[t.charCodeAt(e)]<<18|je[t.charCodeAt(e+1)]<<12|je[t.charCodeAt(e+2)]<<6|je[t.charCodeAt(e+3)],o[h++]=n>>16&255,o[h++]=n>>8&255,o[h++]=255&n;return 2===s?(n=je[t.charCodeAt(e)]<<2|je[t.charCodeAt(e+1)]>>4,o[h++]=255&n):1===s&&(n=je[t.charCodeAt(e)]<<10|je[t.charCodeAt(e+1)]<<4|je[t.charCodeAt(e+2)]>>2,o[h++]=n>>8&255,o[h++]=255&n),o}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Cr,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Fr(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function Br(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Ur=Xe.performance||{};Ur.now||Ur.mozNow||Ur.msNow||Ur.oNow||Ur.webkitNow;function Gr(t){return null===t}function kr(t){return"string"==typeof t}function Xr(t){return"object"==typeof t&&null!==t}function $r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var jr=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Hr(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function zr(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var Yr=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e};function qr(t,e,r,i){e=e||"&",r=r||"=";var n={};if("string"!=typeof t||0===t.length)return n;var s=/\+/g;t=t.split(e);var o=1e3;i&&"number"==typeof i.maxKeys&&(o=i.maxKeys);var a=t.length;o>0&&a>o&&(a=o);for(var h=0;h<a;++h){var u,l,c,d,p=t[h].replace(s,"%20"),f=p.indexOf(r);f>=0?(u=p.substr(0,f),l=p.substr(f+1)):(u=p,l=""),c=decodeURIComponent(u),d=decodeURIComponent(l),$r(n,c)?jr(n[c])?n[c].push(d):n[c]=[n[c],d]:n[c]=d}return n}function Vr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Wr,Zr,Kr,Jr,Qr,ti,ei,ri,ii,ni,si,oi,ai,hi,ui,li,ci,di=/^([a-z0-9.+-]+:)/i,pi=/:[0-9]*$/,fi=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,mi=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),_i=["'"].concat(mi),gi=["%","/","?",";","#"].concat(_i),vi=["/","?","#"],yi=/^[+a-z0-9A-Z_-]{0,63}$/,bi=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,xi={javascript:!0,"javascript:":!0},Ti={javascript:!0,"javascript:":!0},Ei={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function wi(t,e,r){if(t&&Xr(t)&&t instanceof Vr)return t;var i=new Vr;return i.parse(t,e,r),i}function Ai(t,e,r,i){if(!kr(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),s=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(s);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(s);if(a=a.trim(),!i&&1===e.split("#").length){var h=fi.exec(a);if(h)return t.path=a,t.href=a,t.pathname=h[1],h[2]?(t.search=h[2],t.query=r?qr(t.search.substr(1)):t.search.substr(1)):r&&(t.search="",t.query={}),t}var u,l,c,d,p=di.exec(a);if(p){var f=(p=p[0]).toLowerCase();t.protocol=f,a=a.substr(p.length)}if(i||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===a.substr(0,2);!m||p&&Ti[p]||(a=a.substr(2),t.slashes=!0)}if(!Ti[p]&&(m||p&&!Ei[p])){var _,g,v=-1;for(u=0;u<vi.length;u++)-1!==(l=a.indexOf(vi[u]))&&(-1===v||l<v)&&(v=l);for(-1!==(g=-1===v?a.lastIndexOf("@"):a.lastIndexOf("@",v))&&(_=a.slice(0,g),a=a.slice(g+1),t.auth=decodeURIComponent(_)),v=-1,u=0;u<gi.length;u++)-1!==(l=a.indexOf(gi[u]))&&(-1===v||l<v)&&(v=l);-1===v&&(v=a.length),t.host=a.slice(0,v),a=a.slice(v),Oi(t),t.hostname=t.hostname||"";var y="["===t.hostname[0]&&"]"===t.hostname[t.hostname.length-1];if(!y){var b=t.hostname.split(/\./);for(u=0,c=b.length;u<c;u++){var x=b[u];if(x&&!x.match(yi)){for(var T="",E=0,w=x.length;E<w;E++)x.charCodeAt(E)>127?T+="x":T+=x[E];if(!T.match(yi)){var A=b.slice(0,u),S=b.slice(u+1),O=x.match(bi);O&&(A.push(O[1]),S.unshift(O[2])),S.length&&(a="/"+S.join(".")+a),t.hostname=A.join(".");break}}}}t.hostname.length>255?t.hostname="":t.hostname=t.hostname.toLowerCase(),y||(t.hostname=ke(t.hostname)),d=t.port?":"+t.port:"";var R=t.hostname||"";t.host=R+d,t.href+=t.host,y&&(t.hostname=t.hostname.substr(1,t.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!xi[f])for(u=0,c=_i.length;u<c;u++){var P=_i[u];if(-1!==a.indexOf(P)){var I=encodeURIComponent(P);I===P&&(I=escape(P)),a=a.split(P).join(I)}}var M=a.indexOf("#");-1!==M&&(t.hash=a.substr(M),a=a.slice(0,M));var C=a.indexOf("?");if(-1!==C?(t.search=a.substr(C),t.query=a.substr(C+1),r&&(t.query=qr(t.query)),a=a.slice(0,C)):r&&(t.search="",t.query={}),a&&(t.pathname=a),Ei[f]&&t.hostname&&!t.pathname&&(t.pathname="/"),t.pathname||t.search){d=t.pathname||"";var D=t.search||"";t.path=d+D}return t.href=Si(t),t}function Si(t){var e=t.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var r=t.protocol||"",i=t.pathname||"",n=t.hash||"",s=!1,o="";t.host?s=e+t.host:t.hostname&&(s=e+(-1===t.hostname.indexOf(":")?t.hostname:"["+this.hostname+"]"),t.port&&(s+=":"+t.port)),t.query&&Xr(t.query)&&Object.keys(t.query).length&&(o=function(t,e,r,i){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?zr(Yr(t),(function(i){var n=encodeURIComponent(Hr(i))+r;return jr(t[i])?zr(t[i],(function(t){return n+encodeURIComponent(Hr(t))})).join(e):n+encodeURIComponent(Hr(t[i]))})).join(e):i?encodeURIComponent(Hr(i))+r+encodeURIComponent(Hr(t)):""}(t.query));var a=t.search||o&&"?"+o||"";return r&&":"!==r.substr(-1)&&(r+=":"),t.slashes||(!r||Ei[r])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r+s+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n}function Oi(t){var e=t.host,r=pi.exec(e);r&&(":"!==(r=r[0])&&(t.port=r.substr(1)),e=e.substr(0,e.length-r.length)),e&&(t.hostname=e)}
/*!
     * @pixi/constants - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/constants is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */Vr.prototype.parse=function(t,e,r){return Ai(this,t,e,r)},Vr.prototype.format=function(){return Si(this)},Vr.prototype.resolve=function(t){return this.resolveObject(wi(t,!1,!0)).format()},Vr.prototype.resolveObject=function(t){if(kr(t)){var e=new Vr;e.parse(t,!1,!0),t=e}for(var r,i=new Vr,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),h=0;h<a.length;h++){var u=a[h];"protocol"!==u&&(i[u]=t[u])}return Ei[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!Ei[t.protocol]){for(var l=Object.keys(t),c=0;c<l.length;c++){var d=l[c];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||Ti[t.protocol])i.pathname=t.pathname;else{for(r=(t.pathname||"").split("/");r.length&&!(t.host=r.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),i.pathname=r.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var p=i.pathname||"",f=i.search||"";i.path=p+f}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var m,_=i.pathname&&"/"===i.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=g||_||i.host&&t.pathname,y=v,b=i.pathname&&i.pathname.split("/")||[],x=i.protocol&&!Ei[i.protocol];if(r=t.pathname&&t.pathname.split("/")||[],x&&(i.hostname="",i.port=null,i.host&&(""===b[0]?b[0]=i.host:b.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===r[0]?r[0]=t.host:r.unshift(t.host)),t.host=null),v=v&&(""===r[0]||""===b[0])),g)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,b=r;else if(r.length)b||(b=[]),b.pop(),b=b.concat(r),i.search=t.search,i.query=t.query;else if(null!=t.search)return x&&(i.hostname=i.host=b.shift(),(m=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=m.shift(),i.host=i.hostname=m.shift())),i.search=t.search,i.query=t.query,Gr(i.pathname)&&Gr(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!b.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var T=b.slice(-1)[0],E=(i.host||t.host||b.length>1)&&("."===T||".."===T)||""===T,w=0,A=b.length;A>=0;A--)"."===(T=b[A])?b.splice(A,1):".."===T?(b.splice(A,1),w++):w&&(b.splice(A,1),w--);if(!v&&!y)for(;w--;w)b.unshift("..");!v||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),E&&"/"!==b.join("/").substr(-1)&&b.push("");var S=""===b[0]||b[0]&&"/"===b[0].charAt(0);return x&&(i.hostname=i.host=S?"":b.length?b.shift():"",(m=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=m.shift(),i.host=i.hostname=m.shift())),(v=v||i.host&&b.length)&&!S&&b.unshift(""),b.length?i.pathname=b.join("/"):(i.pathname=null,i.path=null),Gr(i.pathname)&&Gr(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},Vr.prototype.parseHost=function(){return Oi(this)},function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Wr||(Wr={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Zr||(Zr={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Kr||(Kr={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Jr||(Jr={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Qr||(Qr={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(ti||(ti={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(ei||(ei={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(ri||(ri={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(ii||(ii={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ni||(ni={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(si||(si={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(oi||(oi={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(ai||(ai={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(hi||(hi={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(ui||(ui={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(li||(li={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(ci||(ci={}));
/*!
     * @pixi/utils - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/utils is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
var Ri={parse:wi,format:function(t){return kr(t)&&(t=Ai({},t)),Si(t)},resolve:function(t,e){return wi(t,!1,!0).resolve(e)}};ee.RETINA_PREFIX=/@([0-9\.]+)x/,ee.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Pi,Ii=!1;function Mi(t){var e;if(!Ii){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=["\n %c %c %c PixiJS 6.0.2 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=self.console).log.apply(e,r)}else self.console&&self.console.log("PixiJS 6.0.2 - "+t+" - http://www.pixijs.com/");Ii=!0}}function Ci(){return void 0===Pi&&(Pi=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:ee.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!r||!r.getContextAttributes().stencil);if(r){var n=r.getExtension("WEBGL_lose_context");n&&n.loseContext()}return r=null,i}catch(t){return!1}}()),Pi}var Di={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Li(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function Ni(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function Fi(t){return"string"==typeof t&&"#"===(t=Di[t.toLowerCase()]||t)[0]&&(t=t.substr(1)),parseInt(t,16)}var Bi=function(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[Jr.NORMAL_NPM]=Jr.NORMAL,t[Jr.ADD_NPM]=Jr.ADD,t[Jr.SCREEN_NPM]=Jr.SCREEN,e[Jr.NORMAL]=Jr.NORMAL_NPM,e[Jr.ADD]=Jr.ADD_NPM,e[Jr.SCREEN]=Jr.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();function Ui(t,e){return Bi[e?1:0][t]}function Gi(t,e,r,i){return r=r||new Float32Array(4),i||void 0===i?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function ki(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,i=t>>8&255,n=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((i=i*e+.5|0)<<8)+(n=n*e+.5|0)}function Xi(t,e,r,i){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(i||void 0===i)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function $i(t,e){void 0===e&&(e=null);var r=6*t;if((e=e||new Uint16Array(r)).length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var i=0,n=0;i<r;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}function ji(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Hi={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function zi(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function Yi(t){return!(t&t-1||!t)}function qi(t){var e=(t>65535?1:0)<<4,r=((t>>>=e)>255?1:0)<<3;return e|=r,e|=r=((t>>>=r)>15?1:0)<<2,(e|=r=((t>>>=r)>3?1:0)<<1)|(t>>>=r)>>1}function Vi(t,e,r){var i,n=t.length;if(!(e>=n||0===r)){var s=n-(r=e+r>n?n-e:r);for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}}function Wi(t){return 0===t?0:t<0?-1:1}var Zi=0;function Ki(){return++Zi}var Ji={};function Qi(t,e,r){if(void 0===r&&(r=3),!Ji[e]){var i=(new Error).stack;void 0===i?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),Ji[e]=!0}}var tn={},en=Object.create(null),rn=Object.create(null);var nn=function(){function t(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||ee.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();function sn(t){var e,r,i,n=t.width,s=t.height,o=t.getContext("2d"),a=o.getImageData(0,0,n,s).data,h=a.length,u={top:null,left:null,right:null,bottom:null},l=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(r=e/4%n,i=~~(e/4/n),null===u.top&&(u.top=i),null===u.left?u.left=r:r<u.left&&(u.left=r),null===u.right?u.right=r+1:u.right<r&&(u.right=r+1),null===u.bottom?u.bottom=i:u.bottom<i&&(u.bottom=i));return null!==u.top&&(n=u.right-u.left,s=u.bottom-u.top+1,l=o.getImageData(u.left,u.top,n,s)),{height:s,width:n,data:l}}var on,an=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function hn(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,on||(on=document.createElement("a")),on.href=t;var r=Ri.parse(on.href),i=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&i&&r.protocol===e.protocol?"":"anonymous"}function un(t,e){var r=ee.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1}var ln,cn=Object.freeze({__proto__:null,BaseTextureCache:rn,CanvasRenderTarget:nn,DATA_URI:an,ProgramCache:tn,TextureCache:en,clearTextureCache:function(){var t;for(t in en)delete en[t];for(t in rn)delete rn[t]},correctBlendMode:Ui,createIndicesForQuads:$i,decomposeDataUri:function(t){var e=an.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}},deprecation:Qi,destroyTextureCache:function(){var t;for(t in en)en[t].destroy();for(t in rn)rn[t].destroy()},determineCrossOrigin:hn,getBufferType:ji,getResolutionOfUrl:un,hex2rgb:Li,hex2string:Ni,interleaveTypedArrays:function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;var o=new ArrayBuffer(4*r),a=null,h=0;for(s=0;s<t.length;s++){var u=e[s],l=t[s],c=ji(l);n[c]||(n[c]=new Hi[c](o)),a=n[c];for(var d=0;d<l.length;d++){a[(d/u|0)*i+h+d%u]=l[d]}h+=u}return new Float32Array(o)},isPow2:Yi,isWebGLSupported:Ci,log2:qi,nextPow2:zi,premultiplyBlendMode:Bi,premultiplyRgba:Gi,premultiplyTint:ki,premultiplyTintToRgba:Xi,removeItems:Vi,rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},sayHello:Mi,sign:Wi,skipHello:function(){Ii=!0},string2hex:Fi,trimCanvas:sn,uid:Ki,url:Ri,isMobile:te,EventEmitter:ie,earcut:ne}),dn=2*Math.PI,pn=180/Math.PI,fn=Math.PI/180;
/*!
     * @pixi/math - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/math is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(ln||(ln={}));var mn=function(){function t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=ln.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(n-i,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=n-i,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),_n=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=t,this.y=e,this.radius=r,this.type=ln.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,i=this.x-t,n=this.y-e;return(i*=i)+(n*=n)<=r},t.prototype.getBounds=function(){return new mn(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),gn=function(){function t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t,this.y=e,this.width=r,this.height=i,this.type=ln.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,i=(e-this.y)/this.height;return(r*=r)+(i*=i)<=1},t.prototype.getBounds=function(){return new mn(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),vn=function(){function t(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=ln.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];a>e!=u>e&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),yn=function(){function t(t,e,r,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=ln.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),bn=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),xn=function(){function t(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0),this._x=r,this._y=i,this.cb=t,this.scope=e}return t.prototype.clone=function(e,r){return void 0===e&&(e=this.cb),void 0===r&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),Tn=function(){function t(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},t.prototype.apply=function(t,e){e=e||new bn;var r=t.x,i=t.y;return e.x=this.a*r+this.c*i+this.tx,e.y=this.b*r+this.d*i+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new bn;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,n=t.y;return e.x=this.d*r*i+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*n+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,s=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=s*e-this.ty*r,this.ty=s*r+this.ty*e,this},t.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,i=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(dn-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),En=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],wn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],An=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Sn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],On=[],Rn=[],Pn=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];On.push(e);for(var r=0;r<16;r++)for(var i=Pn(En[t]*En[r]+An[t]*wn[r]),n=Pn(wn[t]*En[r]+Sn[t]*wn[r]),s=Pn(En[t]*An[r]+An[t]*Sn[r]),o=Pn(wn[t]*An[r]+Sn[t]*Sn[r]),a=0;a<16;a++)if(En[a]===i&&wn[a]===n&&An[a]===s&&Sn[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new Tn;h.set(En[t],wn[t],An[t],Sn[t],0,0),Rn.push(h)}}();var In={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return En[t]},uY:function(t){return wn[t]},vX:function(t){return An[t]},vY:function(t){return Sn[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return On[t][e]},sub:function(t,e){return On[t][In.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?In.S:In.N:2*Math.abs(e)<=Math.abs(t)?t>0?In.E:In.W:e>0?t>0?In.SE:In.SW:t>0?In.NE:In.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=Rn[In.inv(e)];n.tx=r,n.ty=i,t.append(n)}},Mn=function(){function t(){this.worldTransform=new Tn,this.localTransform=new Tn,this.position=new xn(this.onChange,this,0,0),this.scale=new xn(this.onChange,this,1,1),this.pivot=new xn(this.onChange,this,0,0),this.skew=new xn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();
/*!
     * @pixi/display - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/display is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
ee.SORTABLE_CHILDREN=!1;var Cn=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?mn.EMPTY:((t=t||new mn(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,a=t.ty,h=r*e.x+n*e.y+o,u=i*e.x+s*e.y+a;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1];e=s<e?s:e,r=o<r?o:r,i=s>i?s:i,n=o>n?o:n,e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=s>i?s:i,n=o>n?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=s>i?s:i,n=o>n?o:n,e=(s=t[6])<e?s:e,r=(o=t[7])<r?o:r,i=s>i?s:i,n=o>n?o:n,this.minX=e,this.minY=r,this.maxX=i,this.maxY=n},t.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},t.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=s*e+a*r+u,_=o*e+h*r+l;c=m<c?m:c,d=_<d?_:d,p=m>p?m:p,f=_>f?_:f,c=(m=s*i+a*r+u)<c?m:c,d=(_=o*i+h*r+l)<d?_:d,p=m>p?m:p,f=_>f?_:f,c=(m=s*e+a*n+u)<c?m:c,d=(_=o*e+h*n+l)<d?_:d,p=m>p?m:p,f=_>f?_:f,c=(m=s*i+a*n+u)<c?m:c,d=(_=o*i+h*n+l)<d?_:d,p=m>p?m:p,f=_>f?_:f,this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2){var h=t[a],u=t[a+1];i=h<i?h:i,n=u<n?u:n,s=h>s?h:s,o=u>o?u:o}this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},t.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},t.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,_=r;_<i;_+=2){var g=e[_],v=e[_+1],y=o*g+h*v+l,b=u*v+a*g+c;d=Math.min(d,y-n),f=Math.max(f,y+n),p=Math.min(p,b-s),m=Math.max(m,b+s)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=n&&i<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=r<o?r:o,this.minY=i<a?i:a,this.maxX=n>h?n:h,this.maxY=s>u?s:u}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=n&&i<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=r<o?r:o,this.minY=i<a?i:a,this.maxX=n>h?n:h,this.maxY=s>u?s:u}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,r,i,n,s){t-=n,e-=s,r+=n,i+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},t}(),Dn=function(t,e){return(Dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Ln(t,e){function r(){this.constructor=t}Dn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Nn=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Mn,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Cn,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return Ln(e,t),e.mixin=function(t){for(var r=Object.keys(t),i=0;i<r.length;++i){var n=r[i];Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new mn),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new mn),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Cn);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,s},e.prototype.toGlobal=function(t,e,r){return void 0===r&&(r=!1),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Fn),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*pn},set:function(t){this.transform.rotation=t*fn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1);(this._mask=t,this._mask)&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(ie),Fn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return Ln(e,t),e}(Nn);function Bn(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Nn.prototype.displayObjectUpdateTransform=Nn.prototype.updateTransform;var Un=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=ee.SORTABLE_CHILDREN,e.sortDirty=!1,e}return Ln(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length>1)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),i=this.getChildIndex(e);this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);Vi(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length>1)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,Vi(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Vi(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var r,i=t,n=e-i;if(n>0&&n<=e){r=this.children.splice(i,n);for(var s=0;s<r.length;++s)r[s].parent=null,r[s].transform&&(r[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(s=0;s<r.length;++s)r[s].emit("removed",this),this.emit("childRemoved",r[s],this,s);return r}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(Bn),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var r=e._mask.maskObject||e._mask;r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,r){void 0===r&&(r=!1);var i=t.prototype.getLocalBounds.call(this,e);if(!r)for(var n=0,s=this.children.length;n<s;++n){var o=this.children[n];o.visible&&o.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var i=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);i=0;for(var n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof e?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(r)for(var n=0;n<i.length;++n)i[n].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(Nn);Un.prototype.containerUpdateTransform=Un.prototype.updateTransform;
/*!
     * @pixi/accessibility - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/accessibility is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
var Gn={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Nn.mixin(Gn);var kn,Xn=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(te.tablet||te.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},t.prototype.update=function(){var t=performance.now();if(!(te.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),r=e.left,i=e.top,n=e.width,s=e.height,o=this.renderer,a=o.width,h=o.height,u=o.resolution,l=n/a*u,c=s/h*u,d=this.div;d.style.left=r+"px",d.style.top=i+"px",d.style.width=a+"px",d.style.height=h+"px";for(var p=0;p<this.children.length;p++){var f=this.children[p];if(f.renderId!==this.renderId)f._accessibleActive=!1,Vi(this.children,p,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,p--;else{d=f._accessibleDiv;var m=f.hitArea,_=f.worldTransform;f.hitArea?(d.style.left=(_.tx+m.x*_.a)*l+"px",d.style.top=(_.ty+m.y*_.d)*c+"px",d.style.width=m.width*_.a*l+"px",d.style.height=m.height*_.d*c+"px"):(m=f.getBounds(),this.capHitArea(m),d.style.left=m.x*l+"px",d.style.top=m.y*c+"px",d.style.width=m.width*l+"px",d.style.height=m.height*c+"px",d.title!==f.accessibleTitle&&null!==f.accessibleTitle&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&null!==f.accessibleHint&&d.setAttribute("aria-label",f.accessibleHint)),f.accessibleTitle===d.title&&f.tabIndex===d.tabIndex||(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,r=e.width,i=e.height;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>i&&(t.height=i-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,r=t.target.displayObject,i=e.eventData;e.dispatchEvent(r,"click",i),e.dispatchEvent(r,"pointertap",i),e.dispatchEvent(r,"tap",i)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,r=t.target.displayObject,i=e.eventData;e.dispatchEvent(r,"mouseover",i)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,r=t.target.displayObject,i=e.eventData;e.dispatchEvent(r,"mouseout",i)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();
/*!
     * @pixi/ticker - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/ticker is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
ee.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(kn||(kn={}));var $n=function(){function t(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),jn=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new $n(null,null,1/0),this.deltaMS=1/ee.TARGET_FPMS,this.elapsedMS=1/ee.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,r){return void 0===r&&(r=kn.NORMAL),this._addListener(new $n(t,e,r))},t.prototype.addOnce=function(t,e,r){return void 0===r&&(r=kn.NORMAL),this._addListener(new $n(t,e,r,!0))},t.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ee.TARGET_FPMS;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,ee.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),Hn=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,kn.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?jn.shared:new jn,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}(),zn=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new bn,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),Yn=function(t,e){return(Yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var qn=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),Vn=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),Wn=function(){function t(){this._tempPoint=new bn}return t.prototype.recursiveFindHit=function(t,e,r,i,n){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=n=e.interactive||n,h=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(i=!1,h=!1)),a=!1):e._mask&&i&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(i=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;l>=0;l--){var c=u[l],d=this.recursiveFindHit(t,c,r,i,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(i=!1),o=!0)}}return n&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),r&&r(t,e,!!o))),o},t.prototype.findHit=function(t,e,r,i){this.recursiveFindHit(t,e,r,i,!1)},t}(),Zn={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Nn.mixin(Zn);var Kn={target:null,data:{global:null}},Jn=function(t){function e(e,r){var i=t.call(this)||this;return r=r||{},i.renderer=e,i.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new zn,i.mouse.identifier=1,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[1]=i.mouse,i.interactionDataPool=[],i.eventData=new qn,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in self),i.supportsTouchEvents="ontouchstart"in self,i.supportsPointerEvents=!!self.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new Wn,i._tempDisplayObject=new Fn,i._useSystemTicker=void 0===r.useSystemTicker||r.useSystemTicker,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function(t,e){function r(){this.constructor=t}Yn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return Kn.target=null,Kn.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(Kn,e,null,!0),Kn.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(jn.system.add(this.tickerUpdate,this,kn.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(jn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),self.addEventListener("pointercancel",this.onPointerCancel,!0),self.addEventListener("pointerup",this.onPointerUp,!0)):(self.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),self.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),self.removeEventListener("pointercancel",this.onPointerCancel,!0),self.removeEventListener("pointerup",this.onPointerUp,!0)):(self.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),self.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.interactionDOMElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,r)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,r){r.stopPropagationHint&&t!==r.stopsPropagatingAt||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},e.prototype.delayDispatchEvent=function(t,e,r){this.delayedEvents.push({displayObject:t,eventString:e,eventData:r})},e.prototype.mapPositionToPoint=function(t,e,r){var i;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var n=1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*n,t.y=(r-i.top)*(this.interactionDOMElement.height/i.height)*n},e.prototype.processInteractive=function(t,e,r,i){var n=this.search.findHit(t,e,r,i),s=this.delayedEvents;if(!s.length)return n;t.stopPropagationHint=!1;var o=s.length;this.delayedEvents=[];for(var a=0;a<o;a++){var h=s[a],u=h.displayObject,l=h.eventString,c=h.eventData;c.stopsPropagatingAt===u&&(c.stopPropagationHint=!0),this.dispatchEvent(u,l,c)}return n},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var r=e.length,i=0;i<r;i++){var n=e[i],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);if(o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===n.pointerType)this.emit("touchstart",o);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,r){var i=t.data,n=t.data.identifier;if(r)if(e.trackedPointers[n]||(e.trackedPointers[n]=new Vn(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;s?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,r){for(var i=this.normalizeToPointerData(t),n=i.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<n;o++){var a=i[o],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,r,e||!s),this.emit(e?"pointercancel":"pointerup"+s,u),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+s:"mouseup"+s,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,u),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var r=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,r){var i=t.data,n=t.data.identifier,s=e.trackedPointers[n],o="touch"===i.pointerType,a="mouse"===i.pointerType||"pen"===i.pointerType,h=!1;if(a){var u=2===i.button,l=Vn.FLAGS,c=u?l.RIGHT_DOWN:l.LEFT_DOWN,d=void 0!==s&&s.flags&c;r?(this.dispatchEvent(e,u?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,u?"rightclick":"click",t),h=!0)):d&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),s&&(u?s.rightDown=!1:s.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(a&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var r=e.length,i=0;i<r;i++){var n=e[i],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===n.pointerType&&this.emit("touchmove",o),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,r){var i=t.data,n="touch"===i.pointerType,s="mouse"===i.pointerType||"pen"===i.pointerType;s&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);i.data.originalEvent=e,this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(r.identifier)}},e.prototype.processPointerOverOut=function(t,e,r){var i=t.data,n=t.data.identifier,s="mouse"===i.pointerType||"pen"===i.pointerType,o=e.trackedPointers[n];r&&!o&&(o=e.trackedPointers[n]=new Vn(n)),void 0!==o&&(r&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);i.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e,r=t.pointerId;return 1===r||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[r]?e=this.activeInteractionData[r]:((e=this.interactionDataPool.pop()||new zn).identifier=r,this.activeInteractionData[r]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,i=t.changedTouches.length;r<i;r++){var n=t.changedTouches[r];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else if(self.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof self.PointerEvent))e.push(t);else{var s=t;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(ie),Qn=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,r,i,n,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,u=h.name,l=h.items;this._aliasCount++;for(var c=0,d=l.length;c<d;c++)l[c][u](t,e,r,i,n,s,o,a);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Qn.prototype,{dispatch:{value:Qn.prototype.emit},run:{value:Qn.prototype.emit}}),
/*!
     * @pixi/core - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/core is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
ee.PREFER_ENV=te.any?Wr.WEBGL:Wr.WEBGL2,ee.STRICT_TEXTURE_CACHE=!1;var ts=[];function es(t,e){if(!t)return null;var r="";if("string"==typeof t){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(var n=ts.length-1;n>=0;--n){var s=ts[n];if(s.test&&s.test(t,r))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var rs=function(t,e){return(rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function is(t,e){function r(){this.constructor=t}rs(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ns=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Qn("setRealSize"),this.onUpdate=new Qn("update"),this.onError=new Qn("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,r){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),ss=function(t){function e(e,r){var i=this,n=r||{},s=n.width,o=n.height;if(!s||!o)throw new Error("BufferResource width or height invalid");return(i=t.call(this,s,o)||this).data=e,i}return is(e,t),e.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===oi.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,r.internalFormat,n,s,0,e.format,r.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(ns),os={scaleMode:ii.NEAREST,format:ti.RGBA,alphaMode:oi.NPM},as=function(t){function e(e,r){void 0===e&&(e=null),void 0===r&&(r=null);var i=t.call(this)||this,n=(r=r||{}).alphaMode,s=r.mipmap,o=r.anisotropicLevel,a=r.scaleMode,h=r.width,u=r.height,l=r.wrapMode,c=r.format,d=r.type,p=r.target,f=r.resolution,m=r.resourceOptions;return!e||e instanceof ns||((e=es(e,m)).internal=!0),i.width=h||0,i.height=u||0,i.resolution=f||ee.RESOLUTION,i.mipmap=void 0!==s?s:ee.MIPMAP_TEXTURES,i.anisotropicLevel=void 0!==o?o:ee.ANISOTROPIC_LEVEL,i.wrapMode=l||ee.WRAP_MODE,i.scaleMode=void 0!==a?a:ee.SCALE_MODE,i.format=c||ti.RGBA,i.type=d||ri.UNSIGNED_BYTE,i.target=p||ei.TEXTURE_2D,i.alphaMode=void 0!==n?n:oi.UNPACK,i.uid=Ki(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=h>0&&u>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(e),i}return is(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Yi(this.realWidth)&&Yi(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete rn[this.cacheId],delete en[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,r,i){void 0===i&&(i=ee.STRICT_TEXTURE_CACHE);var n="string"==typeof t,s=null;if(n)s=t;else{if(!t._pixiId){var o=r&&r.pixiIdPrefix||"pixiid";t._pixiId=o+"_"+Ki()}s=t._pixiId}var a=rn[s];if(n&&i&&!a)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return a||((a=new e(t,r)).cacheId=s,e.addToCache(a,s)),a},e.fromBuffer=function(t,r,i,n){t=t||new Float32Array(r*i*4);var s=new ss(t,{width:r,height:i}),o=t instanceof Float32Array?ri.FLOAT:ri.UNSIGNED_BYTE;return new e(s,Object.assign(os,n||{width:r,height:i,type:o}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),rn[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),rn[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=rn[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete rn[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete rn[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(ie),hs=function(t){function e(e,r){var i=this,n=r||{},s=n.width,o=n.height;(i=t.call(this,s,o)||this).items=[],i.itemDirtyIds=[];for(var a=0;a<e;a++){var h=new as;i.items.push(h),i.itemDirtyIds.push(-2)}return i.length=e,i._load=null,i.baseTexture=null,i}return is(e,t),e.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof ns?this.addResourceAt(t[r],r):this.addResourceAt(es(t[r],e),r))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],r=e.realWidth,i=e.realHeight;return t.resize(r,i),Promise.resolve(t)})),this._load},e}(ns),us=function(t){function e(e,r){var i,n,s=this,o=r||{},a=o.width,h=o.height;return Array.isArray(e)?(i=e,n=e.length):n=e,s=t.call(this,n,{width:a,height:h})||this,i&&s.initFromArray(i,r),s}return is(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=ei.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},e}(hs),ls=function(t){function e(e){var r=this,i=e,n=i.naturalWidth||i.videoWidth||i.width,s=i.naturalHeight||i.videoHeight||i.height;return(r=t.call(this,n,s)||this).source=e,r.noSubImage=!1,r}return is(e,t),e.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=hn(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},e.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,o=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===oi.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==o?(r.width=s,r.height=o,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,r=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(r,i),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ns),cs=function(t){function e(e){return t.call(this,e)||this}return is(e,t),e.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(ls),ds=function(t){function e(r,i){var n=this,s=i||{},o=s.width,a=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");n=t.call(this,6,{width:o,height:a})||this;for(var l=0;l<e.SIDES;l++)n.items[l].target=ei.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=!1!==u,r&&n.initFromArray(r,i),!1!==h&&n.load(),n}return is(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=ei.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=ei.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,r,i){for(var n=this.itemDirtyIds,s=0;s<e.SIDES;s++){var o=this.items[s];n[s]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,i),n[s]=o.dirtyId):n[s]<-1&&(t.gl.texImage2D(o.target,0,i.internalFormat,r.realWidth,r.realHeight,0,r.format,i.type,null),n[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(hs),ps=function(t){function e(e,r){var i=this;if(r=r||{},!(e instanceof HTMLImageElement)){var n=new Image;ls.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}return i=t.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==r.createBitmap?r.createBitmap:ee.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,i.bitmap=null,i._load=null,!1!==r.autoLoad&&i.load(),i}return is(e,t),e.prototype.load=function(t){var e=this;return this._load?this._load:(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,r){var i=e.source;e.url=i.src;var n=function(){e.destroyed||(i.onload=null,i.onerror=null,e.resize(i.width,i.height),e._load=null,e.createBitmap?t(e.process()):t(e))};i.complete&&i.src?n():(i.onload=n,i.onerror=function(t){r(t),e.onError.emit(t)})})),this._load)},e.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===oi.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,r,i){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,r,i,this.bitmap),!this.preserveBitmap){var n=!0,s=r._glTextures;for(var o in s){var a=s[o];if(a!==i&&a.dirtyId!==r.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(ls),fs=function(t){function e(e,r){var i=this;return r=r||{},(i=t.call(this,document.createElement("canvas"))||this)._width=0,i._height=0,i.svg=e,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,!1!==r.autoLoad&&i.load(),i}return is(e,t),e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load)},e.prototype._loadSvg=function(){var t=this,e=new Image;ls.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(r){t._resolve&&(e.onerror=null,t.onError.emit(r))},e.onload=function(){if(t._resolve){var r=e.width,i=e.height;if(!r||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=r*t.scale,s=i*t.scale;(t._overrideWidth||t._overrideHeight)&&(n=t._overrideWidth||t._overrideHeight/i*r,s=t._overrideHeight||t._overrideWidth/r*i),n=Math.round(n),s=Math.round(s);var o=t.source;o.width=n,o.height=s,o._pixiId="canvas_"+Ki(),o.getContext("2d").drawImage(e,0,0,r,i,0,0,n,s),t._resolve(),t._resolve=null}}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),i={};return r&&(i[r[1]]=Math.round(parseFloat(r[3])),i[r[5]]=Math.round(parseFloat(r[7]))),i},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(ls),ms=function(t){function e(r,i){var n=this;if(i=i||{},!(r instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),"string"==typeof r&&(r=[r]);var o=r[0].src||r[0];ls.crossOrigin(s,o,i.crossorigin);for(var a=0;a<r.length;++a){var h=document.createElement("source"),u=r[a],l=u.src,c=u.mime,d=(l=l||r[a]).split("?").shift().toLowerCase(),p=d.substr(d.lastIndexOf(".")+1);c=c||e.MIME_TYPES[p]||"video/"+p,h.src=l,h.type=c,s.appendChild(h)}r=s}return(n=t.call(this,r)||this).noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=!1!==i.autoPlay,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),!1!==i.autoLoad&&n.load(),n}return is(e,t),e.prototype.update=function(e){if(!this.destroyed){var r=jn.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(r){t.valid?r(t):(t._resolve=r,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(jn.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(jn.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&jn.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(jn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(jn.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,r){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(ls),_s=function(t){function e(e){return t.call(this,e)||this}return is(e,t),e.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},e}(ls);ts.push(ps,_s,cs,ms,fs,ss,ds,us);var gs={__proto__:null,Resource:ns,BaseImageResource:ls,INSTALLED:ts,autoDetectResource:es,AbstractMultiResource:hs,ArrayResource:us,BufferResource:ss,CanvasResource:cs,CubeResource:ds,ImageResource:ps,SVGResource:fs,VideoResource:ms,ImageBitmapResource:_s},vs=function(){function t(t){this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return is(e,t),e.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===oi.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},e}(ss),bs=function(){function t(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Qn("disposeFramebuffer"),this.multisample=ci.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new as(null,{scaleMode:ii.NEAREST,resolution:1,mipmap:si.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new as(new ys(null,{width:this.width,height:this.height}),{scaleMode:ii.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:si.OFF,format:ti.DEPTH_COMPONENT,type:ri.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}if(this.depthTexture){n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,e/n)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),xs=function(t){function e(e){var r=this;if("number"==typeof e){var i=arguments[0],n=arguments[1],s=arguments[2],o=arguments[3];e={width:i,height:n,scaleMode:s,resolution:o}}r=t.call(this,null,e)||this;var a=e||{},h=a.width,u=a.height;return r.mipmap=0,r.width=Math.ceil(h)||100,r.height=Math.ceil(u)||100,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new bs(r.width*r.resolution,r.height*r.resolution).addColorTexture(0,r),r.maskStack=[],r.filterStack=[{}],r}return is(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(as),Ts=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,r){var i=e.width,n=e.height;if(r){var s=t.width/2/i,o=t.height/2/n,a=t.x/i+s,h=t.y/n+o;r=In.add(r,In.NW),this.x0=a+s*In.uX(r),this.y0=h+o*In.uY(r),r=In.add(r,2),this.x1=a+s*In.uX(r),this.y1=h+o*In.uY(r),r=In.add(r,2),this.x2=a+s*In.uX(r),this.y2=h+o*In.uY(r),r=In.add(r,2),this.x3=a+s*In.uX(r),this.y3=h+o*In.uY(r)}else this.x0=t.x/i,this.y0=t.y/n,this.x1=(t.x+t.width)/i,this.y1=t.y/n,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/n,this.x3=t.x/i,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),Es=new Ts,ws=function(t){function e(r,i,n,s,o,a){var h=t.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new mn(0,0,1,1)),r instanceof e&&(r=r.baseTexture),h.baseTexture=r,h._frame=i,h.trim=s,h.valid=!1,h._uvs=Es,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(o||0),!0===o)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=a?new bn(a.x,a.y):new bn(0,0),h._updateID=0,h.textureCacheIds=[],r.valid?h.noFrame?r.valid&&h.onBaseTextureUpdated(r):h.frame=i:r.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&r.on("update",h.onBaseTextureUpdated,h),h}return is(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&r.url&&en[r.url]&&e.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),i=new e(this.baseTexture,!this.noFrame&&t,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i},e.prototype.updateUvs=function(){this._uvs===Es&&(this._uvs=new Ts),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r,i){void 0===r&&(r={}),void 0===i&&(i=ee.STRICT_TEXTURE_CACHE);var n="string"==typeof t,s=null;if(n)s=t;else{if(!t._pixiId){var o=r&&r.pixiIdPrefix||"pixiid";t._pixiId=o+"_"+Ki()}s=t._pixiId}var a=en[s];if(n&&i&&!a)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return a||(r.resolution||(r.resolution=un(t)),(a=new e(new as(t,r))).baseTexture.cacheId=s,as.addToCache(a.baseTexture,s),e.addToCache(a,s)),a},e.fromURL=function(t,r){var i=Object.assign({autoLoad:!1},null==r?void 0:r.resourceOptions),n=e.from(t,Object.assign({resourceOptions:i},r),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then((function(){return Promise.resolve(n)}))},e.fromBuffer=function(t,r,i,n){return new e(as.fromBuffer(t,r,i,n))},e.fromLoader=function(t,r,i,n){var s=new as(t,Object.assign({scaleMode:ee.SCALE_MODE,resolution:un(r)},n)),o=s.resource;o instanceof ps&&(o.url=r);var a=new e(s);return i||(i=r),as.addToCache(a.baseTexture,i),e.addToCache(a,i),i!==r&&(as.addToCache(a.baseTexture,r),e.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise((function(t){a.baseTexture.once("loaded",(function(){return t(a)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),en[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),en[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=en[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete en[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)en[t.textureCacheIds[i]]===t&&delete en[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){var a=s&&o?"and":"or",h="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,u="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+u)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(ie);function As(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}ws.EMPTY=new ws(new as),As(ws.EMPTY),As(ws.EMPTY.baseTexture),ws.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new ws(new as(new cs(t)))}(),As(ws.WHITE),As(ws.WHITE.baseTexture);var Ss=function(t){function e(e,r){var i=t.call(this,e,r)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return is(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var r=arguments,i=[],n=1;n<arguments.length;n++)i[n-1]=r[n];return"number"==typeof t&&(Qi("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:i[0],scaleMode:i[1],resolution:i[2]}),new e(new xs(t))},e}(ws),Os=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e){var r=new xs(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Ss(r)},t.prototype.getOptimalTexture=function(e,r,i){void 0===i&&(i=1);var n=t.SCREEN_KEY;e*=i,r*=i,this.enableFullScreen&&e===this._pixelsWidth&&r===this._pixelsHeight||(n=(65535&(e=zi(e)))<<16|65535&(r=zi(r))),this.texturePool[n]||(this.texturePool[n]=[]);var s=this.texturePool[n].pop();return s||(s=this.createTexture(e,r)),s.filterPoolKey=n,s.setResolution(i),s},t.prototype.getFilterTexture=function(t,e){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var r=t.SCREEN_KEY,i=this.texturePool[r];if(this.enableFullScreen=e.width>0&&e.height>0,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[r]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY="screen",t}(),Rs=function(){function t(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=5126),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,r,i,n,s){return new t(e,r,i,n,s)},t}(),Ps=0,Is=function(){function t(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=Ps++,this.disposeRunner=new Qn("disposeBuffer")}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();function Ms(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Cs={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Ds={5126:4,5123:2,5121:1},Ls=0,Ns={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Fs=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Ls++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Qn("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Is||(e instanceof Array&&(e=new Float32Array(e)),e=new Is(e));var h=t.split("|");if(h.length>1){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new Rs(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof Is||(t instanceof Array&&(t=new Uint16Array(t)),t=new Is(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new Is;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*Ds[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;var o=new ArrayBuffer(4*r),a=null,h=0;for(s=0;s<t.length;s++){var u=e[s],l=t[s],c=Ms(l);n[c]||(n[c]=new Cs[c](o)),a=n[c];for(var d=0;d<l.length;d++){a[(d/u|0)*i+h+d%u]=l[d]}h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,r=0;r<this.buffers.length;r++)e.buffers[r]=new Is(this.buffers[r].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];e.attributes[r]=new Rs(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var r,i=new t,n=[],s=[],o=[],a=0;a<e.length;a++){r=e[a];for(var h=0;h<r.buffers.length;h++)s[h]=s[h]||0,s[h]+=r.buffers[h].data.length,o[h]=0}for(a=0;a<r.buffers.length;a++)n[a]=new(Ns[Ms(r.buffers[a].data)])(s[a]),i.buffers[a]=new Is(n[a]);for(a=0;a<e.length;a++){r=e[a];for(h=0;h<r.buffers.length;h++)n[h].set(r.buffers[h].data,o[h]),o[h]+=r.buffers[h].data.length}if(i.attributes=r.attributes,r.indexBuffer){i.indexBuffer=i.buffers[r.buffers.indexOf(r.indexBuffer)],i.indexBuffer.index=!0;var u=0,l=0,c=0,d=0;for(a=0;a<r.buffers.length;a++)if(r.buffers[a]!==r.indexBuffer){d=a;break}for(var a in r.attributes){var p=r.attributes[a];(0|p.buffer)===d&&(l+=p.size*Ds[p.type]/4)}for(a=0;a<e.length;a++){var f=e[a].indexBuffer.data;for(h=0;h<f.length;h++)i.indexBuffer.data[h+c]+=u;u+=r.buffers[d].data.length/l,c+=f.length}}return i},t}(),Bs=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return is(e,t),e}(Fs),Us=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Is(e.vertices),e.uvBuffer=new Is(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return is(e,t),e.prototype.map=function(t,e){var r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Fs),Gs=0,ks=function(){function t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Gs++,this.static=!!e}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,r,i){this.uniforms[e]=new t(r,i)},t.from=function(e,r){return new t(e,r)},t}(),Xs=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new mn,this.destinationFrame=new mn,this.bindingSourceFrame=new mn,this.bindingDestinationFrame=new mn,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),$s=[new bn,new bn,new bn,new bn],js=new Tn,Hs=function(t){function e(e){var r=t.call(this,e)||this;return r.defaultFilterStack=[{}],r.texturePool=new Os,r.texturePool.setScreenSize(e.view),r.statePool=[],r.quad=new Bs,r.quadUv=new Us,r.tempRect=new mn,r.activeState={},r.globalUniforms=new ks({outputFrame:new mn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),r.forceClear=!1,r.useMaxPadding=!1,r}return is(e,t),e.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new Xs,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++){var c=e[l];o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy}if(1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h){var d=this.tempRect.copyFrom(s.sourceFrame);r.projection.transform&&this.transformAABB(js.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)}this.roundFrame(n.sourceFrame,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var p=this.tempRect;p.x=0,p.y=0,p.width=n.sourceFrame.width,p.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,p),r.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy){var a=i.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var h=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,h.renderTexture,ai.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,l=this.getOptimalFilterTexture(u.width,u.height,e.resolution);l.filterFrame=u.filterFrame;var c=0;for(c=0;c<r.length-1;++c){r[c].apply(this,u,l,ai.CLEAR,e);var d=u;u=l,l=d}r[c].apply(this,u,h.renderTexture,ai.BLEND,e),this.returnFilterTexture(u),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},e.prototype.bindAndClear=function(t,e){void 0===e&&(e=ai.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=t.filterFrame.width,s.height=t.filterFrame.height,i.bind(t,t.filterFrame,s)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=1&n.stateId||this.forceClear;(e===ai.CLEAR||e===ai.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(Qr.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(Qr.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,s=e._texture.orig,o=t.set(n.width,0,0,n.height,i.x,i.y),a=e.worldTransform.copyTo(Tn.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,r){return void 0===r&&(r=1),this.texturePool.getOptimalTexture(t,e,r)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,e){var r=$s[0],i=$s[1],n=$s[2],s=$s[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),h=Math.max(r.x,i.x,n.x,s.x),u=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=h-o,e.height=u-a},e.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?js.copyFrom(n):js.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},e}(vs),zs=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),Ys=function(t){function e(e){var r=t.call(this,e)||this;return r.emptyRenderer=new zs(e),r.currentRenderer=r.emptyRenderer,r}return is(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;i>=0;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},e.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(l>=0&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,u._batchLocation=a,e[a]=u;break}a++}}},e}(vs),qs=0,Vs=function(t){function e(e){var r=t.call(this,e)||this;return r.webGLVersion=1,r.extensions={},r.supports={uint32Indices:!1},r.handleContextLost=r.handleContextLost.bind(r),r.handleContextRestored=r.handleContextRestored.bind(r),e.view.addEventListener("webglcontextlost",r.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",r.handleContextRestored,!1),r}return is(e,t),Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=qs++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=qs++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var r;if(ee.PREFER_ENV>=Wr.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(vs),Ws=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=ci.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Zs=new mn,Ks=function(t){function e(e){var r=t.call(this,e)||this;return r.managedFramebuffers=[],r.unknownFramebuffer=new bs(10,10),r.msaaSamples=null,r}return is(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new mn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;ee.PREFER_ENV===Wr.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=Kr.COLOR|Kr.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},e.prototype.initFramebuffer=function(t){var e=this.gl,r=new Ws(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r},e.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),r.multisample>1&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n=[],s=0;s<i;s++)if(!(0===s&&r.multisample>1)){var o=t.colorTextures[s],a=o.parentTextureArray||o;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+s,o.target,a._glTextures[this.CONTEXT_UID].texture,0),n.push(e.COLOR_ATTACHMENT0+s)}if((n.length>1&&e.drawBuffers(n),t.depthTexture)&&this.writeDepthTexture){var h=t.depthTexture;this.renderer.texture.bind(h,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,0)}r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},e.prototype.detectSamples=function(t){var e=this.msaaSamples,r=ci.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return 1===r&&(r=ci.NONE),r},e.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){var a=i.glFramebuffers[o];if(a){if(!t){if(a.multisample<=1)return;a.blitFramebuffer||(a.blitFramebuffer=new bs(i.width,i.height),a.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=a.blitFramebuffer).width=i.width,t.height=i.height}e||((e=Zs).width=i.width,e.height=i.height),r||(r=e);var h=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,a.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,h?s.NEAREST:s.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,e){var r=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(r){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(r.framebuffer),r.stencil&&i.deleteRenderbuffer(r.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var r=t.width,i=t.height,n=this.gl,s=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,s),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r,i),e.stencil=s,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new mn},e}(vs),Js=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Qs={5126:4,5123:2,5121:1},to=function(t){function e(e){var r=t.call(this,e)||this;return r._activeGeometry=null,r._activeVao=null,r.hasVao=!0,r.hasInstance=!0,r.canUseUInt32ElementIndex=!1,r.managedGeometries={},r.managedBuffers={},r}return is(e,t),e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var r=this.renderer.context.extensions.vertexArrayObject;ee.PREFER_ENV===Wr.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=function(){return r.createVertexArrayOES()},t.bindVertexArray=function(t){return r.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return r.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(t,e){return i.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,n,s){return i.drawElementsInstancedANGLE(t,e,r,n,s)},t.drawArraysInstanced=function(t,e,r,n){return i.drawArraysInstancedANGLE(t,e,r,n)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);var s=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i=t.buffers[r],n=i._glBuffers[this.CONTEXT_UID];if(i._updateID!==n.updateID){n.updateID=i._updateID;var s=i.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(s,n.buffer),this._boundBuffer=n,n.byteLength>=i.data.byteLength)e.bufferSubData(s,0,i.data);else{var o=i.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=i.data.byteLength,e.bufferData(s,i.data,o)}}}},e.prototype.checkCompatibility=function(t,e){var r=t.attributes,i=e.attributeData;for(var n in i)if(!r[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},e.prototype.getSignature=function(t,e){var r=t.attributes,i=e.attributeData,n=["g",t.id];for(var s in r)i[s]&&n.push(s);return n.join("-")},e.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a,a;var h=t.buffers,u=t.attributes,l={},c={};for(var d in h)l[d]=0,c[d]=0;for(var d in u)!u[d].size&&e.attributeData[d]?u[d].size=e.attributeData[d].size:u[d].size||console.warn("PIXI Geometry attribute '"+d+"' size cannot be determined (likely the bound shader does not have the attribute)"),l[u[d].buffer]+=u[d].size*Qs[u[d].type];for(var d in u){var p=u[d],f=p.size;void 0===p.stride&&(l[p.buffer]===f*Qs[p.type]?p.stride=0:p.stride=l[p.buffer]),void 0===p.start&&(p.start=c[p.buffer],c[p.buffer]+=f*Qs[p.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var m=0;m<h.length;m++){var _=h[m];_._glBuffers[n]||(_._glBuffers[n]=new Js(i.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this)),r&&_._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a,a},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var r=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)if("g"===a[0]){var h=r[a];this._activeVao===h&&this.unbind(),i.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);e=Object.keys(this.managedBuffers);for(r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},e.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o=null;for(var a in s){var h=s[a],u=n[h.buffer]._glBuffers[i];if(e.attributeData[a]){o!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),o=u);var l=e.attributeData[a].location;if(r.enableVertexAttribArray(l),r.vertexAttribPointer(l,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(l,1)}}}},e.prototype.draw=function(t,e,r,i){var n=this.gl,s=this._activeGeometry;if(s.indexBuffer){var o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?n.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(r||0)*o,i||1):n.drawElements(t,e||s.indexBuffer.data.length,a,(r||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?n.drawArraysInstanced(t,r,e||s.getSize(),i||1):n.drawArrays(t,r,e||s.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(vs),eo=function(){function t(t){void 0===t&&(t=null),this.type=li.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=li.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ro(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function io(t,e,r,i){var n=ro(t,t.VERTEX_SHADER,e),s=ro(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function no(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function so(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return no(2*e);case"bvec3":return no(3*e);case"bvec4":return no(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var oo,ao={},ho=ao;function uo(){if(ho===ao||ho&&ho.isContextLost()){var t=document.createElement("canvas"),e=void 0;ee.PREFER_ENV>=Wr.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),ho=e}return ho}function lo(t,e,r){if("precision"!==t.substring(0,9)){var i=e;return e===ui.HIGH&&r!==ui.HIGH&&(i=ui.MEDIUM),"precision "+i+" float;\n"+t}return r!==ui.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var co={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function po(t){return co[t]}var fo=null,mo={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function _o(t,e){if(!fo){var r=Object.keys(mo);fo={};for(var i=0;i<r.length;++i){var n=r[i];fo[t[n]]=mo[n]}}return fo[e]}var go=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],vo={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},yo={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var bo,xo=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function To(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}function Eo(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=xo.replace(/%forloop%/gi,To(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var wo=0,Ao={},So=function(){function t(e,r,i){void 0===i&&(i="pixi-shader"),this.id=wo++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),Ao[i]?(Ao[i]++,i+="-"+Ao[i]):Ao[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=lo(this.vertexSrc,ee.PRECISION_VERTEX,ui.HIGH),this.fragmentSrc=lo(this.fragmentSrc,ee.PRECISION_FRAGMENT,function(){if(!oo){oo=ui.MEDIUM;var t=uo();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);oo=e.precision?ui.HIGH:ui.MEDIUM}}return oo}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return t.prototype.extractData=function(t,e){var r=uo();if(r){var i=io(r,t,e);this.attributeData=this.getAttributeData(i,r),this.uniformData=this.getUniformData(i,r),r.deleteProgram(i)}else this.uniformData={},this.attributeData={}},t.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=_o(e,o.type),h={type:a,name:o.name,size:po(a),location:0};r[o.name]=h,i.push(h)}i.sort((function(t,e){return t.name>e.name?1:-1}));for(s=0;s<i.length;s++)i[s].location=s;return r},t.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=_o(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:so(h,s.size)}}return r},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var n=e+r,s=tn[n];return s||(tn[n]=s=new t(e,r,i)),s},t}(),Oo=function(){function t(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof ks?e:new ks(e):new ks({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){var i=e.uniforms[r];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,i){return new t(So.from(e,r),i)},t}(),Ro=function(){function t(){this.data=0,this.blendMode=Jr.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Jr.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Po=function(t){function e(r,i,n){var s=this,o=So.from(r||e.defaultVertexSrc,i||e.defaultFragmentSrc);return(s=t.call(this,o,n)||this).padding=0,s.resolution=ee.FILTER_RESOLUTION,s.enabled=!0,s.autoFit=!0,s.legacy=!!s.program.attributeData.aTextureCoord,s.state=new Ro,s}return is(e,t),e.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Oo),Io=new Tn,Mo=function(){function t(t,e){this._texture=t,this.mapCoord=new Tn,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(Io.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Io));var s=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,h=this.clampOffset;return o[0]=(e._frame.x+a+h)/s.width,o[1]=(e._frame.y+a+h)/s.height,o[2]=(e._frame.x+e._frame.width-a+h)/s.width,o[3]=(e._frame.y+e._frame.height-a+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0},t}(),Co=function(t){function e(e){var r=this,i=new Tn;return r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,r.maskSprite=e,r.maskMatrix=i,r}return is(e,t),e.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Mo(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},e}(Po),Do=function(t){function e(e){var r=t.call(this,e)||this;return r.enableScissor=!0,r.alphaMaskPool=[],r.maskDataPool=[],r.maskStack=[],r.alphaMaskIndex=0,r}return is(e,t),e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){var r=e;if(!r.isMaskData){var i=this.maskDataPool.pop()||new eo;i.pooled=!0,i.maskObject=e,r=i}switch(r.autoDetect&&this.detect(r),r.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),r._target=t,r.type){case li.SCISSOR:this.maskStack.push(r),this.renderer.scissor.push(r);break;case li.STENCIL:this.maskStack.push(r),this.renderer.stencil.push(r);break;case li.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r),this.maskStack.push(r)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case li.SCISSOR:this.renderer.scissor.pop();break;case li.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case li.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=li.SPRITE;else if(t.type=li.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var r=e.worldTransform,i=Math.atan2(r.b,r.a),n=Math.atan2(r.d,r.c);i=Math.round(i*(180/Math.PI)*100),n=((n=Math.round(n*(180/Math.PI)*100)-i)%18e3+18e3)%18e3,0===(i=(i%9e3+9e3)%9e3)&&9e3===n&&(t.type=li.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new Co(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var n=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=n,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(vs),Lo=function(t){function e(e){var r=t.call(this,e)||this;return r.maskStack=[],r.glConst=0,r}return is(e,t),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==r&&(0===i?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},e}(vs),No=function(t){function e(e){var r=t.call(this,e)||this;return r.glConst=WebGLRenderingContext.SCISSOR_TEST,r}return is(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=e?e.resolution:this.renderer.resolution,a=s.width/n.width,h=s.height/n.height,u=((t.x-n.x)*a+s.x)*o,l=((t.y-n.y)*h+s.y)*o,c=t.width*a*o,d=t.height*h*o;i&&(u+=i.tx*o,l+=i.ty*o),e||(l=this.renderer.height-d-l),this.renderer.gl.scissor(u,l,c,d)},e}(Lo),Fo=function(t){function e(e){var r=t.call(this,e)||this;return r.glConst=WebGLRenderingContext.STENCIL_TEST,r}return is(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Lo),Bo=function(t){function e(e){var r=t.call(this,e)||this;return r.destinationFrame=null,r.sourceFrame=null,r.defaultFrame=null,r.projectionMatrix=new Tn,r.transform=null,r}return is(e,t),e.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,s=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=s*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-s-e.y*n.d},e.prototype.setTransform=function(t){},e}(vs),Uo=new mn,Go=new mn,ko=function(t){function e(e){var r=t.call(this,e)||this;return r.clearColor=e._backgroundColorRgba,r.defaultMaskStack=[],r.current=null,r.sourceFrame=new mn,r.destinationFrame=new mn,r.viewportFrame=new mn,r}return is(e,t),e.prototype.bind=function(t,e,r){void 0===t&&(t=null);var i,n,s,o=this.renderer;this.current=t,t?(s=(i=t.baseTexture).resolution,e||(Uo.width=t.frame.width,Uo.height=t.frame.height,e=Uo),r||(Go.x=t.frame.x,Go.y=t.frame.y,Go.width=e.width,Go.height=e.height,r=Go),n=i.framebuffer):(s=o.resolution,e||(Uo.width=o.screen.width,Uo.height=o.screen.height,e=Uo),r||((r=Uo).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},e.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,n=r.width!==i.width||r.height!==i.height;if(n){var s=this.viewportFrame,o=s.x,a=s.y,h=s.width,u=s.height;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,h,u)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),n&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(vs),Xo=function(){},$o=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},t}(),jo=0,Ho={textureCount:0},zo=function(t){function e(e){var r=t.call(this,e)||this;return r.destroyed=!1,r.systemCheck(),r.gl=null,r.shader=null,r.program=null,r.cache={},r.id=jo++,r}return is(e,t),e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof bo)return bo;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");bo=!0===t({a:"b"},"a","b")}catch(t){bo=!1}return bo}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(Ho.textureCount=0,this.syncUniformGroup(t.uniformGroup,Ho)),i},e.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},e.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var i in t.uniforms){var n=e[i];if(n){for(var s=t.uniforms[i],o=!1,a=0;a<go.length;a++)if(go[a].test(n,s)){r.push(go[a].code(i,s)),o=!0;break}if(!o){var h=(1===n.size?vo:yo)[n.type].replace("location",'ud["'+i+'"].location');r.push('\n            cv = ud["'+i+'"].value;\n            v = uv["'+i+'"];\n            '+h+";")}}else t.uniforms[i].group&&r.push('\n                    renderer.shader.syncUniformGroup(uv["'+i+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var r=t.uniforms,i=[];for(var n in r)i.push(n),e[n]&&i.push(e[n].type);return i.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(var n in r.attributeData)i[n]=r.attributeData[n].location;var s=io(e,r.vertexSrc,r.fragmentSrc,i),o={};for(var n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:so(a.type,a.size)}}var h=new $o(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=h,h},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(vs);var Yo=function(t){function e(e){var r=t.call(this,e)||this;return r.gl=null,r.stateId=0,r.polygonOffset=0,r.blendMode=Jr.NONE,r._blendEq=!1,r.map=[],r.map[0]=r.setBlend,r.map[1]=r.setOffset,r.map[2]=r.setCullFace,r.map[3]=r.setDepthTest,r.map[4]=r.setFrontFace,r.map[5]=r.setDepthMask,r.checks=[],r.defaultState=new Ro,r.defaultState.blend=!0,r}return is(e,t),e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[Jr.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.ADD]=[t.ONE,t.ONE],e[Jr.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.NONE]=[0,0],e[Jr.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Jr.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Jr.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Jr.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Jr.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Jr.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Jr.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Jr.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Jr.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Jr.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Jr.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},e}(vs),qo=function(t){function e(e){var r=t.call(this,e)||this;return r.count=0,r.checkCount=0,r.maxIdle=ee.GC_MAX_IDLE,r.checkCountMax=ee.GC_MAX_CHECK_COUNT,r.mode=ee.GC_MODE,r}return is(e,t),e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==hi.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[i]=null,r=!0)}if(r){var s=0;for(i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},e.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e}(vs),Vo=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},Wo=function(t){function e(e){var r=t.call(this,e)||this;return r.boundTextures=[],r.currentLocation=-1,r.managedTextures=[],r._unknownBoundTextures=!1,r.unknownTexture=new as,r}return is(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new Vo(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Vo(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var r=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},e.prototype.initTexture=function(t){var e=new Vo(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var r=this.renderer.gl;t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===ri.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var r=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(r,t,e));else{var i=t.realWidth,n=t.realHeight,s=r.gl;(e.width!==i||e.height!==n||e.dirtyId<0)&&(e.width=i,e.height=n,s.texImage2D(t.target,0,e.internalFormat,i,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var r=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var i=this.managedTextures.indexOf(t);-1!==i&&Vi(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==si.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=ni.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var r=this.gl;if(e.mipmap&&t.mipmap!==si.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===ii.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===ii.LINEAR){var n=Math.min(t.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===ii.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===ii.LINEAR?r.LINEAR:r.NEAREST)},e}(vs),Zo={__proto__:null,FilterSystem:Hs,BatchSystem:Ys,ContextSystem:Vs,FramebufferSystem:Ks,GeometrySystem:to,MaskSystem:Do,ScissorSystem:No,StencilSystem:Fo,ProjectionSystem:Bo,RenderTextureSystem:ko,ShaderSystem:zo,StateSystem:Yo,TextureGCSystem:qo,TextureSystem:Wo},Ko=new Tn,Jo=function(t){function e(e,r){void 0===e&&(e=Zr.UNKNOWN);var i=t.call(this)||this;return r=Object.assign({},ee.RENDER_OPTIONS,r),i.options=r,i.type=e,i.screen=new mn(0,0,r.width,r.height),i.view=r.view||document.createElement("canvas"),i.resolution=r.resolution||ee.RESOLUTION,i.useContextAlpha=r.useContextAlpha,i.autoDensity=!!r.autoDensity,i.preserveDrawingBuffer=r.preserveDrawingBuffer,i.clearBeforeRender=r.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=r.backgroundColor||i._backgroundColor,i.backgroundAlpha=r.backgroundAlpha,void 0!==r.transparent&&(Qi("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=r.transparent,i.backgroundAlpha=r.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return is(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},e.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);var n=Ss.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return Ko.tx=-i.x,Ko.ty=-i.y,this.render(t,{renderTexture:n,clear:!1,transform:Ko,skipUpdateTransform:!!t.parent}),n},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=Zr.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Ni(t),Li(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(ie),Qo=function(t){function e(r){var i=t.call(this,Zr.WEBGL,r)||this;return r=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new Qn("destroy"),contextChange:new Qn("contextChange"),reset:new Qn("reset"),update:new Qn("update"),postrender:new Qn("postrender"),prerender:new Qn("prerender"),resize:new Qn("resize")},i.globalUniforms=new ks({projectionMatrix:new Tn},!0),i.addSystem(Do,"mask").addSystem(Vs,"context").addSystem(Yo,"state").addSystem(zo,"shader").addSystem(Wo,"texture").addSystem(to,"geometry").addSystem(Ks,"framebuffer").addSystem(No,"scissor").addSystem(Fo,"stencil").addSystem(Bo,"projection").addSystem(qo,"textureGC").addSystem(Hs,"filter").addSystem(ko,"renderTexture").addSystem(Ys,"batch"),i.initPlugins(e.__plugins),r.context?i.context.initFromContext(r.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:r.antialias,premultipliedAlpha:i.useContextAlpha&&"notMultiplied"!==i.useContextAlpha,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,Mi(2===i.context.webGLVersion?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return is(e,t),e.create=function(t){if(Ci())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var r=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var i in this[e]=r,this.runners)this.runners[i].add(r);return this},e.prototype.render=function(t,e){var r,i,n,s;if(e&&(e instanceof Ss?(Qi("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],s=arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,s=e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(r||(this._lastObjectRendered=t),!s){var o=t.enableTempParent();t.updateTransform(),t.disableTempParent(o)}this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.runners.resize.emit(e,r)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var r in this.runners.destroy.emit(),this.runners)this.runners[r].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Qi("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,r){e.__plugins=e.__plugins||{},e.__plugins[t]=r},e}(Jo);function ta(t){return Qo.create(t)}var ea="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",ra="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ia=function(){this.texArray=null,this.blend=0,this.type=Qr.TRIANGLES,this.start=0,this.size=0,this.data=null},na=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),sa=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),oa=function(t){function e(e){var r=t.call(this,e)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Ro.for2d(),r.size=4*ee.SPRITE_BATCH_SIZE,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),e.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return is(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;ee.PREFER_ENV===Wr.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ee.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Eo(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,r=e._textureArrayPool,i=this.size/4,n=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new ia);for(;r.length<n;)r.push(new na);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,r=this.MAX_TEXTURES,i=e._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count,a=++as._globalBatch,h=0,u=i[0],l=0;n.copyBoundTextures(s,r);for(var c=0;c<this._bufferSize;++c){var d=t[c];t[c]=null,d._batchEnabled!==a&&(u.count>=r&&(n.boundArray(u,s,a,r),this.buildDrawCalls(u,l,c),l=c,u=i[++h],++a),d._batchEnabled=a,d.touched=o,u.elements[u.count++]=d)}u.count>0&&(n.boundArray(u,s,a,r),this.buildDrawCalls(u,l,this._bufferSize),++h,++a);for(c=0;c<s.length;c++)s[c]=null;as._globalBatch=a},e.prototype.buildDrawCalls=function(t,r,i){var n=this._bufferedElements,s=this._attributeBuffer,o=this._indexBuffer,a=this.vertexSize,h=e._drawCallPool,u=this._dcIndex,l=this._aIndex,c=this._iIndex,d=h[u];d.start=this._iIndex,d.texArray=t;for(var p=r;p<i;++p){var f=n[p],m=f._texture.baseTexture,_=Bi[m.alphaMode?1:0][f.blendMode];n[p]=null,r<p&&d.blend!==_&&(d.size=c-d.start,r=p,(d=h[++u]).texArray=t,d.start=c),this.packInterleavedGeometry(f,s,o,l,c),l+=f.vertexData.length/2*a,c+=f.indices.length,d.blend=_}r<i&&(d.size=c-d.start,++u),this._dcIndex=u,this._aIndex=l,this._iIndex=c},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;ee.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,i=r.gl,n=r.state,s=e._drawCallPool,o=null,a=0;a<t;a++){var h=s[a],u=h.texArray,l=h.type,c=h.size,d=h.start,p=h.blend;o!==u&&(o=u,this.bindAndClearTexArray(u)),this.state.blendMode=p,n.set(this.state),i.drawElements(l,c,i.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),ee.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=zi(Math.ceil(t/8)),r=qi(e),i=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var n=this._aBuffers[i];return n||(this._aBuffers[i]=n=new sa(i*this.vertexSize*4)),n},e.prototype.getIndexBuffer=function(t){var e=zi(Math.ceil(t/12)),r=qi(e),i=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var n=this._iBuffers[r];return n||(this._iBuffers[r]=n=new Uint16Array(i)),n},e.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s=e.uint32View,o=e.float32View,a=i/this.vertexSize,h=t.uvs,u=t.indices,l=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?ki(t._tintRGB,d):t._tintRGB+(255*d<<24),f=0;f<l.length;f+=2)o[i++]=l[f],o[i++]=l[f+1],o[i++]=h[f],o[i++]=h[f+1],s[i++]=p,o[i++]=c;for(f=0;f<u.length;f++)r[n++]=a+u[f]},e._drawCallPool=[],e._textureArrayPool=[],e}(zs),aa=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=ks.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new So(this.vertexSrc,i)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Tn,default:this.defaultGroupCache[t]};return new Oo(this.programCache[t],n)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),ha=function(t){function e(e){void 0===e&&(e=!1);var r=t.call(this)||this;return r._buffer=new Is(null,e,!1),r._indexBuffer=new Is(null,e,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,ri.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,ri.FLOAT).addAttribute("aColor",r._buffer,4,!0,ri.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,ri.FLOAT).addIndex(r._indexBuffer),r}return is(e,t),e}(Fs),ua="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",la="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ca=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:ua,fragment:la,geometryClass:ha,vertexSize:6},t),r=e.vertex,i=e.fragment,n=e.vertexSize,s=e.geometryClass;return(function(t){function e(e){var o=t.call(this,e)||this;return o.shaderGenerator=new aa(r,i),o.geometryClass=s,o.vertexSize=n,o}return is(e,t),e}(oa))},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return ua},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return la},enumerable:!1,configurable:!0}),t}(),da=ca.create(),pa={},fa=function(t){Object.defineProperty(pa,t,{get:function(){return Qi("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),gs[t]}})};for(var ma in gs)fa(ma);var _a={},ga=function(t){Object.defineProperty(_a,t,{get:function(){return Qi("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Zo[t]}})};for(var ma in Zo)ga(ma);
/*!
     * @pixi/app - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/app is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */var va=function(){function t(e){var r=this;this.stage=new Un,e=Object.assign({forceCanvas:!1},e),this.renderer=ta(e),t._plugins.forEach((function(t){t.init.call(r,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,r){var i=this,n=t._plugins.slice(0);n.reverse(),n.forEach((function(t){t.destroy.call(i)})),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),ya=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){self.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,r;if(e.cancelResize(),e._resizeTo===self)t=self.innerWidth,r=self.innerHeight;else{var i=e._resizeTo;t=i.clientWidth,r=i.clientHeight}e.renderer.resize(t,r)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();va.registerPlugin(ya);
/*!
     * @pixi/extract - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/extract is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
var ba=new mn,xa=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,r){var i=new Image;return i.src=this.base64(t,e,r),i},t.prototype.base64=function(t,e,r){return this.canvas(t).toDataURL(e,r)},t.prototype.canvas=function(e){var r,i,n,s=this.renderer,o=!1,a=!1;e&&(e instanceof Ss?n=e:(n=this.renderer.generateTexture(e),a=!0)),n?(r=n.baseTexture.resolution,i=n.frame,o=!1,s.renderTexture.bind(n)):(r=this.renderer.resolution,o=!0,(i=ba).width=this.renderer.width,i.height=this.renderer.height,s.renderTexture.bind(null));var h=Math.floor(i.width*r+1e-4),u=Math.floor(i.height*r+1e-4),l=new nn(h,u,1),c=new Uint8Array(4*h*u),d=s.gl;d.readPixels(i.x*r,i.y*r,h,u,d.RGBA,d.UNSIGNED_BYTE,c);var p=l.context.getImageData(0,0,h,u);if(t.arrayPostDivide(c,p.data),l.context.putImageData(p,0,0),o){var f=new nn(l.width,l.height,1);f.context.scale(1,-1),f.context.drawImage(l.canvas,0,-u),l.destroy(),l=f}return a&&n.destroy(!0),l.canvas},t.prototype.pixels=function(e){var r,i,n,s=this.renderer,o=!1;e&&(e instanceof Ss?n=e:(n=this.renderer.generateTexture(e),o=!0)),n?(r=n.baseTexture.resolution,i=n.frame,s.renderTexture.bind(n)):(r=s.resolution,(i=ba).width=s.width,i.height=s.height,s.renderTexture.bind(null));var a=i.width*r,h=i.height*r,u=new Uint8Array(4*a*h),l=s.gl;return l.readPixels(i.x*r,i.y*r,a,h,l.RGBA,l.UNSIGNED_BYTE,u),o&&n.destroy(!0),t.arrayPostDivide(u,u),u},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var r=0;r<t.length;r+=4){var i=e[r+3]=t[r+3];0!==i?(e[r]=Math.round(Math.min(255*t[r]/i,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/i,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/i,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}},t}();var Ta=function(t,e){if(t){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),n={},s=14;s--;)n[r.key[s]]=i[s]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,(function(t,e,i){e&&(n[r.q.name][e]=i)})),n}},Ea=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(re((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(e,r,n){void 0===r&&(r=!1),i(this,t),this._fn=e,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return r(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var o=function(){function t(){i(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof n))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new n(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new n(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof n))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();o.MiniSignalBinding=n,e.default=o,t.exports=e.default})));
/*!
     * resource-loader - v3.0.1
     * https://github.com/pixijs/pixi-sound
     * Compiled Tue, 02 Jul 2019 14:06:18 UTC
     *
     * resource-loader is licensed under the MIT license.
     * http://www.opensource.org/licenses/mit-license
     */
function wa(){}function Aa(t,e,r,i){var n=0,s=t.length;!function o(a){a||n===s?r&&r(a):i?setTimeout((function(){e(t[n++],o)}),1):e(t[n++],o)}()}function Sa(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}var Oa={};function Ra(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pa(t,e,r){return e&&Ra(t.prototype,e),r&&Ra(t,r),t}var Ia=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),Ma=null;function Ca(){}var Da=function(){function t(e,r,i){if("string"!=typeof e||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Ca,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ea,this.onProgress=new Ea,this.onComplete=new Ea,this.onAfterMiddleware=new Ea}t.setExtensionLoadType=function(e,r){La(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){La(t._xhrTypeMap,e,r)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var r=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(r)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:Ia&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,r){r||(r=t+"/"+this._getExtension(e));var i=document.createElement("source");return i.src=e,i.type=r,i},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(Na(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(Na(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(Na(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,r="",i=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(r=e.responseText),0===i&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=200:1223===i&&(i=204),2===(i/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(r,"text/xml")}else{var s=document.createElement("div");s.innerHTML=r,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||r;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,Ma||(Ma=document.createElement("a")),Ma.href=t;var r=!(t=Ta(Ma.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var i=t.indexOf("?"),n=t.indexOf("#"),s=Math.min(i>-1?i:t.length,n>-1?n:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Pa(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function La(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function Na(t){return t.toString().replace("object ","")}Da.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Da.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Da.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Da.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Da._loadTypeMap={gif:Da.LOAD_TYPE.IMAGE,png:Da.LOAD_TYPE.IMAGE,bmp:Da.LOAD_TYPE.IMAGE,jpg:Da.LOAD_TYPE.IMAGE,jpeg:Da.LOAD_TYPE.IMAGE,tif:Da.LOAD_TYPE.IMAGE,tiff:Da.LOAD_TYPE.IMAGE,webp:Da.LOAD_TYPE.IMAGE,tga:Da.LOAD_TYPE.IMAGE,svg:Da.LOAD_TYPE.IMAGE,"svg+xml":Da.LOAD_TYPE.IMAGE,mp3:Da.LOAD_TYPE.AUDIO,ogg:Da.LOAD_TYPE.AUDIO,wav:Da.LOAD_TYPE.AUDIO,mp4:Da.LOAD_TYPE.VIDEO,webm:Da.LOAD_TYPE.VIDEO},Da._xhrTypeMap={xhtml:Da.XHR_RESPONSE_TYPE.DOCUMENT,html:Da.XHR_RESPONSE_TYPE.DOCUMENT,htm:Da.XHR_RESPONSE_TYPE.DOCUMENT,xml:Da.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Da.XHR_RESPONSE_TYPE.DOCUMENT,svg:Da.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Da.XHR_RESPONSE_TYPE.DOCUMENT,gif:Da.XHR_RESPONSE_TYPE.BLOB,png:Da.XHR_RESPONSE_TYPE.BLOB,bmp:Da.XHR_RESPONSE_TYPE.BLOB,jpg:Da.XHR_RESPONSE_TYPE.BLOB,jpeg:Da.XHR_RESPONSE_TYPE.BLOB,tif:Da.XHR_RESPONSE_TYPE.BLOB,tiff:Da.XHR_RESPONSE_TYPE.BLOB,webp:Da.XHR_RESPONSE_TYPE.BLOB,tga:Da.XHR_RESPONSE_TYPE.BLOB,json:Da.XHR_RESPONSE_TYPE.JSON,text:Da.XHR_RESPONSE_TYPE.TEXT,txt:Da.XHR_RESPONSE_TYPE.TEXT,ttf:Da.XHR_RESPONSE_TYPE.BUFFER,otf:Da.XHR_RESPONSE_TYPE.BUFFER},Da.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Fa=window.URL||window.webkitURL;var Ba={caching:function(t,e){var r=this;Oa[t.url]?(t.data=Oa[t.url],t.complete()):t.onComplete.once((function(){return Oa[r.url]=r.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===Da.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=Fa.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=Da.TYPE.IMAGE,void(t.data.onload=function(){Fa.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)r<t.length?i[s]=255&t.charCodeAt(r++):i[s]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var o=0;o<n.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[o])}return e}(t.xhr.responseText),t.type=Da.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},Ua=/(#[\w-]+)?$/,Ga=function(){function t(e,r){var i=this;void 0===e&&(e=""),void 0===r&&(r=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return i._loadResource(t,e)},this._queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:e,saturated:wa,unsaturated:wa,buffer:e/4,empty:wa,drain:wa,error:wa,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){r=0,i.drain=wa,i.started=!1,i._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var e=i._tasks.shift();0===i._tasks.length&&i.empty(),(r+=1)===i.concurrency&&i.saturated(),t(e.data,Sa(s(e)))}},length:function(){return i._tasks.length},running:function(){return r},idle:function(){return i._tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function n(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout((function(){return i.drain()}),1);else{var n={data:t,callback:"function"==typeof r?r:wa};e?i._tasks.unshift(n):i._tasks.push(n),setTimeout((function(){return i.process()}),1)}}function s(t){return function(){r-=1,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Ea,this.onError=new Ea,this.onLoad=new Ea,this.onStart=new Ea,this.onComplete=new Ea;for(var n=0;n<t._defaultBeforeMiddleware.length;++n)this.pre(t._defaultBeforeMiddleware[n]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}var e=t.prototype;return e.add=function(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Da(t,e,r),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var s=r.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var u=0;u<o.length;++u)o[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,r=Ta(t,{strictMode:!0});if(e=r.protocol||!r.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var i=Ua.exec(e)[0];-1!==(e=e.substr(0,e.length-i.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=i}return e},e._loadResource=function(t,e){var r=this;t._dequeue=e,Aa(this._beforeMiddleware,(function(e,i){e.call(r,t,(function(){i(t.isComplete?{}:null)}))}),(function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Aa(this._afterMiddleware,(function(r,i){r.call(e,t,i)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},Pa(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();Ga._defaultBeforeMiddleware=[],Ga._defaultAfterMiddleware=[],Ga.pre=function(t){return Ga._defaultBeforeMiddleware.push(t),Ga},Ga.use=function(t){return Ga._defaultAfterMiddleware.push(t),Ga};
/*!
     * @pixi/loaders - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/loaders is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var ka=function(t,e){return(ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Xa=function(){function t(){}return t.add=function(){Da.setExtensionLoadType("svg",Da.LOAD_TYPE.XHR),Da.setExtensionXhrType("svg",Da.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==Da.TYPE.IMAGE&&"svg"!==t.extension)e();else{var r=t.data,i=t.url,n=t.name,s=t.metadata;ws.fromLoader(r,i,n,s).then((function(r){t.texture=r,e()})).catch(e)}},t}(),$a=function(t){function e(r,i){for(var n=t.call(this,r,i)||this,s=0;s<e._plugins.length;++s){var o=e._plugins[s],a=o.pre,h=o.use;a&&n.pre(a),h&&n.use(h)}return n._protected=!1,n}return function(t,e){function r(){this.constructor=t}ka(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}(Ga);$a.registerPlugin({use:Ba.parsing}),$a.registerPlugin(Xa);var ja,Ha,za=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?$a.shared:new $a},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),Ya=Da;!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(Ha||(Ha={}));var qa=((ja={})[Ha.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ja[Ha.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ja[Ha.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ja[Ha.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ja[Ha.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ja[Ha.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ja[Ha.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ja[Ha.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ja[Ha.COMPRESSED_R11_EAC]=.5,ja[Ha.COMPRESSED_SIGNED_R11_EAC]=.5,ja[Ha.COMPRESSED_RG11_EAC]=1,ja[Ha.COMPRESSED_SIGNED_RG11_EAC]=1,ja[Ha.COMPRESSED_RGB8_ETC2]=.5,ja[Ha.COMPRESSED_RGBA8_ETC2_EAC]=1,ja[Ha.COMPRESSED_SRGB8_ETC2]=.5,ja[Ha.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ja[Ha.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ja[Ha.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ja[Ha.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ja[Ha.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ja[Ha.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ja[Ha.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ja[Ha.COMPRESSED_RGB_ETC1_WEBGL]=.5,ja[Ha.COMPRESSED_RGB_ATC_WEBGL]=.5,ja[Ha.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ja[Ha.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ja),Va=function(t,e){return(Va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Wa(t,e){function r(){this.constructor=t}Va(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function Za(t,e){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var Ka=function(t){function e(e,r){void 0===r&&(r={width:1,height:1,autoLoad:!0});var i,n,s=this;return"string"==typeof e?(i=e,n=new Uint8Array):(i=null,n=e),(s=t.call(this,n,r)||this).origin=i,s.buffer=n?new sa(n):null,s.origin&&!1!==r.autoLoad&&s.load(),n&&n.length&&(s.loaded=!0,s.onBlobLoaded(s.buffer.rawBinaryData)),s}return Wa(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,e=void 0,i=function(){var t;return Za(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new sa(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((r=Promise)||(r=Promise))((function(n,s){function o(t){try{h(i.next(t))}catch(t){s(t)}}function a(t){try{h(i.throw(t))}catch(t){s(t)}}function h(t){t.done?n(t.value):new r((function(e){e(t.value)})).then(o,a)}h((i=i.apply(t,e||[])).next())}));var t,e,r,i},e}(ss),Ja=function(t){function e(r,i){var n=t.call(this,r,i)||this;return n.format=i.format,n.levels=i.levels||1,n._width=i.width,n._height=i.height,n._extension=e._formatToExtension(n.format),(i.levelBuffers||n.buffer)&&(n._levelBuffers=i.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return Wa(e,t),e.prototype.upload=function(t,e,r){var i=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var n=0,s=this.levels;n<s;n++){var o=this._levelBuffers[n],a=o.levelID,h=o.levelWidth,u=o.levelHeight,l=o.levelBuffer;i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,h,u,0,l)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,r,i,n,s,o){for(var a=new Array(r),h=t.byteOffset,u=s,l=o,c=u+i-1&~(i-1),d=l+n-1&~(n-1),p=c*d*qa[e],f=0;f<r;f++)a[f]={levelID:f,levelWidth:r>1?u:c,levelHeight:r>1?l:d,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,p=(c=(u=u>>1||1)+i-1&~(i-1))*(d=(l=l>>1||1)+n-1&~(n-1))*qa[e];return a},e}(Ka),Qa=/iPhone/i,th=/iPod/i,eh=/iPad/i,rh=/\biOS-universal(?:.+)Mac\b/i,ih=/\bAndroid(?:.+)Mobile\b/i,nh=/Android/i,sh=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,oh=/Silk/i,ah=/Windows Phone/i,hh=/\bWindows(?:.+)ARM\b/i,uh=/BlackBerry/i,lh=/BB10/i,ch=/Opera Mini/i,dh=/\b(CriOS|Chrome)(?:.+)Mobile/i,ph=/Mobile(?:.+)Firefox\b/i,fh=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
     * @pixi/settings - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/settings is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
var mh=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,i=r.split("[FBAN");void 0!==i[1]&&(r=i[0]),void 0!==(i=r.split("Twitter"))[1]&&(r=i[0]);var n=function(t){return function(e){return e.test(t)}}(r),s={apple:{phone:n(Qa)&&!n(ah),ipod:n(th),tablet:!n(Qa)&&(n(eh)||fh(e))&&!n(ah),universal:n(rh),device:(n(Qa)||n(th)||n(eh)||n(rh)||fh(e))&&!n(ah)},amazon:{phone:n(sh),tablet:!n(sh)&&n(oh),device:n(sh)||n(oh)},android:{phone:!n(ah)&&n(sh)||!n(ah)&&n(ih),tablet:!n(ah)&&!n(sh)&&!n(ih)&&(n(oh)||n(nh)),device:!n(ah)&&(n(sh)||n(oh)||n(ih)||n(nh))||n(/\bokhttp\b/i)},windows:{phone:n(ah),tablet:n(hh),device:n(ah)||n(hh)},other:{blackberry:n(uh),blackberry10:n(lh),opera:n(ch),firefox:n(ph),chrome:n(dh),device:n(uh)||n(lh)||n(ch)||n(ph)||n(dh)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(self.navigator);var _h={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(mh.tablet||mh.phone){var r;if(mh.apple.device)if(r=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(r[1],10)<11&&(e=!1);if(mh.android.device)if(r=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(r[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:mh.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!mh.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},gh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Xe?Xe:"undefined"!=typeof self?self:{};function vh(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}vh((function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new n(i,s||t,o),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o},a.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,n,s,o){var a=arguments,h=r?r+t:t;if(!this._events[h])return!1;var u,l,c=this._events[h],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,s),!0;case 6:return c.fn.call(c.context,e,i,n,s,o),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=a[l];c.fn.apply(c.context,u)}else{var p,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,n);break;default:if(!u)for(p=1,u=new Array(d-1);p<d;p++)u[p-1]=a[p];c[l].fn.apply(c[l].context,u)}}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||o(this,s);else{for(var h=0,u=[],l=a.length;h<l;h++)(a[h].fn!==e||n&&!a[h].once||i&&a[h].context!==i)&&u.push(a[h]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a}));var yh=vh((function(t,e){!function(r){var i=e&&!e.nodeType&&e,n=t&&!t.nodeType&&t,s="object"==typeof gh&&gh;s.global!==s&&s.window!==s&&s.self!==s||(r=s);var o,a,h=2147483647,u=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw RangeError(d[t])}function _(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function g(t,e){var r=t.split("@"),i="";return r.length>1&&(i=r[0]+"@",t=r[1]),i+_((t=t.replace(c,".")).split("."),e).join(".")}function v(t){for(var e,r,i=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function y(t){return _(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,r){var i=0;for(t=r?p(t/700):t>>1,t+=p(t/e);t>455;i+=36)t=p(t/35);return p(i+36*t/(t+38))}function T(t){var e,r,i,n,s,o,a,u,l,c,d,f=[],_=t.length,g=0,v=128,b=72;for((r=t.lastIndexOf("-"))<0&&(r=0),i=0;i<r;++i)t.charCodeAt(i)>=128&&m("not-basic"),f.push(t.charCodeAt(i));for(n=r>0?r+1:0;n<_;){for(s=g,o=1,a=36;n>=_&&m("invalid-input"),((u=(d=t.charCodeAt(n++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||u>p((h-g)/o))&&m("overflow"),g+=u*o,!(u<(l=a<=b?1:a>=b+26?26:a-b));a+=36)o>p(h/(c=36-l))&&m("overflow"),o*=c;b=x(g-s,e=f.length+1,0==s),p(g/e)>h-v&&m("overflow"),v+=p(g/e),g%=e,f.splice(g++,0,v)}return y(f)}function E(t){var e,r,i,n,s,o,a,u,l,c,d,_,g,y,T,E=[];for(_=(t=v(t)).length,e=128,r=0,s=72,o=0;o<_;++o)(d=t[o])<128&&E.push(f(d));for(i=n=E.length,n&&E.push("-");i<_;){for(a=h,o=0;o<_;++o)(d=t[o])>=e&&d<a&&(a=d);for(a-e>p((h-r)/(g=i+1))&&m("overflow"),r+=(a-e)*g,e=a,o=0;o<_;++o)if((d=t[o])<e&&++r>h&&m("overflow"),d==e){for(u=r,l=36;!(u<(c=l<=s?1:l>=s+26?26:l-s));l+=36)T=u-c,y=36-c,E.push(f(b(c+T%y,0))),u=p(T/y);E.push(f(b(u,0))),s=x(r,g,i==n),r=0,++i}++r,++e}return E.join("")}if(o={version:"1.3.2",ucs2:{decode:v,encode:y},decode:T,encode:E,toASCII:function(t){return g(t,(function(t){return l.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return g(t,(function(t){return u.test(t)?T(t.slice(4).toLowerCase()):t}))}},i&&n)if(t.exports==i)n.exports=o;else for(a in o)o.hasOwnProperty(a)&&(i[a]=o[a]);else r.punycode=o}(gh)})),bh=function(t){return"string"==typeof t},xh=function(t){return"object"==typeof t&&null!==t},Th=function(t){return null===t},Eh=function(t){return null==t};function wh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Ah=function(t,e,r,i){e=e||"&",r=r||"=";var n={};if("string"!=typeof t||0===t.length)return n;var s=/\+/g;t=t.split(e);var o=1e3;i&&"number"==typeof i.maxKeys&&(o=i.maxKeys);var a=t.length;o>0&&a>o&&(a=o);for(var h=0;h<a;++h){var u,l,c,d,p=t[h].replace(s,"%20"),f=p.indexOf(r);f>=0?(u=p.substr(0,f),l=p.substr(f+1)):(u=p,l=""),c=decodeURIComponent(u),d=decodeURIComponent(l),wh(n,c)?Array.isArray(n[c])?n[c].push(d):n[c]=[n[c],d]:n[c]=d}return n},Sh=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Oh=function(t,e,r,i){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var n=encodeURIComponent(Sh(i))+r;return Array.isArray(t[i])?t[i].map((function(t){return n+encodeURIComponent(Sh(t))})).join(e):n+encodeURIComponent(Sh(t[i]))})).join(e):i?encodeURIComponent(Sh(i))+r+encodeURIComponent(Sh(t)):""},Rh=vh((function(t,e){e.decode=e.parse=Ah,e.encode=e.stringify=Oh})),Ph=zh,Ih=function(t,e){return zh(t,!1,!0).resolve(e)},Mh=function(t){bh(t)&&(t=zh(t));if(!(t instanceof Ch))return Ch.prototype.format.call(t);return t.format()};function Ch(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Dh=/^([a-z0-9.+-]+:)/i,Lh=/:[0-9]*$/,Nh=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Fh=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Bh=["'"].concat(Fh),Uh=["%","/","?",";","#"].concat(Bh),Gh=["/","?","#"],kh=/^[+a-z0-9A-Z_-]{0,63}$/,Xh=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$h={javascript:!0,"javascript:":!0},jh={javascript:!0,"javascript:":!0},Hh={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function zh(t,e,r){if(t&&xh(t)&&t instanceof Ch)return t;var i=new Ch;return i.parse(t,e,r),i}Ch.prototype.parse=function(t,e,r){if(!bh(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),n=-1!==i&&i<t.indexOf("#")?"?":"#",s=t.split(n);s[0]=s[0].replace(/\\/g,"/");var o=t=s.join(n);if(o=o.trim(),!r&&1===t.split("#").length){var a=Nh.exec(o);if(a)return this.path=o,this.href=o,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?Rh.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=Dh.exec(o);if(h){var u=(h=h[0]).toLowerCase();this.protocol=u,o=o.substr(h.length)}if(r||h||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===o.substr(0,2);!l||h&&jh[h]||(o=o.substr(2),this.slashes=!0)}if(!jh[h]&&(l||h&&!Hh[h])){for(var c,d,p=-1,f=0;f<Gh.length;f++){-1!==(m=o.indexOf(Gh[f]))&&(-1===p||m<p)&&(p=m)}-1!==(d=-1===p?o.lastIndexOf("@"):o.lastIndexOf("@",p))&&(c=o.slice(0,d),o=o.slice(d+1),this.auth=decodeURIComponent(c)),p=-1;for(f=0;f<Uh.length;f++){var m;-1!==(m=o.indexOf(Uh[f]))&&(-1===p||m<p)&&(p=m)}-1===p&&(p=o.length),this.host=o.slice(0,p),o=o.slice(p),this.parseHost(),this.hostname=this.hostname||"";var _="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!_)for(var g=this.hostname.split(/\./),v=(f=0,g.length);f<v;f++){var y=g[f];if(y&&!y.match(kh)){for(var b="",x=0,T=y.length;x<T;x++)y.charCodeAt(x)>127?b+="x":b+=y[x];if(!b.match(kh)){var E=g.slice(0,f),w=g.slice(f+1),A=y.match(Xh);A&&(E.push(A[1]),w.unshift(A[2])),w.length&&(o="/"+w.join(".")+o),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=yh.toASCII(this.hostname));var S=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+S,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!$h[u])for(f=0,v=Bh.length;f<v;f++){var R=Bh[f];if(-1!==o.indexOf(R)){var P=encodeURIComponent(R);P===R&&(P=escape(R)),o=o.split(R).join(P)}}var I=o.indexOf("#");-1!==I&&(this.hash=o.substr(I),o=o.slice(0,I));var M=o.indexOf("?");if(-1!==M?(this.search=o.substr(M),this.query=o.substr(M+1),e&&(this.query=Rh.parse(this.query)),o=o.slice(0,M)):e&&(this.search="",this.query={}),o&&(this.pathname=o),Hh[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var C=this.search||"";this.path=S+C}return this.href=this.format(),this},Ch.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&xh(this.query)&&Object.keys(this.query).length&&(s=Rh.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||Hh[e])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),e+n+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+i},Ch.prototype.resolve=function(t){return this.resolveObject(zh(t,!1,!0)).format()},Ch.prototype.resolveObject=function(t){if(bh(t)){var e=new Ch;e.parse(t,!1,!0),t=e}for(var r=new Ch,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var h=o[a];"protocol"!==h&&(r[h]=t[h])}return Hh[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Hh[t.protocol]){for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];r[c]=t[c]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||jh[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",f=r.search||"";r.path=p+f}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),g=_||m||r.host&&t.pathname,v=g,y=r.pathname&&r.pathname.split("/")||[],b=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!Hh[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===y[0]?y[0]=r.host:y.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),g=g&&(""===d[0]||""===y[0])),_)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,y=d;else if(d.length)y||(y=[]),y.pop(),y=y.concat(d),r.search=t.search,r.query=t.query;else if(!Eh(t.search)){if(b)r.hostname=r.host=y.shift(),(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift());return r.search=t.search,r.query=t.query,Th(r.pathname)&&Th(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=y.slice(-1)[0],T=(r.host||t.host||y.length>1)&&("."===x||".."===x)||""===x,E=0,w=y.length;w>=0;w--)"."===(x=y[w])?y.splice(w,1):".."===x?(y.splice(w,1),E++):E&&(y.splice(w,1),E--);if(!g&&!v)for(;E--;E)y.unshift("..");!g||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),T&&"/"!==y.join("/").substr(-1)&&y.push("");var A,S=""===y[0]||y[0]&&"/"===y[0].charAt(0);b&&(r.hostname=r.host=S?"":y.length?y.shift():"",(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift()));return(g=g||r.host&&y.length)&&!S&&y.unshift(""),y.length?r.pathname=y.join("/"):(r.pathname=null,r.path=null),Th(r.pathname)&&Th(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Ch.prototype.parseHost=function(){var t=this.host,e=Lh.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var Yh={parse:Ph,format:Mh,resolve:Ih};_h.RETINA_PREFIX=/@([0-9\.]+)x/,_h.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;(function(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[Jr.NORMAL_NPM]=Jr.NORMAL,t[Jr.ADD_NPM]=Jr.ADD,t[Jr.SCREEN_NPM]=Jr.SCREEN,e[Jr.NORMAL]=Jr.NORMAL_NPM,e[Jr.ADD]=Jr.ADD_NPM,e[Jr.SCREEN]=Jr.SCREEN_NPM;var i=[];i.push(e),i.push(t)})(),function(){function t(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||_h.RESOLUTION,this.resize(t,e)}t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0})}();var qh,Vh,Wh=function(){function t(){}return t.use=function(e,r){var i=e.data;if(e.type===Ya.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var n=i.textures,s=void 0,o=void 0,a=0,h=n.length;a<h;a++){var u=n[a],l=u.src,c=u.format;if(c||(o=l),t.textureFormats[c]){s=l;break}}if(!(s=s||o))return void r(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(s===e.url)return void r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=Yh.resolve(e.url.replace(this.baseUrl,""),s),f=i.cacheID;this.add(f,p,d,(function(t){if(t.error)r(t.error);else{var i=t.texture,n=void 0===i?null:i,s=t.textures,o=void 0===s?{}:s;Object.assign(e,{texture:n,textures:o}),r()}}))}else r()},t.add=function(){var e=document.createElement("canvas").getContext("webgl");if(e){var r={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};for(var i in t.textureExtensions=r,t.textureFormats={},r){var n=r[i];n&&Object.assign(t.textureFormats,Object.getPrototypeOf(n))}}else console.error("WebGL not available for compressed textures. Silently failing.")},t}();function Zh(t,e,r){var i={textures:{},texture:null};return e?(e.map((function(t){return new ws(new as(t,Object.assign({mipmap:si.OFF,alphaMode:oi.NO_PREMULTIPLIED_ALPHA},r)))})).forEach((function(e,r){var n=e.baseTexture,s=t+"-"+(r+1);as.addToCache(n,s),ws.addToCache(e,s),0===r&&(as.addToCache(n,t),ws.addToCache(e,t),i.texture=e),i.textures[s]=e})),i):i}Ya.setExtensionXhrType("dds",Ya.XHR_RESPONSE_TYPE.BUFFER);var Kh,Jh,Qh=3,tu=4,eu=7,ru=19,iu=2,nu=0,su=1,ou=2,au=3;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(Kh||(Kh={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(Jh||(Jh={}));var hu,uu,lu,cu=((qh={})[827611204]=Ha.COMPRESSED_RGBA_S3TC_DXT1_EXT,qh[861165636]=Ha.COMPRESSED_RGBA_S3TC_DXT3_EXT,qh[894720068]=Ha.COMPRESSED_RGBA_S3TC_DXT5_EXT,qh),du=((Vh={})[Kh.DXGI_FORMAT_BC1_TYPELESS]=Ha.COMPRESSED_RGBA_S3TC_DXT1_EXT,Vh[Kh.DXGI_FORMAT_BC1_UNORM]=Ha.COMPRESSED_RGBA_S3TC_DXT1_EXT,Vh[Kh.DXGI_FORMAT_BC2_TYPELESS]=Ha.COMPRESSED_RGBA_S3TC_DXT3_EXT,Vh[Kh.DXGI_FORMAT_BC2_UNORM]=Ha.COMPRESSED_RGBA_S3TC_DXT3_EXT,Vh[Kh.DXGI_FORMAT_BC3_TYPELESS]=Ha.COMPRESSED_RGBA_S3TC_DXT5_EXT,Vh[Kh.DXGI_FORMAT_BC3_UNORM]=Ha.COMPRESSED_RGBA_S3TC_DXT5_EXT,Vh[Kh.DXGI_FORMAT_BC1_UNORM_SRGB]=Ha.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Vh[Kh.DXGI_FORMAT_BC2_UNORM_SRGB]=Ha.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Vh[Kh.DXGI_FORMAT_BC3_UNORM_SRGB]=Ha.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Vh),pu=function(){function t(){}return t.use=function(e,r){if("dds"===e.extension&&e.data)try{Object.assign(e,Zh(e.name||e.url,t.parse(e.data),e.metadata))}catch(t){return void r(t)}r()},t.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var r=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),i=r[Qh],n=r[tu],s=r[eu],o=new Uint32Array(t,ru*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),a=o[1];if(4&a){var h=o[iu];if(808540228!==h){var u=cu[h],l=new Uint8Array(t,128);return[new Ja(l,{format:u,width:n,height:i,levels:s})]}var c=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=c[nu],p=c[su],f=c[ou],m=c[au],_=du[d];if(void 0===_)throw new Error("DDSLoader cannot parse texture data with DXGI format "+d);if(4===f)throw new Error("DDSLoader does not support cubemap textures");if(p===Jh.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var g=new Array;if(1===m)g.push(new Uint8Array(t,148));else{for(var v=qa[_],y=0,b=n,x=i,T=0;T<s;T++){y+=Math.max(1,b+3&-4)*Math.max(1,x+3&-4)*v,b>>>=1,x>>>=1}var E=148;for(T=0;T<m;T++)g.push(new Uint8Array(t,E,y)),E+=y}return g.map((function(t){return new Ja(t,{format:_,width:n,height:i,levels:s})}))}if(64&a)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&a)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&a)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&a)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}();Ya.setExtensionXhrType("ktx",Ya.XHR_RESPONSE_TYPE.BUFFER);var fu=[171,75,84,88,32,49,49,187,13,10,26,10],mu=12,_u=16,gu=24,vu=28,yu=36,bu=40,xu=44,Tu=48,Eu=52,wu=56,Au=60,Su=((hu={})[ri.UNSIGNED_BYTE]=1,hu[ri.UNSIGNED_SHORT]=2,hu[ri.FLOAT]=4,hu[ri.HALF_FLOAT]=8,hu),Ou=((uu={})[ti.RGBA]=4,uu[ti.RGB]=3,uu[ti.LUMINANCE]=1,uu[ti.LUMINANCE_ALPHA]=2,uu[ti.ALPHA]=1,uu),Ru=((lu={})[ri.UNSIGNED_SHORT_4_4_4_4]=2,lu[ri.UNSIGNED_SHORT_5_5_5_1]=2,lu[ri.UNSIGNED_SHORT_5_6_5]=2,lu),Pu=function(){function t(){}return t.use=function(e,r){if("ktx"===e.extension&&e.data)try{var i=e.name||e.url;Object.assign(e,Zh(i,t.parse(i,e.data),e.metadata))}catch(t){return void r(t)}r()},t.parse=function(e,r){var i=new DataView(r);if(!t.validate(e,i))return null;var n=67305985===i.getUint32(mu,!0),s=i.getUint32(_u,n),o=i.getUint32(gu,n),a=i.getUint32(vu,n),h=i.getUint32(yu,n),u=i.getUint32(bu,n)||1,l=i.getUint32(xu,n)||1,c=i.getUint32(Tu,n)||1,d=i.getUint32(Eu,n),p=i.getUint32(wu,n),f=i.getUint32(Au,n);if(0===u||1!==l)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");var m,_=h+3&-4,g=u+3&-4,v=new Array(c),y=h*u;if(0===s&&(y=_*g),void 0===(m=0!==s?Su[s]?Su[s]*Ou[o]:Ru[s]:qa[a]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var b=y*m,x=h,T=u,E=_,w=g,A=64+f,S=0;S<p;S++){for(var O=i.getUint32(A,n),R=A+4,P=0;P<c;P++){var I=v[P];I||(I=v[P]=new Array(p)),I[S]={levelID:S,levelWidth:p>1?x:E,levelHeight:p>1?T:w,levelBuffer:new Uint8Array(r,R,b)},R+=b}A=(A+=O+4)%4!=0?A+4-A%4:A,b=(E=(x=x>>1||1)+4-1&-4)*(w=(T=T>>1||1)+4-1&-4)*m}if(0!==s)throw new Error("TODO: Uncompressed");return v.map((function(t){return new Ja(null,{format:a,width:h,height:u,levels:p,levelBuffers:t})}))},t.validate=function(t,e){for(var r=0;r<fu.length;r++)if(e.getUint8(r)!==fu[r])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},t}(),Iu=function(t,e){return(Iu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Mu(t,e){function r(){this.constructor=t}Iu(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Cu,Du,Lu=function(t){function e(e,r,i,n){void 0===e&&(e=1500),void 0===i&&(i=16384),void 0===n&&(n=!1);var s=t.call(this)||this;return i>16384&&(i=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=e,s._batchSize=i,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=Jr.NORMAL,s.autoResize=n,s.roundPixels=!0,s.baseTexture=null,s.setProperties(r),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return Mu(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Li(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(Un),Nu=function(){function t(t,e,r){this.geometry=new Fs,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var n=t[i];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||ri.FLOAT,offset:n.offset},e[i]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Is($i(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){(o=this.dynamicProperties[r]).offset=e,e+=o.size,this.dynamicStride+=o.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Is(this.dynamicData,!1,!1);var n=0;this.staticStride=0;for(r=0;r<this.staticProperties.length;++r){(o=this.staticProperties[r]).offset=n,n+=o.size,this.staticStride+=o.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Is(this.staticData,!0,!1);for(r=0;r<this.dynamicProperties.length;++r){var o=this.dynamicProperties[r];t.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===ri.UNSIGNED_BYTE,o.type,4*this.dynamicStride,4*o.offset)}for(r=0;r<this.staticProperties.length;++r){o=this.staticProperties[r];t.addAttribute(o.attributeName,this.staticBuffer,0,o.type===ri.UNSIGNED_BYTE,o.type,4*this.staticStride,4*o.offset)}},t.prototype.uploadDynamic=function(t,e,r){for(var i=0;i<this.dynamicProperties.length;i++){var n=this.dynamicProperties[i];n.uploadFunction(t,e,r,n.type===ri.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,r){for(var i=0;i<this.staticProperties.length;i++){var n=this.staticProperties[i];n.uploadFunction(t,e,r,n.type===ri.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Fu=function(t){function e(e){var r=t.call(this,e)||this;return r.shader=null,r.properties=null,r.tempMatrix=new Tn,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ri.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=Oo.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=Ro.for2d(),r}return Mu(e,t),e.prototype.render=function(t){var e=t.children,r=t._maxSize,i=t._batchSize,n=this.renderer,s=e.length;if(0!==s){s>r&&!t.autoResize&&(s=r);var o=t._buffers;o||(o=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.state.blendMode=Ui(t.blendMode,a.alphaMode),n.state.set(this.state);var h=n.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Gi(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.alphaMode),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var l=!1,c=0,d=0;c<s;c+=i,d+=1){var p=s-c;p>i&&(p=i),d>=o.length&&o.push(this._generateOneMoreBuffer(t));var f=o[d];f.uploadDynamic(e,c,p);var m=t._bufferUpdateIDs[d]||0;(l=l||f._updateID<m)&&(f._updateID=t._updateID,f.uploadStatic(e,c,p)),n.geometry.bind(f.geometry),h.drawElements(h.TRIANGLES,6*p,h.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],r=t._maxSize,i=t._batchSize,n=t._properties,s=0;s<r;s+=i)e.push(new Nu(this.properties,n,i));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,r=t._properties;return new Nu(this.properties,r,e)},e.prototype.uploadVertices=function(t,e,r,i,n,s){for(var o=0,a=0,h=0,u=0,l=0;l<r;++l){var c=t[e+l],d=c._texture,p=c.scale.x,f=c.scale.y,m=d.trim,_=d.orig;m?(o=(a=m.x-c.anchor.x*_.width)+m.width,h=(u=m.y-c.anchor.y*_.height)+m.height):(o=_.width*(1-c.anchor.x),a=_.width*-c.anchor.x,h=_.height*(1-c.anchor.y),u=_.height*-c.anchor.y),i[s]=a*p,i[s+1]=u*f,i[s+n]=o*p,i[s+n+1]=u*f,i[s+2*n]=o*p,i[s+2*n+1]=h*f,i[s+3*n]=a*p,i[s+3*n+1]=h*f,s+=4*n}},e.prototype.uploadPosition=function(t,e,r,i,n,s){for(var o=0;o<r;o++){var a=t[e+o].position;i[s]=a.x,i[s+1]=a.y,i[s+n]=a.x,i[s+n+1]=a.y,i[s+2*n]=a.x,i[s+2*n+1]=a.y,i[s+3*n]=a.x,i[s+3*n+1]=a.y,s+=4*n}},e.prototype.uploadRotation=function(t,e,r,i,n,s){for(var o=0;o<r;o++){var a=t[e+o].rotation;i[s]=a,i[s+n]=a,i[s+2*n]=a,i[s+3*n]=a,s+=4*n}},e.prototype.uploadUvs=function(t,e,r,i,n,s){for(var o=0;o<r;++o){var a=t[e+o]._texture._uvs;a?(i[s]=a.x0,i[s+1]=a.y0,i[s+n]=a.x1,i[s+n+1]=a.y1,i[s+2*n]=a.x2,i[s+2*n+1]=a.y2,i[s+3*n]=a.x3,i[s+3*n+1]=a.y3,s+=4*n):(i[s]=0,i[s+1]=0,i[s+n]=0,i[s+n+1]=0,i[s+2*n]=0,i[s+2*n+1]=0,i[s+3*n]=0,i[s+3*n+1]=0,s+=4*n)}},e.prototype.uploadTint=function(t,e,r,i,n,s){for(var o=0;o<r;++o){var a=t[e+o],h=a._texture.baseTexture.alphaMode>0,u=a.alpha,l=u<1&&h?ki(a._tintRGB,u):a._tintRGB+(255*u<<24);i[s]=l,i[s+n]=l,i[s+2*n]=l,i[s+3*n]=l,s+=4*n}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(zs);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(Cu||(Cu={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(Du||(Du={}));var Bu={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},Uu=function(){function t(){this.color=16777215,this.alpha=1,this.texture=ws.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ws.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),Gu=function(t,e){return(Gu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function ku(t,e){function r(){this.constructor=t}Gu(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Xu={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,i=t.holes,n=e.points,s=e.indices;if(r.length>=6){for(var o=[],a=0;a<i.length;a++){var h=i[a];o.push(r.length/2),r=r.concat(h.points)}var u=ne(r,o,2);if(!u)return;var l=n.length/2;for(a=0;a<u.length;a+=3)s.push(u[a]+l),s.push(u[a+1]+l),s.push(u[a+2]+l);for(a=0;a<r.length;a++)n.push(r[a])}}},$u={build:function(t){var e,r,i=t.shape,n=t.points,s=i.x,o=i.y;if(n.length=0,t.type===ln.CIRC)e=i.radius,r=i.radius;else{var a=t.shape;e=a.width,r=a.height}if(0!==e&&0!==r){var h=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(e+r));h/=2.3;for(var u=2*Math.PI/h,l=0;l<h-.5;l++)n.push(s+Math.sin(-u*l)*e,o+Math.cos(-u*l)*r);n.push(n[0],n[1])}},triangulate:function(t,e){var r=t.points,i=e.points,n=e.indices,s=i.length/2,o=s,a=t.shape,h=t.matrix,u=a.x,l=a.y;i.push(t.matrix?h.a*u+h.c*l+h.tx:u,t.matrix?h.b*u+h.d*l+h.ty:l);for(var c=0;c<r.length;c+=2)i.push(r[c],r[c+1]),n.push(s++,o,s)}},ju={build:function(t){var e=t.shape,r=e.x,i=e.y,n=e.width,s=e.height,o=t.points;o.length=0,o.push(r,i,r+n,i,r+n,i+s,r,i+s)},triangulate:function(t,e){var r=t.points,i=e.points,n=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function Hu(t,e,r){return t+(e-t)*r}function zu(t,e,r,i,n,s,o){void 0===o&&(o=[]);for(var a=o,h=0,u=0,l=0,c=0,d=0,p=0,f=0,m=0;f<=20;++f)h=Hu(t,r,m=f/20),u=Hu(e,i,m),l=Hu(r,n,m),c=Hu(i,s,m),d=Hu(h,l,m),p=Hu(u,c,m),a.push(d,p);return a}var Yu={build:function(t){var e=t.shape,r=t.points,i=e.x,n=e.y,s=e.width,o=e.height,a=Math.max(0,Math.min(e.radius,Math.min(s,o)/2));r.length=0,a?(zu(i,n+a,i,n,i+a,n,r),zu(i+s-a,n,i+s,n,i+s,n+a,r),zu(i+s,n+o-a,i+s,n+o,i+s-a,n+o,r),zu(i+a,n+o,i,n+o,i,n+o-a,r)):r.push(i,n,i+s,n,i+s,n+o,i,n+o)},triangulate:function(t,e){for(var r=t.points,i=e.points,n=e.indices,s=i.length/2,o=ne(r,null,2),a=0,h=o.length;a<h;a+=3)n.push(o[a]+s),n.push(o[a+1]+s),n.push(o[a+2]+s);for(a=0,h=r.length;a<h;a++)i.push(r[a],r[++a])}};function qu(t,e,r,i,n,s,o,a){var h,u;o?(h=i,u=-r):(h=-i,u=r);var l=t-r*n+h,c=e-i*n+u,d=t+r*s+h,p=e+i*s+u;return a.push(l,c),a.push(d,p),2}function Vu(t,e,r,i,n,s,o,a){var h=r-t,u=i-e,l=Math.atan2(h,u),c=Math.atan2(n-t,s-e);a&&l<c?l+=2*Math.PI:!a&&l>c&&(c+=2*Math.PI);var d=l,p=c-l,f=Math.abs(p),m=Math.sqrt(h*h+u*u),_=1+(15*f*Math.sqrt(m)/Math.PI>>0),g=p/_;if(d+=g,a){o.push(t,e),o.push(r,i);for(var v=1,y=d;v<_;v++,y+=g)o.push(t,e),o.push(t+Math.sin(y)*m,e+Math.cos(y)*m);o.push(t,e),o.push(n,s)}else{o.push(r,i),o.push(t,e);for(v=1,y=d;v<_;v++,y+=g)o.push(t+Math.sin(y)*m,e+Math.cos(y)*m),o.push(t,e);o.push(n,s),o.push(t,e)}return 2*_}function Wu(t,e){t.lineStyle.native?function(t,e){var r=0,i=t.shape,n=t.points||i.points,s=i.type!==ln.POLY||i.closeStroke;if(0!==n.length){var o=e.points,a=e.indices,h=n.length/2,u=o.length/2,l=u;for(o.push(n[0],n[1]),r=1;r<h;r++)o.push(n[2*r],n[2*r+1]),a.push(l,l+1),l++;s&&a.push(l,u)}}(t,e):function(t,e){var r=t.shape,i=t.points||r.points.slice(),n=e.closePointEps;if(0!==i.length){var s=t.lineStyle,o=new bn(i[0],i[1]),a=new bn(i[i.length-2],i[i.length-1]),h=r.type!==ln.POLY||r.closeStroke,u=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(h){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));var l=.5*(o.x+a.x),c=.5*(a.y+o.y);i.unshift(l,c),i.push(l,c)}var d=e.points,p=i.length/2,f=i.length,m=d.length/2,_=s.width/2,g=_*_,v=s.miterLimit*s.miterLimit,y=i[0],b=i[1],x=i[2],T=i[3],E=0,w=0,A=-(b-T),S=y-x,O=0,R=0,P=Math.sqrt(A*A+S*S);A/=P,S/=P,A*=_,S*=_;var I=s.alignment,M=2*(1-I),C=2*I;h||(s.cap===Du.ROUND?f+=Vu(y-A*(M-C)*.5,b-S*(M-C)*.5,y-A*M,b-S*M,y+A*C,b+S*C,d,!0)+2:s.cap===Du.SQUARE&&(f+=qu(y,b,A,S,M,C,!0,d))),d.push(y-A*M,b-S*M),d.push(y+A*C,b+S*C);for(var D=1;D<p-1;++D){y=i[2*(D-1)],b=i[2*(D-1)+1],x=i[2*D],T=i[2*D+1],E=i[2*(D+1)],w=i[2*(D+1)+1],A=-(b-T),S=y-x,A/=P=Math.sqrt(A*A+S*S),S/=P,A*=_,S*=_,O=-(T-w),R=x-E,O/=P=Math.sqrt(O*O+R*R),R/=P,O*=_,R*=_;var L=x-y,N=b-T,F=x-E,B=w-T,U=N*F-B*L,G=U<0;if(Math.abs(U)<.1)d.push(x-A*M,T-S*M),d.push(x+A*C,T+S*C);else{var k=(-A+y)*(-S+T)-(-A+x)*(-S+b),X=(-O+E)*(-R+T)-(-O+x)*(-R+w),$=(L*X-F*k)/U,j=(B*k-N*X)/U,H=($-x)*($-x)+(j-T)*(j-T),z=x+($-x)*M,Y=T+(j-T)*M,q=x-($-x)*C,V=T-(j-T)*C,W=G?M:C;H<=Math.min(L*L+N*N,F*F+B*B)+W*W*g?s.join===Cu.BEVEL||H/g>v?(G?(d.push(z,Y),d.push(x+A*C,T+S*C),d.push(z,Y),d.push(x+O*C,T+R*C)):(d.push(x-A*M,T-S*M),d.push(q,V),d.push(x-O*M,T-R*M),d.push(q,V)),f+=2):s.join===Cu.ROUND?G?(d.push(z,Y),d.push(x+A*C,T+S*C),f+=Vu(x,T,x+A*C,T+S*C,x+O*C,T+R*C,d,!0)+4,d.push(z,Y),d.push(x+O*C,T+R*C)):(d.push(x-A*M,T-S*M),d.push(q,V),f+=Vu(x,T,x-A*M,T-S*M,x-O*M,T-R*M,d,!1)+4,d.push(x-O*M,T-R*M),d.push(q,V)):(d.push(z,Y),d.push(q,V)):(d.push(x-A*M,T-S*M),d.push(x+A*C,T+S*C),s.join===Cu.BEVEL||H/g>v||(s.join===Cu.ROUND?f+=G?Vu(x,T,x+A*C,T+S*C,x+O*C,T+R*C,d,!0)+2:Vu(x,T,x-A*M,T-S*M,x-O*M,T-R*M,d,!1)+2:(G?(d.push(q,V),d.push(q,V)):(d.push(z,Y),d.push(z,Y)),f+=2)),d.push(x-O*M,T-R*M),d.push(x+O*C,T+R*C),f+=2)}}y=i[2*(p-2)],b=i[2*(p-2)+1],x=i[2*(p-1)],A=-(b-(T=i[2*(p-1)+1])),S=y-x,A/=P=Math.sqrt(A*A+S*S),S/=P,A*=_,S*=_,d.push(x-A*M,T-S*M),d.push(x+A*C,T+S*C),h||(s.cap===Du.ROUND?f+=Vu(x-A*(M-C)*.5,T-S*(M-C)*.5,x-A*M,T-S*M,x+A*C,T+S*C,d,!1)+2:s.cap===Du.SQUARE&&(f+=qu(x,T,A,S,M,C,!1,d)));var Z=e.indices,K=Bu.epsilon*Bu.epsilon;for(D=m;D<f+m-2;++D)y=d[2*D],b=d[2*D+1],x=d[2*(D+1)],T=d[2*(D+1)+1],E=d[2*(D+2)],w=d[2*(D+2)+1],Math.abs(y*(T-w)+x*(w-b)+E*(b-T))<K||Z.push(D,D+1,D+2)}}(t,e)}var Zu,Ku=function(){function t(){}return t.curveTo=function(t,e,r,i,n,s){var o=s[s.length-2],a=s[s.length-1]-e,h=o-t,u=i-e,l=r-t,c=Math.abs(a*l-h*u);if(c<1e-8||0===n)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;var d=a*a+h*h,p=u*u+l*l,f=a*u+h*l,m=n*Math.sqrt(d)/c,_=n*Math.sqrt(p)/c,g=m*f/d,v=_*f/p,y=m*l+_*h,b=m*u+_*a,x=h*(_+g),T=a*(_+g),E=l*(m+v),w=u*(m+v);return{cx:y+t,cy:b+e,radius:n,startAngle:Math.atan2(T-b,x-y),endAngle:Math.atan2(w-b,E-y),anticlockwise:h*u>l*a}},t.arc=function(t,e,r,i,n,s,o,a,h){for(var u=o-s,l=Bu._segmentsCount(Math.abs(u)*n,40*Math.ceil(Math.abs(u)/dn)),c=u/(2*l),d=2*c,p=Math.cos(c),f=Math.sin(c),m=l-1,_=m%1/m,g=0;g<=m;++g){var v=c+s+d*(g+_*g),y=Math.cos(v),b=-Math.sin(v);h.push((p*y+f*b)*n+r,(p*-b+f*y)*n+i)}},t}(),Ju=function(){function t(){}return t.curveLength=function(t,e,r,i,n,s,o,a){for(var h=0,u=0,l=0,c=0,d=0,p=0,f=0,m=0,_=0,g=0,v=0,y=t,b=e,x=1;x<=10;++x)g=y-(m=(f=(p=(d=1-(u=x/10))*d)*d)*t+3*p*u*r+3*d*(l=u*u)*n+(c=l*u)*o),v=b-(_=f*e+3*p*u*i+3*d*l*s+c*a),y=m,b=_,h+=Math.sqrt(g*g+v*v);return h},t.curveTo=function(e,r,i,n,s,o,a){var h=a[a.length-2],u=a[a.length-1];a.length-=2;var l=Bu._segmentsCount(t.curveLength(h,u,e,r,i,n,s,o)),c=0,d=0,p=0,f=0,m=0;a.push(h,u);for(var _=1,g=0;_<=l;++_)p=(d=(c=1-(g=_/l))*c)*c,m=(f=g*g)*g,a.push(p*h+3*d*g*e+3*c*f*i+m*s,p*u+3*d*g*r+3*c*f*n+m*o)},t}(),Qu=function(){function t(){}return t.curveLength=function(t,e,r,i,n,s){var o=t-2*r+n,a=e-2*i+s,h=2*r-2*t,u=2*i-2*e,l=4*(o*o+a*a),c=4*(o*h+a*u),d=h*h+u*u,p=2*Math.sqrt(l+c+d),f=Math.sqrt(l),m=2*l*f,_=2*Math.sqrt(d),g=c/f;return(m*p+f*c*(p-_)+(4*d*l-c*c)*Math.log((2*f+g+p)/(g+_)))/(4*m)},t.curveTo=function(e,r,i,n,s){for(var o=s[s.length-2],a=s[s.length-1],h=Bu._segmentsCount(t.curveLength(o,a,e,r,i,n)),u=0,l=0,c=1;c<=h;++c){var d=c/h;u=o+(e-o)*d,l=a+(r-a)*d,s.push(u+(e+(i-e)*d-u)*d,l+(r+(n-r)*d-l)*d)}},t}(),tl=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),el=((Zu={})[ln.POLY]=Xu,Zu[ln.CIRC]=$u,Zu[ln.ELIP]=$u,Zu[ln.RECT]=ju,Zu[ln.RREC]=Yu,Zu),rl=[],il=[],nl=function(){function t(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=null),this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=i,this.type=t.type,this.points=[],this.holes=[]}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),sl=new bn,ol=new Cn,al=function(t){function e(){var e=t.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new Cn,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return ku(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),il.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),rl.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=null);var n=new nl(t,e,r,i);return this.graphicsData.push(n),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var r=new nl(t,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,r=0;r<e.length;++r){var i=e[r];if(i.fillStyle.visible&&(i.shape&&(i.matrix?i.matrix.applyInverse(t,sl):sl.copyFrom(t),i.shape.contains(sl.x,sl.y)))){var n=!1;if(i.holes)for(var s=0;s<i.holes.length;s++){if(i.holes[s].shape.contains(sl.x,sl.y)){n=!0;break}}if(!n)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,r=this.graphicsData,i=null,n=null;this.batches.length>0&&(n=(i=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<r.length;s++){this.shapeIndex++;var o=r[s],a=o.fillStyle,h=o.lineStyle;el[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var u=0;u<2;u++){var l=0===u?a:h;if(l.visible){var c=l.texture.baseTexture,d=this.indices.length,p=this.points.length/2;c.wrapMode=ni.REPEAT,0===u?this.processFill(o):this.processLine(o);var f=this.points.length/2-p;0!==f&&(i&&!this._compareStyles(n,l)&&(i.end(d,p),i=null),i||((i=rl.pop()||new tl).begin(l,d,p),this.batches.push(i),n=l),this.addUvs(this.points,e,l.texture,p,f,l.matrix))}}}var m=this.indices.length,_=this.points.length/2;if(i&&i.end(m,_),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var g=_>65535&&t;this.indicesUint16=g?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var r=this.graphicsData[t],i=r.fillStyle,n=r.lineStyle;if(i&&!i.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,r=t.length;e<r;e++)for(var i=t[e],n=0;n<i.size;n++){var s=i.start+n;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++as._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),il.push(this.drawCalls[e]);this.drawCalls.length=0;var r=this.colors,i=this.textureIds,n=il.pop();n||((n=new ia).texArray=new na),n.texArray.count=0,n.start=0,n.size=0,n.type=Qr.TRIANGLES;var s=0,o=null,a=0,h=!1,u=Qr.TRIANGLES,l=0;this.drawCalls.push(n);for(e=0;e<this.batches.length;e++){var c=this.batches[e],d=c.style,p=d.texture.baseTexture;h!==!!d.native&&(u=(h=!!d.native)?Qr.LINES:Qr.TRIANGLES,o=null,s=8,t++),o!==p&&(o=p,p._batchEnabled!==t&&(8===s&&(t++,s=0,n.size>0&&((n=il.pop())||((n=new ia).texArray=new na),this.drawCalls.push(n)),n.start=l,n.size=0,n.texArray.count=0,n.type=u),p.touched=1,p._batchEnabled=t,p._batchLocation=s,p.wrapMode=10497,n.texArray.elements[n.texArray.count++]=p,s++)),n.size+=c.size,l+=c.size,a=p._batchLocation,this.addColors(r,d.color,d.alpha,c.attribSize),this.addTextureIds(i,a,c.attribSize)}as._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,r=this.colors,i=this.textureIds,n=new ArrayBuffer(3*t.length*4),s=new Float32Array(n),o=new Uint32Array(n),a=0,h=0;h<t.length/2;h++)s[a++]=t[2*h],s[a++]=t[2*h+1],s[a++]=e[2*h],s[a++]=e[2*h+1],o[a++]=r[h],s[a++]=i[h];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),Xu.triangulate(t,this)):el[t.type].triangulate(t,this)},e.prototype.processLine=function(t){Wu(t,this);for(var e=0;e<t.holes.length;e++)Wu(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var r=t[e];el[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=ol,r=Tn.IDENTITY;this._bounds.clear(),e.clear();for(var i=0;i<this.graphicsData.length;i++){var n=this.graphicsData[i],s=n.shape,o=n.type,a=n.lineStyle,h=n.matrix||Tn.IDENTITY,u=0;if(a&&a.visible){var l=a.alignment;u=a.width,o===ln.POLY?u*=.5+Math.abs(.5-l):u*=Math.max(0,l)}if(r!==h&&(e.isEmpty()||(t.addBoundsMatrix(e,r),e.clear()),r=h),o===ln.RECT||o===ln.RREC){var c=s;e.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,u,u)}else if(o===ln.CIRC){var d=s;e.addFramePad(d.x,d.y,d.x,d.y,d.radius+u,d.radius+u)}else if(o===ln.ELIP){var p=s;e.addFramePad(p.x,p.y,p.x,p.y,p.width+u,p.height+u)}else{var f=s;t.addVerticesMatrix(r,f.points,0,f.points.length,u,u)}}e.isEmpty()||t.addBoundsMatrix(e,r),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var r=0;r<t.length/2;r++){var i=t[2*r],n=t[2*r+1];t[2*r]=e.a*i+e.c*n+e.tx,t[2*r+1]=e.b*i+e.d*n+e.ty}},e.prototype.addColors=function(t,e,r,i){for(var n=ki((e>>16)+(65280&e)+((255&e)<<16),r);i-- >0;)t.push(n)},e.prototype.addTextureIds=function(t,e,r){for(;r-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,r,i,n,s){void 0===s&&(s=null);for(var o=0,a=e.length,h=r.frame;o<n;){var u=t[2*(i+o)],l=t[2*(i+o)+1];if(s){var c=s.a*u+s.c*l+s.tx;l=s.b*u+s.d*l+s.ty,u=c}o++,e.push(u/h.width,l/h.height)}var d=r.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(e,r,a,n)},e.prototype.adjustUvs=function(t,e,r,i){for(var n=e.baseTexture,s=r+2*i,o=e.frame,a=o.width/n.width,h=o.height/n.height,u=o.x/o.width,l=o.y/o.height,c=Math.floor(t[r]+1e-6),d=Math.floor(t[r+1]+1e-6),p=r+2;p<s;p+=2)c=Math.min(c,Math.floor(t[p]+1e-6)),d=Math.min(d,Math.floor(t[p+1]+1e-6));u-=c,l-=d;for(p=r;p<s;p+=2)t[p]=(t[p]+u)*a,t[p+1]=(t[p+1]+l)*h},e.BATCHABLE_SIZE=100,e}(ha),hl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Du.BUTT,e.join=Cu.MITER,e.miterLimit=10,e}return ku(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Uu),ul=new Float32Array(3),ll={},cl=function(t){function e(e){void 0===e&&(e=null);var r=t.call(this)||this;return r._geometry=e||new al,r._geometry.refCount++,r.shader=null,r.state=Ro.for2d(),r._fillStyle=new Uu,r._lineStyle=new hl,r._matrix=null,r._holeMode=!1,r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r.pluginName="batch",r._transformID=-1,r.tint=16777215,r.blendMode=Jr.NORMAL,r}return ku(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,r,i,n){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=.5),void 0===n&&(n=!1),"number"==typeof t&&(t={width:t,color:e,alpha:r,alignment:i,native:n}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:ws.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Du.BUTT,join:Cu.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new vn,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new vn,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,i=r[r.length-2],n=r[r.length-1];return i===t&&n===e||r.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,r,i){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),Qu.curveTo(t,e,r,i,n),this},e.prototype.bezierCurveTo=function(t,e,r,i,n,s){return this._initCurve(),Ju.curveTo(t,e,r,i,n,s,this.currentPath.points),this},e.prototype.arcTo=function(t,e,r,i,n){this._initCurve(t,e);var s=this.currentPath.points,o=Ku.curveTo(t,e,r,i,n,s);if(o){var a=o.cx,h=o.cy,u=o.radius,l=o.startAngle,c=o.endAngle,d=o.anticlockwise;this.arc(a,h,u,l,c,d)}return this},e.prototype.arc=function(t,e,r,i,n,s){if(void 0===s&&(s=!1),i===n)return this;if(!s&&n<=i?n+=dn:s&&i<=n&&(i+=dn),0===n-i)return this;var o=t+Math.cos(i)*r,a=e+Math.sin(i)*r,h=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var l=Math.abs(u[u.length-2]-o),c=Math.abs(u[u.length-1]-a);l<h&&c<h||u.push(o,a)}else this.moveTo(o,a),u=this.currentPath.points;return Ku.arc(o,a,t,e,r,i,n,s,u),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:ws.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:ws.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,r,i){return this.drawShape(new mn(t,e,r,i))},e.prototype.drawRoundedRect=function(t,e,r,i,n){return this.drawShape(new yn(t,e,r,i,n))},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new _n(t,e,r))},e.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new gn(t,e,r,i))},e.prototype.drawPolygon=function(){for(var t,e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var n=!0,s=r[0];s.points?(n=s.closeStroke,t=s.points):t=Array.isArray(r[0])?r[0]:r;var o=new vn(t);return o.closeStroke=n,this.drawShape(o),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===ln.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,r=t.context.supports.uint32Indices;e.updateBatches(r),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(var i=0;i<r;i++){var n=t.batches[i],s=n.style.color,o=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),h={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:a,_batchRGB:Li(s),_tintRGB:s,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[i]=h}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,r=this.batches.length;e<r;e++){var i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),r=this._geometry,i=this.tint,n=this.worldAlpha,s=e.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*n,s.tint[1]=(i>>8&255)/255*n,s.tint[2]=(255&i)/255*n,s.tint[3]=n,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(var a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,r.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var r=e.texArray,i=e.type,n=e.size,s=e.start,o=r.count,a=0;a<o;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(i,n,s)},e.prototype._resolveDirectShader=function(t){var e=this.shader,r=this.pluginName;if(!e){if(!ll[r]){for(var i=t.plugins.batch.MAX_TEXTURES,n=new Int32Array(i),s=0;s<i;s++)n[s]=s;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Tn,default:ks.from({uSamplers:n},!0)},a=t.plugins[r]._shader.program;ll[r]=new Oo(a,o)}e=ll[r]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,r=e.minX,i=e.minY,n=e.maxX,s=e.maxY;this._bounds.addFrame(this.transform,r,i,n,s)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Li(this.tint,ul),e=0;e<this.batches.length;e++){var r=this.batches[e],i=r._batchRGB,n=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);r._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,h=this._geometry.points,u=this.vertexData,l=0,c=0;c<h.length;c+=2){var d=h[c],p=h[c+1];u[l++]=r*d+n*p+o,u[l++]=s*p+i*d+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new bn,e}(Un),dl={buildPoly:Xu,buildCircle:$u,buildRectangle:ju,buildRoundedRectangle:Yu,buildLine:Wu,ArcUtils:Ku,BezierUtils:Ju,QuadraticUtils:Qu,BatchPart:tl,FILL_COMMANDS:el,BATCH_POOL:rl,DRAW_CALL_POOL:il},pl=function(t,e){return(pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var fl,ml=new bn,_l=new Uint16Array([0,1,2,0,2,3]),gl=function(t){function e(e){var r=t.call(this)||this;return r._anchor=new xn(r._onAnchorUpdate,r,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=Jr.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=e||ws.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=_l,r.pluginName="batch",r.isSprite=!0,r._roundPixels=ee.ROUND_PIXELS,r}return function(t,e){function r(){this.constructor=t}pl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Wi(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Wi(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,d=0,p=0,f=0,m=0;if(u?(d=(p=u.x-c._x*l.width)+u.width,f=(m=u.y-c._y*l.height)+u.height):(d=(p=-c._x*l.width)+l.width,f=(m=-c._y*l.height)+l.height),h[0]=r*p+n*m+o,h[1]=s*m+i*p+a,h[2]=r*d+n*m+o,h[3]=s*m+i*d+a,h[4]=r*d+n*f+o,h[5]=s*f+i*d+a,h[6]=r*p+n*f+o,h[7]=s*f+i*p+a,this._roundPixels)for(var _=ee.RESOLUTION,g=0;g<h.length;++g)h[g]=Math.round((h[g]*_|0)/_)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,c=-i._x*r.width,d=c+r.width,p=-i._y*r.height,f=p+r.height;e[0]=s*c+a*p+u,e[1]=h*p+o*c+l,e[2]=s*d+a*p+u,e[3]=h*p+o*d+l,e[4]=s*d+a*f+u,e[5]=h*f+o*d+l,e[6]=s*c+a*f+u,e[7]=h*f+o*c+l},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new mn),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ml);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,n=0;return ml.x>=i&&ml.x<i+e&&(n=-r*this.anchor.y,ml.y>=n&&ml.y<n+r)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var r="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null},e.from=function(t,r){return new e(t instanceof ws?t:ws.from(t,r))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Wi(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Wi(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ws.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Un),vl=function(t,e){return(vl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(fl||(fl={}));var yl={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:fl.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},bl=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],xl=function(){function t(t){this.styleID=0,this.reset(),wl(this,t,t)}return t.prototype.clone=function(){var e={};return wl(e,this,yl),new t(e)},t.prototype.reset=function(){wl(this,yl,yl)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=El(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=El(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=El(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var i=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&bl.indexOf(i)<0&&(i='"'+i+'"'),e[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Tl(t){return"number"==typeof t?Ni(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function El(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Tl(t[e]);return t}return Tl(t)}function wl(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}var Al=function(){function t(t,e,r,i,n,s,o,a,h){this.text=t,this.style=e,this.width=r,this.height=i,this.lines=n,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}return t.measureText=function(e,r,i,n){void 0===n&&(n=t._canvas),i=null==i?r.wordWrap:i;var s=r.toFontString(),o=t.measureFont(s);0===o.fontSize&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);var a=n.getContext("2d");a.font=s;for(var h=(i?t.wordWrap(e,r,n):e).split(/(?:\r\n|\r|\n)/),u=new Array(h.length),l=0,c=0;c<h.length;c++){var d=a.measureText(h[c]).width+(h[c].length-1)*r.letterSpacing;u[c]=d,l=Math.max(l,d)}var p=l+r.strokeThickness;r.dropShadow&&(p+=r.dropShadowDistance);var f=r.lineHeight||o.fontSize+r.strokeThickness,m=Math.max(f,o.fontSize+r.strokeThickness)+(h.length-1)*(f+r.leading);return r.dropShadow&&(m+=r.dropShadowDistance),new t(e,r,p,m,h,u,f+r.leading,l,o)},t.wordWrap=function(e,r,i){void 0===i&&(i=t._canvas);for(var n=i.getContext("2d"),s=0,o="",a="",h=Object.create(null),u=r.letterSpacing,l=r.whiteSpace,c=t.collapseSpaces(l),d=t.collapseNewlines(l),p=!c,f=r.wordWrapWidth+u,m=t.tokenize(e),_=0;_<m.length;_++){var g=m[_];if(t.isNewline(g)){if(!d){a+=t.addLine(o),p=!c,o="",s=0;continue}g=" "}if(c){var v=t.isBreakingSpace(g),y=t.isBreakingSpace(o[o.length-1]);if(v&&y)continue}var b=t.getFromCache(g,u,h,n);if(b>f)if(""!==o&&(a+=t.addLine(o),o="",s=0),t.canBreakWords(g,r.breakWords))for(var x=t.wordWrapSplit(g),T=0;T<x.length;T++){for(var E=x[T],w=1;x[T+w];){var A=x[T+w],S=E[E.length-1];if(t.canBreakChars(S,A,g,T,r.breakWords))break;E+=A,w++}T+=E.length-1;var O=t.getFromCache(E,u,h,n);O+s>f&&(a+=t.addLine(o),p=!1,o="",s=0),o+=E,s+=O}else{o.length>0&&(a+=t.addLine(o),o="",s=0);var R=_===m.length-1;a+=t.addLine(g,!R),p=!1,o="",s=0}else b+s>f&&(p=!1,a+=t.addLine(o),o="",s=0),(o.length>0||!t.isBreakingSpace(g)||p)&&(o+=g,s+=b)}return a+=t.addLine(o,!1)},t.addLine=function(e,r){return void 0===r&&(r=!0),e=t.trimRight(e),e=r?e+"\n":e},t.getFromCache=function(t,e,r,i){var n=r[t];if("number"!=typeof n){var s=t.length*e;n=i.measureText(t).width+s,r[t]=n}return n},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var r=e.length-1;r>=0;r--){var i=e[r];if(!t.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,r){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],i="";if("string"!=typeof e)return r;for(var n=0;n<e.length;n++){var s=e[n],o=e[n+1];t.isBreakingSpace(s,o)||t.isNewline(s)?(""!==i&&(r.push(i),i=""),r.push(s)):i+=s}return""!==i&&r.push(i),r},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,r,i,n){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={ascent:0,descent:0,fontSize:0},i=t._canvas,n=t._context;n.font=e;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width),a=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),h=t.HEIGHT_MULTIPLIER*a;a=a*t.BASELINE_MULTIPLIER|0,i.width=o,i.height=h,n.fillStyle="#f00",n.fillRect(0,0,o,h),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);var u=n.getImageData(0,0,o,h).data,l=u.length,c=4*o,d=0,p=0,f=!1;for(d=0;d<a;++d){for(var m=0;m<c;m+=4)if(255!==u[p+m]){f=!0;break}if(f)break;p+=c}for(r.ascent=a-d,p=l-c,f=!1,d=h;d>a;--d){for(m=0;m<c;m+=4)if(255!==u[p+m]){f=!0;break}if(f)break;p-=c}return r.descent=d-a,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),Sl=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Sl.width=Sl.height=10,Al._canvas=Sl,Al._context=Sl.getContext("2d"),Al._fonts={},Al.METRICS_STRING="|q",Al.BASELINE_SYMBOL="M",Al.BASELINE_MULTIPLIER=1.4,Al.HEIGHT_MULTIPLIER=2,Al._newlines=[10,13],Al._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Ol={texture:!0,children:!1,baseTexture:!0},Rl=function(t){function e(e,r,i){var n=this,s=!1;i||(i=document.createElement("canvas"),s=!0),i.width=3,i.height=3;var o=ws.from(i);return o.orig=new mn,o.trim=new mn,(n=t.call(this,o)||this)._ownCanvas=s,n.canvas=i,n.context=n.canvas.getContext("2d"),n._resolution=ee.RESOLUTION,n._autoResolution=!0,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=e,n.style=r,n.localStyleID=-1,n}return function(t,e){function r(){this.constructor=t}vl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,i,n=this.context,s=Al.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=s.width,a=s.height,h=s.lines,u=s.lineHeight,l=s.lineWidths,c=s.maxLineWidth,d=s.fontProperties;this.canvas.width=Math.ceil((Math.max(1,o)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,f=0;f<p;++f){var m=e.dropShadow&&0===f,_=m?Math.ceil(Math.max(1,a)+2*e.padding):0,g=_*this._resolution;if(m){n.fillStyle="black",n.strokeStyle="black";var v=e.dropShadowColor,y=Li("number"==typeof v?v:Fi(v));n.shadowColor="rgba("+255*y[0]+","+255*y[1]+","+255*y[2]+","+e.dropShadowAlpha+")",n.shadowBlur=e.dropShadowBlur,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+g}else n.fillStyle=this._generateFillStyle(e,h,s),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var b=0;b<h.length;b++)r=e.strokeThickness/2,i=e.strokeThickness/2+b*u+d.ascent,"right"===e.align?r+=c-l[b]:"center"===e.align&&(r+=(c-l[b])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(h[b],r+e.padding,i+e.padding-_,!0),e.fill&&this.drawLetterSpacing(h[b],r+e.padding,i+e.padding-_)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,r,i){void 0===i&&(i=!1);var n=this._style.letterSpacing;if(0!==n)for(var s=e,o=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,h=0,u=0;u<o.length;++u){var l=o[u];i?this.context.strokeText(l,s,r):this.context.fillText(l,s,r),s+=a-(h=this.context.measureText(t.substring(u+1)).width)+n,a=h}else i?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=sn(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,i=this._style,n=i.trim?0:i.padding,s=r.baseTexture;r.trim.width=r._frame.width=Math.ceil(t.width/this._resolution),r.trim.height=r._frame.height=Math.ceil(t.height/this._resolution),r.trim.x=-n,r.trim.y=-n,r.orig.width=r._frame.width-2*n,r.orig.height=r._frame.height-2*n,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,r){var i,n=t.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];var s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=Math.ceil(this.canvas.width/this._resolution)-s-2*o,h=Math.ceil(this.canvas.height/this._resolution)-s-2*o,u=n.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,d=1;d<c;++d)l.push(d/c);if(u.unshift(n[0]),l.unshift(0),u.push(n[n.length-1]),l.push(1),t.fillGradientType===fl.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,h+o);var p=(r.fontProperties.fontSize+t.strokeThickness)/h;for(d=0;d<e.length;d++)for(var f=r.lineHeight*d,m=0;m<u.length;m++){var _=0;_="number"==typeof l[m]?l[m]:m/u.length;var g=Math.min(1,Math.max(0,f/h+_*p));g=Number(g.toFixed(5)),i.addColorStop(g,u[m])}}else{i=this.context.createLinearGradient(o,h/2,a+o,h/2);var v=u.length+1,y=1;for(d=0;d<u.length;d++){var b=void 0;b="number"==typeof l[d]?l[d]:y/v,i.addColorStop(b,u[d]),y++}}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Ol,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Wi(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Wi(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof xl?t:new xl(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e}(gl);
/*!
     * @pixi/prepare - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/prepare is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
ee.UPLOADS_PER_FRAME=4;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var Pl=function(t,e){return(Pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Il=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function Ml(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof ws){var n=t._textures[i].baseTexture;-1===e.indexOf(n)&&(e.push(n),r=!0)}return r}function Cl(t,e){if(t.baseTexture instanceof as){var r=t.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Dl(t,e){if(t._texture&&t._texture instanceof ws){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Ll(t,e){return e instanceof Rl&&(e.updateText(!0),!0)}function Nl(t,e){if(e instanceof xl){var r=e.toFontString();return Al.measureFont(r),!0}return!1}function Fl(t,e){if(t instanceof Rl){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Bl(t,e){return t instanceof xl&&(-1===e.indexOf(t)&&e.push(t),!0)}var Ul=function(){function t(t){var e=this;this.limiter=new Il(ee.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Fl),this.registerFindHook(Bl),this.registerFindHook(Ml),this.registerFindHook(Cl),this.registerFindHook(Dl),this.registerUploadHook(Ll),this.registerUploadHook(Nl)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,jn.system.addOnce(this.tick,this,kn.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)jn.system.addOnce(this.tick,this,kn.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(r=0,i=n.length;r<i;r++)n[r]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Un)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&jn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Gl(t,e){return e instanceof as&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function kl(t,e){if(!(e instanceof cl))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var i=r.batches,n=0;n<i.length;n++){var s=i[n].style.texture;s&&Gl(t,s.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function Xl(t,e){return t instanceof cl&&(e.push(t),!0)}var $l=function(t){function e(e){var r=t.call(this,e)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(Xl),r.registerUploadHook(Gl),r.registerUploadHook(kl),r}return function(t,e){function r(){this.constructor=t}Pl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(Ul),jl=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),Hl=function(){function t(t,e,r){void 0===r&&(r=null),this._texture=t instanceof ws?t:null,this.baseTexture=t instanceof as?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,r=un(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&this.baseTexture.setResolution(r),r},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var r=e,i=t.BATCH_SIZE;r-e<i&&r<this._frameKeys.length;){var n=this._frameKeys[r],s=this._frames[n],o=s.frame;if(o){var a=null,h=null,u=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,l=new mn(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a=s.rotated?new mn(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new mn(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(h=new mn(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new ws(this.baseTexture,a,l,h,s.rotated?2:0,s.anchor),ws.addToCache(this.textures[n],n)}r++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=0;r<t[e].length;r++){var i=t[e][r];this.animations[e].push(this.textures[i])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var r in void 0===t&&(t=!1),this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),zl=function(){function t(){}return t.use=function(e,r){var i,n,s=this,o=e.name+"_image";if(e.data&&e.type===Ya.TYPE.JSON&&e.data.frames&&!s.resources[o]){var a=null===(n=null===(i=e.data)||void 0===i?void 0:i.meta)||void 0===n?void 0:n.related_multi_packs;if(Array.isArray(a))for(var h=function(t){if("string"!=typeof t)return"continue";var r=t.replace(".json",""),i=Ri.resolve(e.url.replace(s.baseUrl,""),t);if(s.resources[r]||Object.values(s.resources).some((function(t){return Ri.format(Ri.parse(t.url))===i})))return"continue";var n={crossOrigin:e.crossOrigin,loadType:Ya.LOAD_TYPE.XHR,xhrType:Ya.XHR_RESPONSE_TYPE.JSON,parentResource:e};s.add(r,i,n)},u=0,l=a;u<l.length;u++){h(l[u])}var c={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,s.baseUrl);s.add(o,d,c,(function(t){if(t.error)r(t.error);else{var i=new Hl(t.texture,e.data,e.url);i.parse((function(){e.spritesheet=i,e.textures=i.textures,r()}))}}))}else r()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:Ri.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),Yl=function(t,e){return(Yl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function ql(t,e){function r(){this.constructor=t}Yl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Vl=new bn,Wl=function(t){function e(e,r,i){void 0===r&&(r=100),void 0===i&&(i=100);var n=t.call(this,e)||this;return n.tileTransform=new Mn,n._width=r,n._height=i,n.uvMatrix=n.texture.uvMatrix||new Mo(e),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return ql(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,i)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new mn),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Vl);var e=this._width,r=this._height,i=-e*this.anchor._x;if(Vl.x>=i&&Vl.x<i+e){var n=-r*this.anchor._y;if(Vl.y>=n&&Vl.y<n+r)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,r){return new e(ws.from(t,r),r.width,r.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(gl),Zl="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Kl=new Tn,Jl=function(t){function e(e){var r=t.call(this,e)||this,i={globals:r.renderer.globalUniforms};return r.shader=Oo.from(Zl,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",i),r.simpleShader=Oo.from(Zl,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",i),r.quad=new Us,r.state=Ro.for2d(),r}return ql(e,t),e.prototype.render=function(t){var e=this.renderer,r=this.quad,i=r.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y);var n=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;(i=r.uvs)[0]=i[6]=-n,i[1]=i[3]=-s,i[2]=i[4]=1-n,i[5]=i[7]=1-s,r.invalidate();var o=t._texture,a=o.baseTexture,h=t.tileTransform.localTransform,u=t.uvMatrix,l=a.isPowerOfTwo&&o.frame.width===a.width&&o.frame.height===a.height;l&&(a._glTextures[e.CONTEXT_UID]?l=a.wrapMode!==ni.CLAMP:a.wrapMode===ni.CLAMP&&(a.wrapMode=ni.REPEAT));var c=l?this.simpleShader:this.shader,d=o.width,p=o.height,f=t._width,m=t._height;Kl.set(h.a*d/f,h.b*d/m,h.c*p/f,h.d*p/m,h.tx/f,h.ty/m),Kl.invert(),l?Kl.prepend(u.mapCoord):(c.uniforms.uMapCoord=u.mapCoord.toArray(!0),c.uniforms.uClampFrame=u.uClampFrame,c.uniforms.uClampOffset=u.uClampOffset),c.uniforms.uTransform=Kl.toArray(!0),c.uniforms.uColor=Xi(t.tint,t.worldAlpha,c.uniforms.uColor,a.alphaMode),c.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),c.uniforms.uSampler=o,e.shader.bind(c),e.geometry.bind(r),this.state.blendMode=Ui(t.blendMode,a.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(zs),Ql=function(t,e){return(Ql=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function tc(t,e){function r(){this.constructor=t}Ql(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ec=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),rc=new bn,ic=new vn,nc=function(t){function e(e,r,i,n){void 0===n&&(n=Qr.TRIANGLES);var s=t.call(this)||this;return s.geometry=e,e.refCount++,s.shader=r,s.state=i||Ro.for2d(),s.drawMode=n,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=0,s._transformID=-1,s._roundPixels=ee.ROUND_PIXELS,s.batchUvs=null,s}return tc(e,t),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Qr.TRIANGLES&&r.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,i=r.a,n=r.b,s=r.c,o=r.d,a=r.tx,h=r.ty,u=this.vertexData,l=0;l<u.length/2;l++){var c=e[2*l],d=e[2*l+1];u[2*l]=i*c+s*d+a,u[2*l+1]=n*c+o*d+h}if(this._roundPixels){var p=ee.RESOLUTION;for(l=0;l<u.length;++l)u[l]=Math.round((u[l]*p|0)/p)}this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new ec(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,rc);for(var e=this.geometry.getBuffer("aVertexPosition").data,r=ic.points,i=this.geometry.getIndex().data,n=i.length,s=4===this.drawMode?3:1,o=0;o+2<n;o+=s){var a=2*i[o],h=2*i[o+1],u=2*i[o+2];if(r[0]=e[a],r[1]=e[a+1],r[2]=e[h],r[3]=e[h+1],r[4]=e[u],r[5]=e[u+1],ic.contains(rc.x,rc.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(Un),sc=function(t){function e(e,r){var i=this,n={uSampler:e,alpha:1,uTextureMatrix:Tn.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(n,r.uniforms),(i=t.call(this,r.program||So.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),n)||this)._colorDirty=!1,i.uvMatrix=new Mo(e),i.batchable=void 0===r.program,i.pluginName=r.pluginName,i.tint=r.tint,i.alpha=r.alpha,i}return tc(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Xi(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Oo),oc=function(t){function e(e,r,i){var n=t.call(this)||this,s=new Is(e),o=new Is(r,!0),a=new Is(i,!0,!0);return n.addAttribute("aVertexPosition",s,2,!1,ri.FLOAT).addAttribute("aTextureCoord",o,2,!1,ri.FLOAT).addIndex(a),n._updateId=-1,n}return tc(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Fs),ac=function(t,e){return(ac=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var hc=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},uc=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var i in e){var n=e[i].match(/^[a-z]+/gm)[0],s=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var a in s){var h=s[a].split("="),u=h[0],l=h[1].replace(/"/gm,""),c=parseFloat(l),d=isNaN(c)?l:c;o[u]=d}r[n].push(o)}var p=new hc;return r.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),r.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),r.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),r.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),r.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),p},t}(),lc=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new hc,r=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),a=0;a<r.length;a++)e.info.push({face:r[a].getAttribute("face"),size:parseInt(r[a].getAttribute("size"),10)});for(a=0;a<i.length;a++)e.common.push({lineHeight:parseInt(i[a].getAttribute("lineHeight"),10)});for(a=0;a<n.length;a++)e.page.push({id:parseInt(n[a].getAttribute("id"),10)||0,file:n[a].getAttribute("file")});for(a=0;a<s.length;a++){var h=s[a];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(a=0;a<o.length;a++)e.kerning.push({first:parseInt(o[a].getAttribute("first"),10),second:parseInt(o[a].getAttribute("second"),10),amount:parseInt(o[a].getAttribute("amount"),10)});return e},t}(),cc=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new self.DOMParser).parseFromString(t,"text/xml");return lc.test(e)}return!1},t.parse=function(t){var e=(new self.DOMParser).parseFromString(t,"text/xml");return lc.parse(e)},t}(),dc=[uc,lc,cc];function pc(t){for(var e=0;e<dc.length;e++)if(dc[e].test(t))return dc[e];return null}function fc(t,e,r,i,n,s){var o,a=r.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var h=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,l=Math.ceil(t.width/i)-h-2*u,c=Math.ceil(t.height/i)-h-2*u,d=a.slice(),p=r.fillGradientStops.slice();if(!p.length)for(var f=d.length+1,m=1;m<f;++m)p.push(m/f);if(d.unshift(a[0]),p.unshift(0),d.push(a[a.length-1]),p.push(1),r.fillGradientType===fl.LINEAR_VERTICAL){o=e.createLinearGradient(l/2,u,l/2,c+u);var _=0,g=(s.fontProperties.fontSize+r.strokeThickness)/c;for(m=0;m<n.length;m++)for(var v=s.lineHeight*m,y=0;y<d.length;y++){var b=v/c+("number"==typeof p[y]?p[y]:y/d.length)*g,x=Math.max(_,b);x=Math.min(x,1),o.addColorStop(x,d[y]),_=x}}else{o=e.createLinearGradient(u,c/2,l+u,c/2);var T=d.length+1,E=1;for(m=0;m<d.length;m++){var w=void 0;w="number"==typeof p[m]?p[m]:E/T,o.addColorStop(w,d[m]),E++}}return o}function mc(t,e,r,i,n,s,o){var a=r.text,h=r.fontProperties;e.translate(i,n),e.scale(s,s);var u=o.strokeThickness/2,l=-o.strokeThickness/2;e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=fc(t,e,o,s,[a],r),e.strokeStyle=o.stroke,e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=fc(t,e,o,s,[a],r),e.strokeStyle=o.stroke;var c=o.dropShadowColor,d=Li("number"==typeof c?c:Fi(c));o.dropShadow?(e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+o.dropShadowAlpha+")",e.shadowBlur=o.dropShadowBlur,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*o.dropShadowDistance,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*o.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),o.stroke&&o.strokeThickness&&e.strokeText(a,u,l+r.lineHeight-h.descent),o.fill&&e.fillText(a,u,l+r.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}var _c=function(){function t(t,e,r){var i=t.info[0],n=t.common[0],s=un(t.page[0].file),o={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=n.lineHeight/s,this.chars={},this.pageTextures=o;for(var a=0;a<t.page.length;a++){var h=t.page[a],u=h.id,l=h.file;o[u]=e instanceof Array?e[a]:e[l]}for(a=0;a<t.char.length;a++){var c=t.char[a],d=(u=c.id,c.page),p=t.char[a],f=p.x,m=p.y,_=p.width,g=p.height,v=p.xoffset,y=p.yoffset,b=p.xadvance;m/=s,_/=s,g/=s,v/=s,y/=s,b/=s;var x=new mn((f/=s)+o[d].frame.x/s,m+o[d].frame.y/s,_,g);this.chars[u]={xOffset:v,yOffset:y,xAdvance:b,kerning:{},texture:new ws(o[d].baseTexture,x),page:d}}for(a=0;a<t.kerning.length;a++){var T=t.kerning[a],E=T.first,w=T.second,A=T.amount;E/=s,w/=s,A/=s,this.chars[w]&&(this.chars[w].kerning[E]=A)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,r,i){var n;if(e instanceof hc)n=e;else{var s=pc(e);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(e)}r instanceof ws&&(r=[r]);var o=new t(n,r,i);return t.available[o.font]=o,o},t.uninstall=function(e){var r=t.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete t.available[e]},t.from=function(e,r,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},t.defaultOptions,i),s=n.chars,o=n.padding,a=n.resolution,h=n.textureWidth,u=n.textureHeight,l=function(t){"string"==typeof t&&(t=[t]);for(var e=[],r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,h=o;a<=h;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,n.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(s),c=r instanceof xl?r:new xl(r),d=h,p=new hc;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};for(var f,m,_,g=0,v=0,y=0,b=[],x=0;x<l.length;x++){f||((f=document.createElement("canvas")).width=h,f.height=u,m=f.getContext("2d"),_=new as(f,{resolution:a}),b.push(new ws(_)),p.page.push({id:b.length-1,file:""}));var T=Al.measureText(l[x],c,!1,f),E=T.width,w=Math.ceil(T.height),A=Math.ceil(("italic"===c.fontStyle?2:1)*E);if(v>=u-w*a){if(0===v)throw new Error("[BitmapFont] textureHeight "+u+"px is too small for "+c.fontSize+"px fonts");--x,f=null,m=null,_=null,v=0,g=0,y=0}else if(y=Math.max(w+T.fontProperties.descent,y),A*a+g>=d)--x,v+=y*a,v=Math.ceil(v),g=0,y=0;else{mc(f,m,T,g,v,a,c);var S=T.text.charCodeAt(0);p.char.push({id:S,page:b.length-1,x:g/a,y:v/a,width:A,height:w,xoffset:0,yoffset:0,xadvance:Math.ceil(E-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),g+=(A+2*o)*a,g=Math.ceil(g)}}x=0;for(var O=l.length;x<O;x++)for(var R=l[x],P=0;P<O;P++){var I=l[P],M=m.measureText(R).width,C=m.measureText(I).width,D=m.measureText(R+I).width-(M+C);D&&p.kerning.push({first:R.charCodeAt(0),second:I.charCodeAt(0),amount:D})}var L=new t(p,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=L,L},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),gc=[],vc=[],yc=function(t){function e(r,i){void 0===i&&(i={});var n=t.call(this)||this;n._tint=16777215;var s=Object.assign({},e.styleDefaults,i),o=s.align,a=s.tint,h=s.maxWidth,u=s.letterSpacing,l=s.fontName,c=s.fontSize;if(!_c.available[l])throw new Error('Missing BitmapFont "'+l+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=o,n._tint=a,n._fontName=l,n._fontSize=c||_c.available[l].size,n._text=r,n._maxWidth=h,n._maxLineHeight=0,n._letterSpacing=u,n._anchor=new xn((function(){n.dirty=!0}),n,0,0),n._roundPixels=ee.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}return function(t,e){function r(){this.constructor=t}ac(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.updateText=function(){for(var t,e=_c.available[this._fontName],r=this._fontSize/e.size,i=new bn,n=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",h=a.length,u=this._maxWidth*e.size/this._fontSize,l=null,c=0,d=0,p=0,f=-1,m=0,_=0,g=0,v=0,y=0;y<h;y++){var b=a.charCodeAt(y),x=a.charAt(y);if(/(?:\s)/.test(x)&&(f=y,m=c,v++),"\r"!==x&&"\n"!==x){var T=e.chars[b];if(T){l&&T.kerning[l]&&(i.x+=T.kerning[l]);var E=vc.pop()||{texture:ws.EMPTY,line:0,charCode:0,prevSpaces:0,position:new bn};E.texture=T.texture,E.line=p,E.charCode=b,E.position.x=i.x+T.xOffset+this._letterSpacing/2,E.position.y=i.y+T.yOffset,E.prevSpaces=v,n.push(E),i.x+=T.xAdvance+this._letterSpacing,c=i.x,g=Math.max(g,T.yOffset+T.texture.height),l=b,-1!==f&&u>0&&i.x>u&&(Vi(n,1+f-++_,1+y-f),y=f,f=-1,s.push(m),o.push(n.length>0?n[n.length-1].prevSpaces:0),d=Math.max(d,m),p++,i.x=0,i.y+=e.lineHeight,l=null,v=0)}}else s.push(c),o.push(-1),d=Math.max(d,c),++p,++_,i.x=0,i.y+=e.lineHeight,l=null,v=0}var w=a.charAt(a.length-1);"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(c=m),s.push(c),d=Math.max(d,c),o.push(-1));var A=[];for(y=0;y<=p;y++){var S=0;"right"===this._align?S=d-s[y]:"center"===this._align?S=(d-s[y])/2:"justify"===this._align&&(S=o[y]<0?0:(d-s[y])/o[y]),A.push(S)}var O=n.length,R={},P=[],I=this._activePagesMeshData;for(y=0;y<I.length;y++)gc.push(I[y]);for(y=0;y<O;y++){var M=(k=n[y].texture).baseTexture.uid;if(!R[M]){if(!(q=gc.pop())){var C=new oc,D=new sc(ws.EMPTY);q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new nc(C,D),vertices:null,uvs:null,indices:null}}q.index=0,q.indexCount=0,q.vertexCount=0,q.uvsCount=0,q.total=0;var L=this._textureCache;L[M]=L[M]||new ws(k.baseTexture),q.mesh.texture=L[M],q.mesh.tint=this._tint,P.push(q),R[M]=q}R[M].total++}for(y=0;y<I.length;y++)-1===P.indexOf(I[y])&&this.removeChild(I[y].mesh);for(y=0;y<P.length;y++)P[y].mesh.parent!==this&&this.addChild(P[y].mesh);for(var y in this._activePagesMeshData=P,R){var N=(q=R[y]).total;if(!((null===(t=q.indices)||void 0===t?void 0:t.length)>6*N)||q.vertices.length<2*nc.BATCHABLE_SIZE)q.vertices=new Float32Array(8*N),q.uvs=new Float32Array(8*N),q.indices=new Uint16Array(6*N);else for(var F=q.total,B=q.vertices,U=4*F*2;U<B.length;U++)B[U]=0;q.mesh.size=6*N}for(y=0;y<O;y++){var G=(x=n[y]).position.x+A[x.line]*("justify"===this._align?x.prevSpaces:1);this._roundPixels&&(G=Math.round(G));var k,X=G*r,$=x.position.y*r,j=R[(k=x.texture).baseTexture.uid],H=k.frame,z=k._uvs,Y=j.index++;j.indices[6*Y+0]=0+4*Y,j.indices[6*Y+1]=1+4*Y,j.indices[6*Y+2]=2+4*Y,j.indices[6*Y+3]=0+4*Y,j.indices[6*Y+4]=2+4*Y,j.indices[6*Y+5]=3+4*Y,j.vertices[8*Y+0]=X,j.vertices[8*Y+1]=$,j.vertices[8*Y+2]=X+H.width*r,j.vertices[8*Y+3]=$,j.vertices[8*Y+4]=X+H.width*r,j.vertices[8*Y+5]=$+H.height*r,j.vertices[8*Y+6]=X,j.vertices[8*Y+7]=$+H.height*r,j.uvs[8*Y+0]=z.x0,j.uvs[8*Y+1]=z.y0,j.uvs[8*Y+2]=z.x1,j.uvs[8*Y+3]=z.y1,j.uvs[8*Y+4]=z.x2,j.uvs[8*Y+5]=z.y2,j.uvs[8*Y+6]=z.x3,j.uvs[8*Y+7]=z.y3}for(var y in this._textWidth=d*r,this._textHeight=(i.y+e.lineHeight)*r,R){var q=R[y];if(0!==this.anchor.x||0!==this.anchor.y)for(var V=0,W=this._textWidth*this.anchor.x,Z=this._textHeight*this.anchor.y,K=0;K<q.total;K++)q.vertices[V++]-=W,q.vertices[V++]-=Z,q.vertices[V++]-=W,q.vertices[V++]-=Z,q.vertices[V++]-=W,q.vertices[V++]-=Z,q.vertices[V++]-=W,q.vertices[V++]-=Z;this._maxLineHeight=g*r;var J=q.mesh.geometry.getBuffer("aVertexPosition"),Q=q.mesh.geometry.getBuffer("aTextureCoord"),tt=q.mesh.geometry.getIndex();J.data=q.vertices,Q.data=q.uvs,tt.data=q.indices,J.update(),Q.update(),tt.update()}for(y=0;y<n.length;y++)vc.push(n[y])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!_c.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var r=this._textureCache;for(var i in r){r[i].destroy(),delete r[i]}this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(Un),bc=function(){function t(){}return t.add=function(){Ya.setExtensionXhrType("fnt",Ya.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){var i=pc(e.data);if(i)for(var n=t.getBaseUrl(this,e),s=i.parse(e.data),o={},a=function(t){o[t.metadata.pageFile]=t.texture,Object.keys(o).length===s.page.length&&(e.bitmapFont=_c.install(s,o,!0),r())},h=0;h<s.page.length;++h){var u=s.page[h].file,l=n+u,c=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===l){p.metadata.pageFile=u,p.texture?a(p):p.onAfterMiddleware.add(a),c=!0;break}}if(!c){var f={crossOrigin:e.crossOrigin,loadType:Ya.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},e.metadata.imageMetadata),parentResource:e};this.add(l,f,a)}}else r()},t.getBaseUrl=function(e,r){var i=r.isDataUrl?"":t.dirname(r.url);return r.isDataUrl&&("."===i&&(i=""),e.baseUrl&&i&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(i+="/")),(i=i.replace(e.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/"),i},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}(),xc=function(t,e){return(xc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Tc=function(t){function e(e){void 0===e&&(e=1);var r=t.call(this,ea,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return r.alpha=e,r}return function(t,e){function r(){this.constructor=t}xc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Po),Ec=function(t,e){return(Ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function wc(t,e){function r(){this.constructor=t}Ec(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Ac,Sc,Oc,Rc,Pc,Ic,Mc,Cc,Dc,Lc,Nc,Fc,Bc,Uc,Gc,kc,Xc,$c={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},jc=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Ac||(Ac={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Sc||(Sc={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Oc||(Oc={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Rc||(Rc={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Pc||(Pc={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Ic||(Ic={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Mc||(Mc={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Cc||(Cc={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Dc||(Dc={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Lc||(Lc={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Nc||(Nc={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(Fc||(Fc={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Bc||(Bc={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Uc||(Uc={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Gc||(Gc={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(kc||(kc={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Xc||(Xc={}));var Hc=function(t){function e(e,r,i,n,s){void 0===r&&(r=8),void 0===i&&(i=4),void 0===n&&(n=ee.FILTER_RESOLUTION),void 0===s&&(s=5);var o=this,a=function(t,e){var r,i=Math.ceil(t/2),n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";r=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var a=r.replace("%index%",o.toString());s+=a=a.replace("%sampleIndex%",o-(i-1)+".0"),s+="\n"}return n=(n=n.replace("%blur%",s)).replace("%size%",t.toString())}(s,e),h=function(t){for(var e,r=$c[t],i=r.length,n=jc,s="",o=0;o<t;o++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());e=o,o>=i&&(e=t-o-1),s+=a=a.replace("%value%",r[e].toString()),s+="\n"}return n=(n=n.replace("%blur%",s)).replace("%size%",t.toString())}(s);return(o=t.call(this,a,h)||this).horizontal=e,o.resolution=n,o._quality=0,o.quality=i,o.blur=r,o}return wc(e,t),e.prototype.apply=function(t,e,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{var n=t.getFilterTexture(),s=t.renderer,o=e,a=n;this.state.blend=!1,t.applyFilter(this,o,a,Bc.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(o,Bc.BLIT),this.uniforms.uSampler=a;var u=a;a=o,o=u,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,r,i),t.returnFilterTexture(n)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Po),zc=function(t){function e(e,r,i,n){void 0===e&&(e=8),void 0===r&&(r=4),void 0===i&&(i=ee.FILTER_RESOLUTION),void 0===n&&(n=5);var s=t.call(this)||this;return s.blurXFilter=new Hc(!0,e,r,i,n),s.blurYFilter=new Hc(!1,e,r,i,n),s.resolution=i,s.quality=r,s.blur=e,s.repeatEdgePixels=!1,s}return wc(e,t),e.prototype.apply=function(t,e,r,i){var n=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(n&&s){var o=t.getFilterTexture();this.blurXFilter.apply(t,e,o,Bc.CLEAR),this.blurYFilter.apply(t,o,r,i),t.returnFilterTexture(o)}else s?this.blurYFilter.apply(t,e,r,i):this.blurXFilter.apply(t,e,r,i)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(Po),Yc=function(t,e){return(Yc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var qc=function(t){function e(){var e=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,ra,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)||this).alpha=1,e}return function(t,e){function r(){this.constructor=t}Yc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),n=1/3,s=(0,Math.sqrt)(n),o=[r+(1-r)*n,n*(1-r)-s*i,n*(1-r)+s*i,0,0,n*(1-r)+s*i,r+n*(1-r),n*(1-r)-s*i,0,0,n*(1-r)-s*i,n*(1-r)+s*i,r+n*(1-r),0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,i=-.5*(r-1),n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var r=2*t/3+1,i=-.5*(r-1),n=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,r,i,n){var s=((r=r||16770432)>>16&255)/255,o=(r>>8&255)/255,a=(255&r)/255,h=((i=i||3375104)>>16&255)/255,u=(i>>8&255)/255,l=(255&i)/255,c=[.3,.59,.11,0,0,s,o,a,t=t||.2,0,h,u,l,e=e||.15,0,s-h,o-u,a-l,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Po);qc.prototype.grayscale=qc.prototype.greyscale;
/*!
     * @pixi/filter-displacement - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/filter-displacement is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var Vc=function(t,e){return(Vc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Wc=function(t){function e(e,r){var i=this,n=new Tn;return e.renderable=!1,(i=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,i.maskMatrix=n,null==r&&(r=20),i.scale=new bn(r,r),i}return function(t,e){function r(){this.constructor=t}Vc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.apply=function(t,e,r,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,s=Math.sqrt(n.a*n.a+n.b*n.b),o=Math.sqrt(n.c*n.c+n.d*n.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=n.a/s,this.uniforms.rotation[1]=n.b/s,this.uniforms.rotation[2]=n.c/o,this.uniforms.rotation[3]=n.d/o),t.applyFilter(this,e,r,i)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(Po),Zc=function(t,e){return(Zc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Kc=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function r(){this.constructor=t}Zc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(Po),Jc=function(t,e){return(Jc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Qc=function(t){function e(e,r){void 0===e&&(e=.5),void 0===r&&(r=Math.random());var i=t.call(this,ra,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return i.noise=e,i.seed=r,i}return function(t,e){function r(){this.constructor=t}Jc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(Po),td=new Tn;Nn.prototype._cacheAsBitmap=!1,Nn.prototype._cacheData=null,Nn.prototype._cacheAsBitmapResolution=null;var ed=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Nn.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new ed),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Nn.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Nn.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters){var i=this.filters[0].padding;r.pad(i)}r.ceil(ee.RESOLUTION);var n=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,h=Ss.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution}),u="cacheAsBitmap_"+Ki();this._cacheData.textureCacheId=u,as.addToCache(h.baseTexture,u),ws.addToCache(h,u);var l=this.transform.localTransform.copyTo(td).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:l,skipUpdateTransform:!1}),t.projection.transform=a,t.renderTexture.bind(n,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new gl(h);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-r.x/r.width,c.anchor.y=-r.y/r.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)}},Nn.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Nn.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var i=t.context,n=t._projTransform;e.ceil(ee.RESOLUTION);var s=Ss.create({width:e.width,height:e.height}),o="cacheAsBitmap_"+Ki();this._cacheData.textureCacheId=o,as.addToCache(s.baseTexture,o),ws.addToCache(s,o);var a=td;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:a,skipUpdateTransform:!1}),t.context=i,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new gl(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},Nn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Nn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Nn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,as.removeFromCache(this._cacheData.textureCacheId),ws.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Nn.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
     * @pixi/mixin-get-child-by-name - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/mixin-get-child-by-name is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
Nn.prototype.name=null,Un.prototype.getChildByName=function(t,e){for(var r=0,i=this.children.length;r<i;r++)if(this.children[r].name===t)return this.children[r];if(e)for(r=0,i=this.children.length;r<i;r++){if(this.children[r].getChildByName){var n=this.children[r].getChildByName(t,!0);if(n)return n}}return null},
/*!
     * @pixi/mixin-get-global-position - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/mixin-get-global-position is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
Nn.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new bn),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
/*!
     * @pixi/mesh-extras - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * @pixi/mesh-extras is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var rd=function(t,e){return(rd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function id(t,e){function r(){this.constructor=t}rd(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var nd=function(t){function e(e,r,i,n){void 0===e&&(e=100),void 0===r&&(r=100),void 0===i&&(i=10),void 0===n&&(n=10);var s=t.call(this)||this;return s.segWidth=i,s.segHeight=n,s.width=e,s.height=r,s.build(),s}return id(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],r=[],i=[],n=this.segWidth-1,s=this.segHeight-1,o=this.width/n,a=this.height/s,h=0;h<t;h++){var u=h%this.segWidth,l=h/this.segWidth|0;e.push(u*o,l*a),r.push(u/n,l/s)}var c=n*s;for(h=0;h<c;h++){var d=h%n,p=h/n|0,f=p*this.segWidth+d,m=p*this.segWidth+d+1,_=(p+1)*this.segWidth+d,g=(p+1)*this.segWidth+d+1;i.push(f,m,_,m,g,_)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(oc),sd=function(t){function e(e,r,i){void 0===e&&(e=200),void 0===i&&(i=0);var n=t.call(this,new Float32Array(4*r.length),new Float32Array(4*r.length),new Uint16Array(6*(r.length-1)))||this;return n.points=r,n._width=e,n.textureScale=i,n.build(),n}return id(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),r.data=new Float32Array(4*t.length),i.data=new Uint16Array(6*(t.length-1)));var n=r.data,s=i.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var o=0,a=t[0],h=this._width*this.textureScale,u=t.length,l=0;l<u;l++){var c=4*l;if(this.textureScale>0){var d=a.x-t[l].x,p=a.y-t[l].y,f=Math.sqrt(d*d+p*p);a=t[l],o+=f/h}else o=l/(u-1);n[c]=o,n[c+1]=0,n[c+2]=o,n[c+3]=1}var m=0;for(l=0;l<u-1;l++){c=2*l;s[m++]=c,s[m++]=c+1,s[m++]=c+2,s[m++]=c+2,s[m++]=c+1,s[m++]=c+3}r.update(),i.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,r=t[0],i=0,n=0,s=this.buffers[0].data,o=t.length,a=0;a<o;a++){var h=t[a],u=4*a;n=-((e=a<t.length-1?t[a+1]:h).x-r.x),i=e.y-r.y;var l=Math.sqrt(i*i+n*n),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;i/=l,n/=l,i*=c,n*=c,s[u]=h.x+i,s[u+1]=h.y+n,s[u+2]=h.x-i,s[u+3]=h.y-n,r=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(oc),od=function(t){function e(e,r,i){void 0===i&&(i=0);var n=this,s=new sd(e.height,r,i),o=new sc(e);return i>0&&(e.baseTexture.wrapMode=ni.REPEAT),(n=t.call(this,s,o)||this).autoUpdate=!0,n}return id(e,t),e.prototype._render=function(e){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),t.prototype._render.call(this,e)},e}(nc),ad=function(t){function e(e,r,i){var n=this,s=new nd(e.width,e.height,r,i),o=new sc(ws.WHITE);return(n=t.call(this,s,o)||this).texture=e,n}return id(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(nc),hd=function(t){function e(e,r,i,n,s){void 0===e&&(e=ws.EMPTY);var o=this,a=new oc(r,i,n);a.getBuffer("aVertexPosition").static=!1;var h=new sc(e);return(o=t.call(this,a,h,null,s)||this).autoUpdate=!0,o}return id(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(nc),ud=function(t){function e(e,r,i,n,s){void 0===r&&(r=10),void 0===i&&(i=10),void 0===n&&(n=10),void 0===s&&(s=10);var o=t.call(this,ws.WHITE,4,4)||this;return o._origWidth=e.orig.width,o._origHeight=e.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=r,o._rightWidth=n,o._topHeight=i,o._bottomHeight=s,o.texture=e,o}return id(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(e,i)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var r=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(ad),ld=function(t,e){return(ld=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var cd=function(t){function e(e,r){void 0===r&&(r=!0);var i=t.call(this,e[0]instanceof ws?e[0]:e[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=r,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=e,i}return function(t,e){function r(){this.constructor=t}ld(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(jn.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(jn.shared.add(this.update,this,kn.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var r=[],i=0;i<t.length;++i)r.push(ws.from(t[i]));return new e(r)},e.fromImages=function(t){for(var r=[],i=0;i<t.length;++i)r.push(ws.from(t[i]));return new e(r)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof ws)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(jn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(jn.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(gl);
/*!
     * pixi.js - v6.0.2
     * Compiled Mon, 05 Apr 2021 18:17:46 UTC
     *
     * pixi.js is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */Qo.registerPlugin("accessibility",Xn),Qo.registerPlugin("extract",xa),Qo.registerPlugin("interaction",Jn),Qo.registerPlugin("particle",Fu),Qo.registerPlugin("prepare",$l),Qo.registerPlugin("batch",da),Qo.registerPlugin("tilingSprite",Jl),$a.registerPlugin(bc),$a.registerPlugin(Wh),$a.registerPlugin(pu),$a.registerPlugin(Pu),$a.registerPlugin(zl),va.registerPlugin(Hn),va.registerPlugin(za);var dd={AlphaFilter:Tc,BlurFilter:zc,BlurFilterPass:Hc,ColorMatrixFilter:qc,DisplacementFilter:Wc,FXAAFilter:Kc,NoiseFilter:Qc},pd=Object.freeze({__proto__:null,utils:cn,VERSION:"6.0.2",filters:dd,AccessibilityManager:Xn,accessibleTarget:Gn,InteractionData:zn,InteractionEvent:qn,InteractionManager:Jn,InteractionTrackingData:Vn,interactiveTarget:Zn,Application:va,AbstractBatchRenderer:oa,AbstractMultiResource:hs,AbstractRenderer:Jo,ArrayResource:us,Attribute:Rs,BaseImageResource:ls,BaseRenderTexture:xs,BaseTexture:as,BatchDrawCall:ia,BatchGeometry:ha,BatchPluginFactory:ca,BatchRenderer:da,BatchShaderGenerator:aa,BatchSystem:Ys,BatchTextureArray:na,Buffer:Is,BufferResource:ss,CanvasResource:cs,ContextSystem:Vs,CubeResource:ds,Filter:Po,FilterState:Xs,FilterSystem:Hs,Framebuffer:bs,FramebufferSystem:Ks,GLFramebuffer:Ws,GLProgram:$o,GLTexture:Vo,Geometry:Fs,GeometrySystem:to,IGLUniformData:Xo,INSTALLED:ts,ImageBitmapResource:_s,ImageResource:ps,MaskData:eo,MaskSystem:Do,ObjectRenderer:zs,Program:So,ProjectionSystem:Bo,Quad:Bs,QuadUv:Us,RenderTexture:Ss,RenderTexturePool:Os,RenderTextureSystem:ko,Renderer:Qo,Resource:ns,SVGResource:fs,ScissorSystem:No,Shader:Oo,ShaderSystem:zo,SpriteMaskFilter:Co,State:Ro,StateSystem:Yo,StencilSystem:Fo,System:vs,Texture:ws,TextureGCSystem:qo,TextureMatrix:Mo,TextureSystem:Wo,TextureUvs:Ts,UniformGroup:ks,VideoResource:ms,ViewableBuffer:sa,autoDetectRenderer:ta,autoDetectResource:es,checkMaxIfStatementsInShader:Eo,defaultFilterVertex:ra,defaultVertex:ea,resources:pa,systems:_a,uniformParsers:go,Extract:xa,AppLoaderPlugin:za,Loader:$a,LoaderResource:Ya,TextureLoader:Xa,BlobResource:Ka,CompressedTextureLoader:Wh,CompressedTextureResource:Ja,DDSLoader:pu,FORMATS_TO_COMPONENTS:Ou,get INTERNAL_FORMATS(){return Ha},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:qa,KTXLoader:Pu,TYPES_TO_BYTES_PER_COMPONENT:Su,TYPES_TO_BYTES_PER_PIXEL:Ru,ParticleContainer:Lu,ParticleRenderer:Fu,BasePrepare:Ul,CountLimiter:Il,Prepare:$l,TimeLimiter:jl,Spritesheet:Hl,SpritesheetLoader:zl,TilingSprite:Wl,TilingSpriteRenderer:Jl,BitmapFont:_c,BitmapFontData:hc,BitmapFontLoader:bc,BitmapText:yc,Ticker:jn,TickerPlugin:Hn,get UPDATE_PRIORITY(){return kn},get ALPHA_MODES(){return oi},get BLEND_MODES(){return Jr},get BUFFER_BITS(){return Kr},get CLEAR_MODES(){return ai},get DRAW_MODES(){return Qr},get ENV(){return Wr},get FORMATS(){return ti},get GC_MODES(){return hi},get MASK_TYPES(){return li},get MIPMAP_MODES(){return si},get MSAA_QUALITY(){return ci},get PRECISION(){return ui},get RENDERER_TYPE(){return Zr},get SCALE_MODES(){return ii},get TARGETS(){return ei},get TYPES(){return ri},get WRAP_MODES(){return ni},Bounds:Cn,Container:Un,DisplayObject:Nn,TemporaryDisplayObject:Fn,FillStyle:Uu,GRAPHICS_CURVES:Bu,Graphics:cl,GraphicsData:nl,GraphicsGeometry:al,get LINE_CAP(){return Du},get LINE_JOIN(){return Cu},LineStyle:hl,graphicsUtils:dl,Circle:_n,DEG_TO_RAD:fn,Ellipse:gn,Matrix:Tn,ObservablePoint:xn,PI_2:dn,Point:bn,Polygon:vn,RAD_TO_DEG:pn,Rectangle:mn,RoundedRectangle:yn,get SHAPES(){return ln},Transform:Mn,groupD8:In,Mesh:nc,MeshBatchUvs:ec,MeshGeometry:oc,MeshMaterial:sc,NineSlicePlane:ud,PlaneGeometry:nd,RopeGeometry:sd,SimpleMesh:hd,SimplePlane:ad,SimpleRope:od,Runner:Qn,Sprite:gl,AnimatedSprite:cd,get TEXT_GRADIENT(){return fl},Text:Rl,TextMetrics:Al,TextStyle:xl,isMobile:te,settings:ee});function fd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function md(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
     * GSAP 3.6.1
     * https://greensock.com
     *
     * @license Copyright 2008-2021, GreenSock. All rights reserved.
     * Subject to the terms at https://greensock.com/standard-license or for
     * Club GreenSock members, the agreement issued with that membership.
     * @author: Jack Doyle, jack@greensock.com
    */var _d,gd,vd,yd,bd,xd,Td,Ed,wd,Ad,Sd,Od,Rd,Pd,Id,Md,Cd,Dd,Ld,Nd,Fd,Bd,Ud,Gd,kd,Xd,$d,jd,Hd={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},zd={duration:.5,overwrite:!1,delay:0},Yd=2*Math.PI,qd=Yd/4,Vd=0,Wd=Math.sqrt,Zd=Math.cos,Kd=Math.sin,Jd=function(t){return"string"==typeof t},Qd=function(t){return"function"==typeof t},tp=function(t){return"number"==typeof t},ep=function(t){return void 0===t},rp=function(t){return"object"==typeof t},ip=function(t){return!1!==t},np=function(){return"undefined"!=typeof window},sp=function(t){return Qd(t)||Jd(t)},op="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ap=Array.isArray,hp=/(?:-?\.?\d|\.)+/gi,up=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,lp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,cp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,dp=/[+-]=-?[.\d]+/,pp=/[#\-+.]*\b[a-z\d-=+%.]+/gi,fp=/[\d.+\-=]+(?:e[-+]\d*)*/i,mp={},_p={},gp=function(t){return(_p=jp(t,mp))&&Sm},vp=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},yp=function(t,e){return!e&&console.warn(t)},bp=function(t,e){return t&&(mp[t]=e)&&_p&&(_p[t]=e)||mp},xp=function(){return 0},Tp={},Ep=[],wp={},Ap={},Sp={},Op=30,Rp=[],Pp="",Ip=function(t){var e,r,i=t[0];if(rp(i)||Qd(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(r=Rp.length;r--&&!Rp[r].targetTest(i););e=Rp[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new Kf(t[r],e)))||t.splice(r,1);return t},Mp=function(t){return t._gsap||Ip(gf(t))[0]._gsap},Cp=function(t,e,r){return(r=t[e])&&Qd(r)?t[e]():ep(r)&&t.getAttribute&&t.getAttribute(e)||r},Dp=function(t,e){return(t=t.split(",")).forEach(e)||t},Lp=function(t){return Math.round(1e5*t)/1e5||0},Np=function(t,e){for(var r=e.length,i=0;t.indexOf(e[i])<0&&++i<r;);return i<r},Fp=function(t,e,r){var i,n=tp(t[1]),s=(n?2:1)+(e<2?0:1),o=t[s];if(n&&(o.duration=t[1]),o.parent=r,e){for(i=o;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=ip(r.vars.inherit)&&r.parent;o.immediateRender=ip(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return o},Bp=function(){var t,e,r=Ep.length,i=Ep.slice(0);for(wp={},Ep.length=0,t=0;t<r;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Up=function(t,e,r,i){Ep.length&&Bp(),t.render(e,r,i),Ep.length&&Bp()},Gp=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(pp).length<2?e:Jd(t)?t.trim():t},kp=function(t){return t},Xp=function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t},$p=function(t,e){for(var r in e)r in t||"duration"===r||"ease"===r||(t[r]=e[r])},jp=function(t,e){for(var r in e)t[r]=e[r];return t},Hp=function t(e,r){for(var i in r)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=rp(r[i])?t(e[i]||(e[i]={}),r[i]):r[i]);return e},zp=function(t,e){var r,i={};for(r in t)r in e||(i[r]=t[r]);return i},Yp=function(t){var e=t.parent||gd,r=t.keyframes?$p:Xp;if(ip(t.inherit))for(;e;)r(t,e.vars.defaults),e=e.parent||e._dp;return t},qp=function(t,e,r,i){void 0===r&&(r="_first"),void 0===i&&(i="_last");var n=e._prev,s=e._next;n?n._next=s:t[r]===e&&(t[r]=s),s?s._prev=n:t[i]===e&&(t[i]=n),e._next=e._prev=e.parent=null},Vp=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Wp=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},Zp=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Kp=function(t){return t._repeat?Jp(t._tTime,t=t.duration()+t._rDelay)*t:0},Jp=function(t,e){var r=Math.floor(t/=e);return t&&r===t?r-1:r},Qp=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},tf=function(t){return t._end=Lp(t._start+(t._tDur/Math.abs(t._ts||t._rts||1e-8)||0))},ef=function(t,e){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=Lp(r._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),tf(t),r._dirty||Wp(r,t)),t},rf=function(t,e){var r;if((e._time||e._initted&&!e._dur)&&(r=Qp(t.rawTime(),e),(!e._dur||df(0,e.totalDuration(),r)-e._tTime>1e-8)&&e.render(r,!0)),Wp(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-1e-8}},nf=function(t,e,r,i){return e.parent&&Vp(e),e._start=Lp(r+e._delay),e._end=Lp(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,r,i,n){void 0===r&&(r="_first"),void 0===i&&(i="_last");var s,o=t[i];if(n)for(s=e[n];o&&o[n]>s;)o=o._prev;o?(e._next=o._next,o._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,i||rf(t,e),t},sf=function(t,e){return(mp.ScrollTrigger||vp("scrollTrigger",e))&&mp.ScrollTrigger.create(e,t)},of=function(t,e,r,i){return nm(t,e),t._initted?!r&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Td!==Uf.frame?(Ep.push(t),t._lazy=[e,i],1):void 0:1},af=function(t,e,r,i){var n=t._repeat,s=Lp(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=n?n<0?1e10:Lp(s*(n+1)+t._rDelay*n):s,o&&!i?ef(t,t._tTime=t._tDur*o):t.parent&&tf(t),r||Wp(t.parent,t),t},hf=function(t){return t instanceof Qf?Wp(t):af(t,t._dur)},uf={_start:0,endTime:xp},lf=function t(e,r){var i,n,s=e.labels,o=e._recent||uf,a=e.duration()>=1e8?o.endTime(!1):e._dur;return Jd(r)&&(isNaN(r)||r in s)?"<"===(i=r.charAt(0))||">"===i?("<"===i?o._start:o.endTime(o._repeat>=0))+(parseFloat(r.substr(1))||0):(i=r.indexOf("="))<0?(r in s||(s[r]=a),s[r]):(n=+(r.charAt(i-1)+r.substr(i+1)),i>1?t(e,r.substr(0,i-1))+n:a+n):null==r?a:+r},cf=function(t,e){return t||0===t?e(t):e},df=function(t,e,r){return r<t?t:r>e?e:r},pf=function(t){if("string"!=typeof t)return"";var e=fp.exec(t);return e?t.substr(e.index+e[0].length):""},ff=[].slice,mf=function(t,e){return t&&rp(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&rp(t[0]))&&!t.nodeType&&t!==vd},_f=function(t,e,r){return void 0===r&&(r=[]),t.forEach((function(t){var i;return Jd(t)&&!e||mf(t,1)?(i=r).push.apply(i,gf(t)):r.push(t)}))||r},gf=function(t,e){return!Jd(t)||e||!yd&&Gf()?ap(t)?_f(t,e):mf(t)?ff.call(t,0):t?[t]:[]:ff.call(bd.querySelectorAll(t),0)},vf=function(t){return t.sort((function(){return.5-Math.random()}))},yf=function(t){if(Qd(t))return t;var e=rp(t)?t:{each:t},r=Yf(e.ease),i=e.from||0,n=parseFloat(e.base)||0,s={},o=i>0&&i<1,a=isNaN(i)||o,h=e.axis,u=i,l=i;return Jd(i)?u=l={center:.5,edges:.5,end:1}[i]||0:!o&&a&&(u=i[0],l=i[1]),function(t,o,c){var d,p,f,m,_,g,v,y,b,x=(c||e).length,T=s[x];if(!T){if(!(b="auto"===e.grid?0:(e.grid||[1,1e8])[1])){for(v=-1e8;v<(v=c[b++].getBoundingClientRect().left)&&b<x;);b--}for(T=s[x]=[],d=a?Math.min(b,x)*u-.5:i%b,p=a?x*l/b-.5:i/b|0,v=0,y=1e8,g=0;g<x;g++)f=g%b-d,m=p-(g/b|0),T[g]=_=h?Math.abs("y"===h?m:f):Wd(f*f+m*m),_>v&&(v=_),_<y&&(y=_);"random"===i&&vf(T),T.max=v-y,T.min=y,T.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(b>x?x-1:h?"y"===h?x/b:b:Math.max(b,x/b))||0)*("edges"===i?-1:1),T.b=x<0?n-x:n,T.u=pf(e.amount||e.each)||0,r=r&&x<0?Hf(r):r}return x=(T[t]-T.min)/T.max||0,Lp(T.b+(r?r(x):x)*T.v)+T.u}},bf=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(r){var i=Math.round(parseFloat(r)/t)*t*e;return(i-i%1)/e+(tp(r)?0:pf(r))}},xf=function(t,e){var r,i,n=ap(t);return!n&&rp(t)&&(r=n=t.radius||1e8,t.values?(t=gf(t.values),(i=!tp(t[0]))&&(r*=r)):t=bf(t.increment)),cf(e,n?Qd(t)?function(e){return i=t(e),Math.abs(i-e)<=r?i:e}:function(e){for(var n,s,o=parseFloat(i?e.x:e),a=parseFloat(i?e.y:0),h=1e8,u=0,l=t.length;l--;)(n=i?(n=t[l].x-o)*n+(s=t[l].y-a)*s:Math.abs(t[l]-o))<h&&(h=n,u=l);return u=!r||h<=r?t[u]:e,i||u===e||tp(e)?u:u+pf(e)}:bf(t))},Tf=function(t,e,r,i){return cf(ap(t)?!e:!0===r?!!(r=0):!i,(function(){return ap(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(e-t+.99*r))/r)*r*i)/i}))},Ef=function(t,e,r){return cf(r,(function(r){return t[~~e(r)]}))},wf=function(t){for(var e,r,i,n,s=0,o="";~(e=t.indexOf("random(",s));)i=t.indexOf(")",e),n="["===t.charAt(e+7),r=t.substr(e+7,i-e-7).match(n?pp:hp),o+=t.substr(s,e-s)+Tf(n?r:+r[0],n?0:+r[1],+r[2]||1e-5),s=i+1;return o+t.substr(s,t.length-s)},Af=function(t,e,r,i,n){var s=e-t,o=i-r;return cf(n,(function(e){return r+((e-t)/s*o||0)}))},Sf=function(t,e,r){var i,n,s,o=t.labels,a=1e8;for(i in o)(n=o[i]-e)<0==!!r&&n&&a>(n=Math.abs(n))&&(s=i,a=n);return s},Of=function(t,e,r){var i,n,s=t.vars,o=s[e];if(o)return i=s[e+"Params"],n=s.callbackScope||t,r&&Ep.length&&Bp(),i?o.apply(n,i):o.call(n)},Rf=function(t){return Vp(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&Of(t,"onInterrupt"),t},Pf=function(t){var e=(t=!t.name&&t.default||t).name,r=Qd(t),i=e&&!r&&t.init?function(){this._props=[]}:t,n={init:xp,render:gm,add:rm,kill:ym,modifier:vm,rawVars:0},s={targetTest:0,get:0,getSetter:pm,aliases:{},register:0};if(Gf(),t!==i){if(Ap[e])return;Xp(i,Xp(zp(t,n),s)),jp(i.prototype,jp(n,zp(t,s))),Ap[i.prop=e]=i,t.targetTest&&(Rp.push(i),Tp[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}bp(e,i),t.register&&t.register(Sm,i,Tm)},If={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},Mf=function(t,e,r){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)+.5|0},Cf=function(t,e,r){var i,n,s,o,a,h,u,l,c,d,p=t?tp(t)?[t>>16,t>>8&255,255&t]:0:If.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),If[t])p=If[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),n=t.charAt(2),s=t.charAt(3),t="#"+i+i+n+n+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&255,255&p,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]}else if("hsl"===t.substr(0,3))if(p=d=t.match(hp),e){if(~t.indexOf("="))return p=t.match(up),r&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,a=+p[1]/100,i=2*(h=+p[2]/100)-(n=h<=.5?h*(a+1):h+a-h*a),p.length>3&&(p[3]*=1),p[0]=Mf(o+1/3,i,n),p[1]=Mf(o,i,n),p[2]=Mf(o-1/3,i,n);else p=t.match(hp)||If.transparent;p=p.map(Number)}return e&&!d&&(i=p[0]/255,n=p[1]/255,s=p[2]/255,h=((u=Math.max(i,n,s))+(l=Math.min(i,n,s)))/2,u===l?o=a=0:(c=u-l,a=h>.5?c/(2-u-l):c/(u+l),o=u===i?(n-s)/c+(n<s?6:0):u===n?(s-i)/c+2:(i-n)/c+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*a+.5),p[2]=~~(100*h+.5)),r&&p.length<4&&(p[3]=1),p},Df=function(t){var e=[],r=[],i=-1;return t.split(Nf).forEach((function(t){var n=t.match(lp)||[];e.push.apply(e,n),r.push(i+=n.length+1)})),e.c=r,e},Lf=function(t,e,r){var i,n,s,o,a="",h=(t+a).match(Nf),u=e?"hsla(":"rgba(",l=0;if(!h)return t;if(h=h.map((function(t){return(t=Cf(t,e,1))&&u+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),r&&(s=Df(t),(i=r.c).join(a)!==s.c.join(a)))for(o=(n=t.replace(Nf,"1").split(lp)).length-1;l<o;l++)a+=n[l]+(~i.indexOf(l)?h.shift()||u+"0,0,0,0)":(s.length?s:h.length?h:r).shift());if(!n)for(o=(n=t.split(Nf)).length-1;l<o;l++)a+=n[l]+h[l];return a+n[o]},Nf=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in If)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Ff=/hsl[a]?\(/,Bf=function(t){var e,r=t.join(" ");if(Nf.lastIndex=0,Nf.test(r))return e=Ff.test(r),t[1]=Lf(t[1],e),t[0]=Lf(t[0],e,Df(t[1])),!0},Uf=(Md=Date.now,Cd=500,Dd=33,Ld=Md(),Nd=Ld,Bd=Fd=1e3/240,Gd=function t(e){var r,i,n,s,o=Md()-Nd,a=!0===e;if(o>Cd&&(Ld+=o-Dd),((r=(n=(Nd+=o)-Ld)-Bd)>0||a)&&(s=++Rd.frame,Pd=n-1e3*Rd.time,Rd.time=n/=1e3,Bd+=r+(r>=Fd?4:Fd-r),i=1),a||(Ad=Sd(t)),i)for(Id=0;Id<Ud.length;Id++)Ud[Id](n,Pd,s,e)},Rd={time:0,frame:0,tick:function(){Gd(!0)},deltaRatio:function(t){return Pd/(1e3/(t||60))},wake:function(){xd&&(!yd&&np()&&(vd=yd=window,bd=vd.document||{},mp.gsap=Sm,(vd.gsapVersions||(vd.gsapVersions=[])).push(Sm.version),gp(_p||vd.GreenSockGlobals||!vd.gsap&&vd||{}),Od=vd.requestAnimationFrame),Ad&&Rd.sleep(),Sd=Od||function(t){return setTimeout(t,Bd-1e3*Rd.time+1|0)},wd=1,Gd(2))},sleep:function(){(Od?vd.cancelAnimationFrame:clearTimeout)(Ad),wd=0,Sd=xp},lagSmoothing:function(t,e){Cd=t||1e8,Dd=Math.min(e,Cd,0)},fps:function(t){Fd=1e3/(t||240),Bd=1e3*Rd.time+Fd},add:function(t){Ud.indexOf(t)<0&&Ud.push(t),Gf()},remove:function(t){var e;~(e=Ud.indexOf(t))&&Ud.splice(e,1)&&Id>=e&&Id--},_listeners:Ud=[]}),Gf=function(){return!wd&&Uf.wake()},kf={},Xf=/^[\d.\-M][\d.\-,\s]/,$f=/["']/g,jf=function(t){for(var e,r,i,n={},s=t.substr(1,t.length-3).split(":"),o=s[0],a=1,h=s.length;a<h;a++)r=s[a],e=a!==h-1?r.lastIndexOf(","):r.length,i=r.substr(0,e),n[o]=isNaN(i)?i.replace($f,"").trim():+i,o=r.substr(e+1).trim();return n},Hf=function(t){return function(e){return 1-t(1-e)}},zf=function t(e,r){for(var i,n=e._first;n;)n instanceof Qf?t(n,r):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===r||(n.timeline?t(n.timeline,r):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=r)),n=n._next},Yf=function(t,e){return t&&(Qd(t)?t:kf[t]||function(t){var e,r,i,n,s=(t+"").split("("),o=kf[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~t.indexOf("{")?[jf(s[1])]:(e=t,r=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",r),e.substring(r,~n&&n<i?e.indexOf(")",i+1):i)).split(",").map(Gp)):kf._CE&&Xf.test(t)?kf._CE("",t):o}(t))||e},qf=function(t,e,r,i){void 0===r&&(r=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,s={easeIn:e,easeOut:r,easeInOut:i};return Dp(t,(function(t){for(var e in kf[t]=mp[t]=s,kf[n=t.toLowerCase()]=r,s)kf[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=kf[t+"."+e]=s[e]})),s},Vf=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Wf=function t(e,r,i){var n=r>=1?r:1,s=(i||(e?.3:.45))/(r<1?r:1),o=s/Yd*(Math.asin(1/n)||0),a=function(t){return 1===t?1:n*Math.pow(2,-10*t)*Kd((t-o)*s)+1},h="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:Vf(a);return s=Yd/s,h.config=function(r,i){return t(e,r,i)},h},Zf=function t(e,r){void 0===r&&(r=1.70158);var i=function(t){return t?--t*t*((r+1)*t+r)+1:0},n="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:Vf(i);return n.config=function(r){return t(e,r)},n};Dp("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var r=e<5?e+1:e;qf(t+",Power"+(r-1),e?function(t){return Math.pow(t,r)}:function(t){return t},(function(t){return 1-Math.pow(1-t,r)}),(function(t){return t<.5?Math.pow(2*t,r)/2:1-Math.pow(2*(1-t),r)/2}))})),kf.Linear.easeNone=kf.none=kf.Linear.easeIn,qf("Elastic",Wf("in"),Wf("out"),Wf()),kd=7.5625,$d=1/(Xd=2.75),qf("Bounce",(function(t){return 1-jd(1-t)}),jd=function(t){return t<$d?kd*t*t:t<.7272727272727273?kd*Math.pow(t-1.5/Xd,2)+.75:t<.9090909090909092?kd*(t-=2.25/Xd)*t+.9375:kd*Math.pow(t-2.625/Xd,2)+.984375}),qf("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),qf("Circ",(function(t){return-(Wd(1-t*t)-1)})),qf("Sine",(function(t){return 1===t?1:1-Zd(t*qd)})),qf("Back",Zf("in"),Zf("out"),Zf()),kf.SteppedEase=kf.steps=mp.SteppedEase={config:function(t,e){void 0===t&&(t=1);var r=1/t,i=t+(e?0:1),n=e?1:0;return function(t){return((i*df(0,1-1e-8,t)|0)+n)*r}}},zd.ease=kf["quad.out"],Dp("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return Pp+=t+","+t+"Params,"}));var Kf=function(t,e){this.id=Vd++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Cp,this.set=e?e.getSetter:pm},Jf=function(){function t(t,e){var r=t.parent||gd;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,af(this,+t.duration,1,1),this.data=t.data,wd||Uf.wake(),r&&nf(r,this,e||0===e?e:r._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,af(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Gf(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(ef(this,t),!r._dp||r.parent||rf(r,this);r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&nf(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&1e-8===Math.abs(this._zTime)||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Up(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Kp(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Kp(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*r,e):this._repeat?Jp(this._tTime,r)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Qp(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,Zp(this.totalTime(df(-this._delay,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Gf(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=1e-8)&&1e-8!==Math.abs(this._zTime)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&nf(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(ip(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Qp(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,r=arguments.length?t:e.rawTime();e;)r=e._start+r/(e._ts||1),e=e._dp;return r},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,hf(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,hf(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(lf(this,t),ip(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,ip(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,r=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=r&&t<this.endTime(!0)-1e-8))},e.eventCallback=function(t,e,r){var i=this.vars;return arguments.length>1?(e?(i[t]=e,r&&(i[t+"Params"]=r),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise((function(r){var i=Qd(t)?t:kp,n=function(){var t=e.then;e.then=null,Qd(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),r(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?n():e._prom=n}))},e.kill=function(){Rf(this)},t}();Xp(Jf.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Qf=function(t){function e(e,r){var i;return void 0===e&&(e={}),(i=t.call(this,e,r)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=ip(e.sortChildren),i.parent&&rf(i.parent,fd(i)),e.scrollTrigger&&sf(fd(i),e.scrollTrigger),i}md(e,t);var r=e.prototype;return r.to=function(t,e,r){return new hm(t,Fp(arguments,0,this),lf(this,tp(e)?arguments[3]:r)),this},r.from=function(t,e,r){return new hm(t,Fp(arguments,1,this),lf(this,tp(e)?arguments[3]:r)),this},r.fromTo=function(t,e,r,i){return new hm(t,Fp(arguments,2,this),lf(this,tp(e)?arguments[4]:i)),this},r.set=function(t,e,r){return e.duration=0,e.parent=this,Yp(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new hm(t,e,lf(this,r),1),this},r.call=function(t,e,r){return nf(this,hm.delayedCall(0,t,e),lf(this,r))},r.staggerTo=function(t,e,r,i,n,s,o){return r.duration=e,r.stagger=r.stagger||i,r.onComplete=s,r.onCompleteParams=o,r.parent=this,new hm(t,r,lf(this,n)),this},r.staggerFrom=function(t,e,r,i,n,s,o){return r.runBackwards=1,Yp(r).immediateRender=ip(r.immediateRender),this.staggerTo(t,e,r,i,n,s,o)},r.staggerFromTo=function(t,e,r,i,n,s,o,a){return i.startAt=r,Yp(i).immediateRender=ip(i.immediateRender),this.staggerTo(t,e,i,n,s,o,a)},r.render=function(t,e,r){var i,n,s,o,a,h,u,l,c,d,p,f,m=this._time,_=this._dirty?this.totalDuration():this._tDur,g=this._dur,v=this!==gd&&t>_-1e-8&&t>=0?_:t<1e-8?0:t,y=this._zTime<0!=t<0&&(this._initted||!g);if(v!==this._tTime||r||y){if(m!==this._time&&g&&(v+=this._time-m,t+=this._time-m),i=v,c=this._start,h=!(l=this._ts),y&&(g||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(p=this._yoyo,a=g+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,r);if(i=Lp(v%a),v===_?(o=this._repeat,i=g):((o=~~(v/a))&&o===v/a&&(i=g,o--),i>g&&(i=g)),d=Jp(this._tTime,a),!m&&this._tTime&&d!==o&&(d=o),p&&1&o&&(i=g-i,f=1),o!==d&&!this._lock){var b=p&&1&d,x=b===(p&&1&o);if(o<d&&(b=!b),m=b?0:g,this._lock=1,this.render(m||(f?0:Lp(o*a)),e,!g)._lock=0,!e&&this.parent&&Of(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||h!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,_=this._tDur,x&&(this._lock=2,m=b?g:-1e-4,this.render(m,!0)),this._lock=0,!this._ts&&!h)return this;zf(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(t,e,r){var i;if(r>e)for(i=t._first;i&&i._start<=r;){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,Lp(m),Lp(i)))&&(v-=i-(i=u._start)),this._tTime=v,this._time=i,this._act=!l,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&i&&!e&&Of(this,"onStart"),i>=m&&t>=0)for(n=this._first;n;){if(s=n._next,(n._act||i>=n._start)&&n._ts&&u!==n){if(n.parent!==this)return this.render(t,e,r);if(n.render(n._ts>0?(i-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(i-n._start)*n._ts,e,r),i!==this._time||!this._ts&&!h){u=0,s&&(v+=this._zTime=-1e-8);break}}n=s}else{n=this._last;for(var T=t<0?t:i;n;){if(s=n._prev,(n._act||T<=n._end)&&n._ts&&u!==n){if(n.parent!==this)return this.render(t,e,r);if(n.render(n._ts>0?(T-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(T-n._start)*n._ts,e,r),i!==this._time||!this._ts&&!h){u=0,s&&(v+=this._zTime=T?-1e-8:1e-8);break}}n=s}}if(u&&!e&&(this.pause(),u.render(i>=m?0:-1e-8)._zTime=i>=m?1:-1,this._ts))return this._start=c,tf(this),this.render(t,e,r);this._onUpdate&&!e&&Of(this,"onUpdate",!0),(v===_&&_>=this.totalDuration()||!v&&m)&&(c!==this._start&&Math.abs(l)===Math.abs(this._ts)||this._lock||((t||!g)&&(v===_&&this._ts>0||!v&&this._ts<0)&&Vp(this,1),e||t<0&&!m||!v&&!m||(Of(this,v===_?"onComplete":"onReverseComplete",!0),this._prom&&!(v<_&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(t,e){var r=this;if(tp(e)||(e=lf(this,e)),!(t instanceof Jf)){if(ap(t))return t.forEach((function(t){return r.add(t,e)})),this;if(Jd(t))return this.addLabel(t,e);if(!Qd(t))return this;t=hm.delayedCall(0,t)}return this!==t?nf(this,t,e):this},r.getChildren=function(t,e,r,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===i&&(i=-1e8);for(var n=[],s=this._first;s;)s._start>=i&&(s instanceof hm?e&&n.push(s):(r&&n.push(s),t&&n.push.apply(n,s.getChildren(!0,e,r)))),s=s._next;return n},r.getById=function(t){for(var e=this.getChildren(1,1,1),r=e.length;r--;)if(e[r].vars.id===t)return e[r]},r.remove=function(t){return Jd(t)?this.removeLabel(t):Qd(t)?this.killTweensOf(t):(qp(this,t),t===this._recent&&(this._recent=this._last),Wp(this))},r.totalTime=function(e,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Lp(Uf.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,r),this._forcing=0,this):this._tTime},r.addLabel=function(t,e){return this.labels[t]=lf(this,e),this},r.removeLabel=function(t){return delete this.labels[t],this},r.addPause=function(t,e,r){var i=hm.delayedCall(0,e||xp,r);return i.data="isPause",this._hasPause=1,nf(this,i,lf(this,t))},r.removePause=function(t){var e=this._first;for(t=lf(this,t);e;)e._start===t&&"isPause"===e.data&&Vp(e),e=e._next},r.killTweensOf=function(t,e,r){for(var i=this.getTweensOf(t,r),n=i.length;n--;)tm!==i[n]&&i[n].kill(t,e);return this},r.getTweensOf=function(t,e){for(var r,i=[],n=gf(t),s=this._first,o=tp(e);s;)s instanceof hm?Np(s._targets,n)&&(o?(!tm||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&i.push(s):(r=s.getTweensOf(n,e)).length&&i.push.apply(i,r),s=s._next;return i},r.tweenTo=function(t,e){e=e||{};var r=this,i=lf(r,t),n=e,s=n.startAt,o=n.onStart,a=n.onStartParams,h=n.immediateRender,u=hm.to(r,Xp({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:e.duration||Math.abs((i-(s&&"time"in s?s.time:r._time))/r.timeScale())||1e-8,onStart:function(){r.pause();var t=e.duration||Math.abs((i-r._time)/r.timeScale());u._dur!==t&&af(u,t,0,1).render(u._time,!0,!0),o&&o.apply(u,a||[])}},e));return h?u.render(0):u},r.tweenFromTo=function(t,e,r){return this.tweenTo(e,Xp({startAt:{time:lf(this,t)}},r))},r.recent=function(){return this._recent},r.nextLabel=function(t){return void 0===t&&(t=this._time),Sf(this,lf(this,t))},r.previousLabel=function(t){return void 0===t&&(t=this._time),Sf(this,lf(this,t),1)},r.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+1e-8)},r.shiftChildren=function(t,e,r){void 0===r&&(r=0);for(var i,n=this._first,s=this.labels;n;)n._start>=r&&(n._start+=t,n._end+=t),n=n._next;if(e)for(i in s)s[i]>=r&&(s[i]+=t);return Wp(this)},r.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},r.clear=function(t){void 0===t&&(t=!0);for(var e,r=this._first;r;)e=r._next,this.remove(r),r=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Wp(this)},r.totalDuration=function(t){var e,r,i,n=0,s=this,o=s._last,a=1e8;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(i=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(r=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,nf(s,o,r-o._delay,1)._lock=0):a=r,r<0&&o._ts&&(n-=r,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=r/s._ts,s._time-=r,s._tTime-=r),s.shiftChildren(-r,!1,-Infinity),a=0),o._end>n&&o._ts&&(n=o._end),o=e;af(s,s===gd&&s._time>n?s._time:n,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(gd._ts&&(Up(gd,Qp(t,gd)),Td=Uf.frame),Uf.frame>=Op){Op+=Hd.autoSleep||120;var e=gd._first;if((!e||!e._ts)&&Hd.autoSleep&&Uf._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Uf.sleep()}}},e}(Jf);Xp(Qf.prototype,{_lock:0,_hasPause:0,_forcing:0});var tm,em=function(t,e,r,i,n,s,o){var a,h,u,l,c,d,p,f,m=new Tm(this._pt,t,e,0,1,_m,null,n),_=0,g=0;for(m.b=r,m.e=i,r+="",(p=~(i+="").indexOf("random("))&&(i=wf(i)),s&&(s(f=[r,i],t,e),r=f[0],i=f[1]),h=r.match(cp)||[];a=cp.exec(i);)l=a[0],c=i.substring(_,a.index),u?u=(u+1)%5:"rgba("===c.substr(-5)&&(u=1),l!==h[g++]&&(d=parseFloat(h[g-1])||0,m._pt={_next:m._pt,p:c||1===g?c:",",s:d,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-d,m:u&&u<4?Math.round:0},_=cp.lastIndex);return m.c=_<i.length?i.substring(_,i.length):"",m.fp=o,(dp.test(i)||p)&&(m.e=0),this._pt=m,m},rm=function(t,e,r,i,n,s,o,a,h){Qd(i)&&(i=i(n||0,t,s));var u,l=t[e],c="get"!==r?r:Qd(l)?h?t[e.indexOf("set")||!Qd(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():l,d=Qd(l)?h?cm:lm:um;if(Jd(i)&&(~i.indexOf("random(")&&(i=wf(i)),"="===i.charAt(1)&&(i=parseFloat(c)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(pf(c)||0))),c!==i)return isNaN(c*i)?(!l&&!(e in t)&&vp(e,i),em.call(this,t,e,c,i,d,a||Hd.stringFilter,h)):(u=new Tm(this._pt,t,e,+c||0,i-(c||0),"boolean"==typeof l?mm:fm,0,d),h&&(u.fp=h),o&&u.modifier(o,this,t),this._pt=u)},im=function(t,e,r,i,n,s){var o,a,h,u;if(Ap[t]&&!1!==(o=new Ap[t]).init(n,o.rawVars?e[t]:function(t,e,r,i,n){if(Qd(t)&&(t=sm(t,n,e,r,i)),!rp(t)||t.style&&t.nodeType||ap(t)||op(t))return Jd(t)?sm(t,n,e,r,i):t;var s,o={};for(s in t)o[s]=sm(t[s],n,e,r,i);return o}(e[t],i,n,s,r),r,i,s)&&(r._pt=a=new Tm(r._pt,n,t,0,1,o.render,o,0,o.priority),r!==Ed))for(h=r._ptLookup[r._targets.indexOf(n)],u=o._props.length;u--;)h[o._props[u]]=a;return o},nm=function t(e,r){var i,n,s,o,a,h,u,l,c,d,p,f,m,_=e.vars,g=_.ease,v=_.startAt,y=_.immediateRender,b=_.lazy,x=_.onUpdate,T=_.onUpdateParams,E=_.callbackScope,w=_.runBackwards,A=_.yoyoEase,S=_.keyframes,O=_.autoRevert,R=e._dur,P=e._startAt,I=e._targets,M=e.parent,C=M&&"nested"===M.data?M.parent._targets:I,D="auto"===e._overwrite&&!_d,L=e.timeline;if(L&&(!S||!g)&&(g="none"),e._ease=Yf(g,zd.ease),e._yEase=A?Hf(Yf(!0===A?g:A,zd.ease)):0,A&&e._yoyo&&!e._repeat&&(A=e._yEase,e._yEase=e._ease,e._ease=A),!L){if(f=(l=I[0]?Mp(I[0]).harness:0)&&_[l.prop],i=zp(_,Tp),P&&P.render(-1,!0).kill(),v)if(Vp(e._startAt=hm.set(I,Xp({data:"isStart",overwrite:!1,parent:M,immediateRender:!0,lazy:ip(b),startAt:null,delay:0,onUpdate:x,onUpdateParams:T,callbackScope:E,stagger:0},v))),y){if(r>0)O||(e._startAt=0);else if(R&&!(r<0&&P))return void(r&&(e._zTime=r))}else!1===O&&(e._startAt=0);else if(w&&R)if(P)!O&&(e._startAt=0);else if(r&&(y=!1),s=Xp({overwrite:!1,data:"isFromStart",lazy:y&&ip(b),immediateRender:y,stagger:0,parent:M},i),f&&(s[l.prop]=f),Vp(e._startAt=hm.set(I,s)),y){if(!r)return}else t(e._startAt,1e-8);for(e._pt=0,b=R&&ip(b)||b&&!R,n=0;n<I.length;n++){if(u=(a=I[n])._gsap||Ip(I)[n]._gsap,e._ptLookup[n]=d={},wp[u.id]&&Ep.length&&Bp(),p=C===I?n:C.indexOf(a),l&&!1!==(c=new l).init(a,f||i,e,p,C)&&(e._pt=o=new Tm(e._pt,a,c.name,0,1,c.render,c,0,c.priority),c._props.forEach((function(t){d[t]=o})),c.priority&&(h=1)),!l||f)for(s in i)Ap[s]&&(c=im(s,i,e,p,a,C))?c.priority&&(h=1):d[s]=o=rm.call(e,a,s,"get",i[s],p,C,0,_.stringFilter);e._op&&e._op[n]&&e.kill(a,e._op[n]),D&&e._pt&&(tm=e,gd.killTweensOf(a,d,e.globalTime(0)),m=!e.parent,tm=0),e._pt&&b&&(wp[u.id]=1)}h&&xm(e),e._onInit&&e._onInit(e)}e._from=!L&&!!_.runBackwards,e._onUpdate=x,e._initted=(!e._op||e._pt)&&!m},sm=function(t,e,r,i,n){return Qd(t)?t.call(e,r,i,n):Jd(t)&&~t.indexOf("random(")?wf(t):t},om=Pp+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",am=(om+",id,stagger,delay,duration,paused,scrollTrigger").split(","),hm=function(t){function e(e,r,i,n){var s;"number"==typeof r&&(i.duration=r,r=i,i=null);var o,a,h,u,l,c,d,p,f=(s=t.call(this,n?r:Yp(r),i)||this).vars,m=f.duration,_=f.delay,g=f.immediateRender,v=f.stagger,y=f.overwrite,b=f.keyframes,x=f.defaults,T=f.scrollTrigger,E=f.yoyoEase,w=s.parent,A=(ap(e)||op(e)?tp(e[0]):"length"in r)?[e]:gf(e);if(s._targets=A.length?Ip(A):yp("GSAP target "+e+" not found. https://greensock.com",!Hd.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=y,b||v||sp(m)||sp(_)){if(r=s.vars,(o=s.timeline=new Qf({data:"nested",defaults:x||{}})).kill(),o.parent=o._dp=fd(s),o._start=0,b)Xp(o.vars.defaults,{ease:"none"}),b.forEach((function(t){return o.to(A,t,">")}));else{if(u=A.length,d=v?yf(v):xp,rp(v))for(l in v)~om.indexOf(l)&&(p||(p={}),p[l]=v[l]);for(a=0;a<u;a++){for(l in h={},r)am.indexOf(l)<0&&(h[l]=r[l]);h.stagger=0,E&&(h.yoyoEase=E),p&&jp(h,p),c=A[a],h.duration=+sm(m,fd(s),a,c,A),h.delay=(+sm(_,fd(s),a,c,A)||0)-s._delay,!v&&1===u&&h.delay&&(s._delay=_=h.delay,s._start+=_,h.delay=0),o.to(c,h,d(a,c,A))}o.duration()?m=_=0:s.timeline=0}m||s.duration(m=o.duration())}else s.timeline=0;return!0!==y||_d||(tm=fd(s),gd.killTweensOf(A),tm=0),w&&rf(w,fd(s)),(g||!m&&!b&&s._start===Lp(w._time)&&ip(g)&&function t(e){return!e||e._ts&&t(e.parent)}(fd(s))&&"nested"!==w.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-_))),T&&sf(fd(s),T),s}md(e,t);var r=e.prototype;return r.render=function(t,e,r){var i,n,s,o,a,h,u,l,c,d=this._time,p=this._tDur,f=this._dur,m=t>p-1e-8&&t>=0?p:t<1e-8?0:t;if(f){if(m!==this._tTime||!t||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(i=m,l=this.timeline,this._repeat){if(o=f+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,r);if(i=Lp(m%o),m===p?(s=this._repeat,i=f):((s=~~(m/o))&&s===m/o&&(i=f,s--),i>f&&(i=f)),(h=this._yoyo&&1&s)&&(c=this._yEase,i=f-i),a=Jp(this._tTime,o),i===d&&!r&&this._initted)return this;s!==a&&(l&&this._yEase&&zf(l,h),!this.vars.repeatRefresh||h||this._lock||(this._lock=r=1,this.render(Lp(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(of(this,t<0?t:i,r,e))return this._tTime=0,this;if(f!==this._dur)return this.render(t,e,r)}for(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(c||this._ease)(i/f),this._from&&(this.ratio=u=1-u),i&&!d&&!e&&Of(this,"onStart"),n=this._pt;n;)n.r(u,n.d),n=n._next;l&&l.render(t<0?t:!i&&h?-1e-8:l._dur*u,e,r)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,r),Of(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!e&&this.parent&&Of(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Vp(this,1),e||t<0&&!d||!m&&!d||(Of(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,r,i){var n,s,o,a=t.ratio,h=e<0||!e&&(!t._start&&function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))}(t)||(t._ts<0||t._dp._ts<0)&&"isFromStart"!==t.data&&"isStart"!==t.data)?0:1,u=t._rDelay,l=0;if(u&&t._repeat&&(l=df(0,t._tDur,e),s=Jp(l,u),o=Jp(t._tTime,u),t._yoyo&&1&s&&(h=1-h),s!==o&&(a=1-h,t.vars.repeatRefresh&&t._initted&&t.invalidate())),h!==a||i||1e-8===t._zTime||!e&&t._zTime){if(!t._initted&&of(t,e,i,r))return;for(o=t._zTime,t._zTime=e||(r?1e-8:0),r||(r=e&&!o),t.ratio=h,t._from&&(h=1-h),t._time=0,t._tTime=l,n=t._pt;n;)n.r(h,n.d),n=n._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!r&&Of(t,"onUpdate"),l&&t._repeat&&!r&&t.parent&&Of(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===h&&(h&&Vp(t,1),r||(Of(t,h?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,r);return this},r.targets=function(){return this._targets},r.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},r.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Rf(this):this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,tm&&!0!==tm.vars.overwrite)._first||Rf(this),this.parent&&r!==this.timeline.totalDuration()&&af(this,this._dur*this.timeline._tDur/r,0,1),this}var i,n,s,o,a,h,u,l=this._targets,c=t?gf(t):l,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var r=t.length,i=r===e.length;i&&r--&&t[r]===e[r];);return r<0}(l,c))return"all"===e&&(this._pt=0),Rf(this);for(i=this._op=this._op||[],"all"!==e&&(Jd(e)&&(a={},Dp(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var r,i,n,s,o=t[0]?Mp(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(i in r=jp({},e),a)if(i in r)for(n=(s=a[i].split(",")).length;n--;)r[s[n]]=r[i];return r}(l,e)),u=l.length;u--;)if(~c.indexOf(l[u]))for(a in n=d[u],"all"===e?(i[u]=e,o=n,s={}):(s=i[u]=i[u]||{},o=e),o)(h=n&&n[a])&&("kill"in h.d&&!0!==h.d.kill(a)||qp(this,h,"_pt"),delete n[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&p&&Rf(this),this},e.to=function(t,r){return new e(t,r,arguments[2])},e.from=function(t,r){return new e(t,Fp(arguments,1))},e.delayedCall=function(t,r,i,n){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:r,onReverseComplete:r,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:n})},e.fromTo=function(t,r,i){return new e(t,Fp(arguments,2))},e.set=function(t,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(t,r)},e.killTweensOf=function(t,e,r){return gd.killTweensOf(t,e,r)},e}(Jf);Xp(hm.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Dp("staggerTo,staggerFrom,staggerFromTo",(function(t){hm[t]=function(){var e=new Qf,r=ff.call(arguments,0);return r.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,r)}}));var um=function(t,e,r){return t[e]=r},lm=function(t,e,r){return t[e](r)},cm=function(t,e,r,i){return t[e](i.fp,r)},dm=function(t,e,r){return t.setAttribute(e,r)},pm=function(t,e){return Qd(t[e])?lm:ep(t[e])&&t.setAttribute?dm:um},fm=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},mm=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},_m=function(t,e){var r=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round(1e4*(r.s+r.c*t))/1e4)+i,r=r._next;i+=e.c}e.set(e.t,e.p,i,e)},gm=function(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},vm=function(t,e,r,i){for(var n,s=this._pt;s;)n=s._next,s.p===i&&s.modifier(t,e,r),s=n},ym=function(t){for(var e,r,i=this._pt;i;)r=i._next,i.p===t&&!i.op||i.op===t?qp(this,i,"_pt"):i.dep||(e=1),i=r;return!e},bm=function(t,e,r,i){i.mSet(t,e,i.m.call(i.tween,r,i.mt),i)},xm=function(t){for(var e,r,i,n,s=t._pt;s;){for(e=s._next,r=i;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:n)?s._prev._next=s:i=s,(s._next=r)?r._prev=s:n=s,s=e}t._pt=i},Tm=function(){function t(t,e,r,i,n,s,o,a,h){this.t=e,this.s=i,this.c=n,this.p=r,this.r=s||fm,this.d=o||this,this.set=a||um,this.pr=h||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,r){this.mSet=this.mSet||this.set,this.set=bm,this.m=t,this.mt=r,this.tween=e},t}();Dp(Pp+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return Tp[t]=1})),mp.TweenMax=mp.TweenLite=hm,mp.TimelineLite=mp.TimelineMax=Qf,gd=new Qf({sortChildren:!1,defaults:zd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Hd.stringFilter=Bf;var Em={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach((function(t){return Pf(t)}))},timeline:function(t){return new Qf(t)},getTweensOf:function(t,e){return gd.getTweensOf(t,e)},getProperty:function(t,e,r,i){Jd(t)&&(t=gf(t)[0]);var n=Mp(t||{}).get,s=r?kp:Gp;return"native"===r&&(r=""),t?e?s((Ap[e]&&Ap[e].get||n)(t,e,r,i)):function(e,r,i){return s((Ap[e]&&Ap[e].get||n)(t,e,r,i))}:t},quickSetter:function(t,e,r){if((t=gf(t)).length>1){var i=t.map((function(t){return Sm.quickSetter(t,e,r)})),n=i.length;return function(t){for(var e=n;e--;)i[e](t)}}t=t[0]||{};var s=Ap[e],o=Mp(t),a=o.harness&&(o.harness.aliases||{})[e]||e,h=s?function(e){var i=new s;Ed._pt=0,i.init(t,r?e+r:e,Ed,0,[t]),i.render(1,i),Ed._pt&&gm(1,Ed)}:o.set(t,a);return s?h:function(e){return h(t,a,r?e+r:e,o,1)}},isTweening:function(t){return gd.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Yf(t.ease,zd.ease)),Hp(zd,t||{})},config:function(t){return Hp(Hd,t||{})},registerEffect:function(t){var e=t.name,r=t.effect,i=t.plugins,n=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!Ap[t]&&!mp[t]&&yp(e+" effect requires "+t+" plugin.")})),Sp[e]=function(t,e,i){return r(gf(t),Xp(e||{},n),i)},s&&(Qf.prototype[e]=function(t,r,i){return this.add(Sp[e](t,rp(r)?r:(i=r)&&{},this),i)})},registerEase:function(t,e){kf[t]=Yf(e)},parseEase:function(t,e){return arguments.length?Yf(t,e):kf},getById:function(t){return gd.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var r,i,n=new Qf(t);for(n.smoothChildTiming=ip(t.smoothChildTiming),gd.remove(n),n._dp=0,n._time=n._tTime=gd._time,r=gd._first;r;)i=r._next,!e&&!r._dur&&r instanceof hm&&r.vars.onComplete===r._targets[0]||nf(n,r,r._start-r._delay),r=i;return nf(gd,n,0),n},utils:{wrap:function t(e,r,i){var n=r-e;return ap(e)?Ef(e,t(0,e.length),r):cf(i,(function(t){return(n+(t-e)%n)%n+e}))},wrapYoyo:function t(e,r,i){var n=r-e,s=2*n;return ap(e)?Ef(e,t(0,e.length-1),r):cf(i,(function(t){return e+((t=(s+(t-e)%s)%s||0)>n?s-t:t)}))},distribute:yf,random:Tf,snap:xf,normalize:function(t,e,r){return Af(t,e,0,1,r)},getUnit:pf,clamp:function(t,e,r){return cf(r,(function(r){return df(t,e,r)}))},splitColor:Cf,toArray:gf,mapRange:Af,pipe:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(r){return t(parseFloat(r))+(e||pf(r))}},interpolate:function t(e,r,i,n){var s=isNaN(e+r)?0:function(t){return(1-t)*e+t*r};if(!s){var o,a,h,u,l,c=Jd(e),d={};if(!0===i&&(n=1)&&(i=null),c)e={p:e},r={p:r};else if(ap(e)&&!ap(r)){for(h=[],u=e.length,l=u-2,a=1;a<u;a++)h.push(t(e[a-1],e[a]));u--,s=function(t){t*=u;var e=Math.min(l,~~t);return h[e](t-e)},i=r}else n||(e=jp(ap(e)?[]:{},e));if(!h){for(o in r)rm.call(d,e,o,"get",r[o]);s=function(t){return gm(t,d)||(c?e.p:e)}}}return cf(i,s)},shuffle:vf},install:gp,effects:Sp,ticker:Uf,updateRoot:Qf.updateRoot,plugins:Ap,globalTimeline:gd,core:{PropTween:Tm,globals:bp,Tween:hm,Timeline:Qf,Animation:Jf,getCache:Mp,_removeLinkedListItem:qp,suppressOverwrites:function(t){return _d=t}}};Dp("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Em[t]=hm[t]})),Uf.add(Qf.updateRoot),Ed=Em.to({},{duration:0});var wm=function(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r},Am=function(t,e){return{name:t,rawVars:1,init:function(t,r,i){i._onInit=function(t){var i,n;if(Jd(r)&&(i={},Dp(r,(function(t){return i[t]=1})),r=i),e){for(n in i={},r)i[n]=e(r[n]);r=i}!function(t,e){var r,i,n,s=t._targets;for(r in e)for(i=s.length;i--;)(n=t._ptLookup[i][r])&&(n=n.d)&&(n._pt&&(n=wm(n,r)),n&&n.modifier&&n.modifier(e[r],t,s[i],r))}(t,r)}}}},Sm=Em.registerPlugin({name:"attr",init:function(t,e,r,i,n){var s,o;for(s in e)(o=this.add(t,"setAttribute",(t.getAttribute(s)||0)+"",e[s],i,n,0,0,s))&&(o.op=s),this._props.push(s)}},{name:"endArray",init:function(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r])}},Am("roundProps",bf),Am("modifiers"),Am("snap",xf))||Em;hm.version=Qf.version=Sm.version="3.6.1",xd=1,np()&&Gf()
/*!
     * CSSPlugin 3.6.1
     * https://greensock.com
     *
     * Copyright 2008-2021, GreenSock. All rights reserved.
     * Subject to the terms at https://greensock.com/standard-license or for
     * Club GreenSock members, the agreement issued with that membership.
     * @author: Jack Doyle, jack@greensock.com
    */;var Om,Rm,Pm,Im,Mm,Cm,Dm,Lm={},Nm=180/Math.PI,Fm=Math.PI/180,Bm=Math.atan2,Um=/([A-Z])/g,Gm=/(?:left|right|width|margin|padding|x)/i,km=/[\s,\(]\S/,Xm={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},$m=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},jm=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Hm=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},zm=function(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)},Ym=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},qm=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Vm=function(t,e,r){return t.style[e]=r},Wm=function(t,e,r){return t.style.setProperty(e,r)},Zm=function(t,e,r){return t._gsap[e]=r},Km=function(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r},Jm=function(t,e,r,i,n){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(n,s)},Qm=function(t,e,r,i,n){var s=t._gsap;s[e]=r,s.renderTransform(n,s)},t_="transform",e_=t_+"Origin",r_=function(t,e){var r=Rm.createElementNS?Rm.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Rm.createElement(t);return r.style?r:Rm.createElement(t)},i_=function t(e,r,i){var n=getComputedStyle(e);return n[r]||n.getPropertyValue(r.replace(Um,"-$1").toLowerCase())||n.getPropertyValue(r)||!i&&t(e,s_(r)||r,1)||""},n_="O,Moz,ms,Ms,Webkit".split(","),s_=function(t,e,r){var i=(e||Mm).style,n=5;if(t in i&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(n_[n]+t in i););return n<0?null:(3===n?"ms":n>=0?n_[n]:"")+t},o_=function(){"undefined"!=typeof window&&window.document&&(Om=window,Rm=Om.document,Pm=Rm.documentElement,Mm=r_("div")||{style:{}},r_("div"),t_=s_(t_),e_=t_+"Origin",Mm.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Dm=!!s_("perspective"),Im=1)},a_=function t(e){var r,i=r_("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(Pm.appendChild(i),i.appendChild(this),this.style.display="block",e)try{r=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(r=this._gsapBBox());return n&&(s?n.insertBefore(this,s):n.appendChild(this)),Pm.removeChild(i),this.style.cssText=o,r},h_=function(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])},u_=function(t){var e;try{e=t.getBBox()}catch(r){e=a_.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===a_||(e=a_.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+h_(t,["x","cx","x1"])||0,y:+h_(t,["y","cy","y1"])||0,width:0,height:0}},l_=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!u_(t))},c_=function(t,e){if(e){var r=t.style;e in Lm&&e!==e_&&(e=t_),r.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty(e.replace(Um,"-$1").toLowerCase())):r.removeAttribute(e)}},d_=function(t,e,r,i,n,s){var o=new Tm(t._pt,e,r,0,1,s?qm:Ym);return t._pt=o,o.b=i,o.e=n,t._props.push(r),o},p_={deg:1,rad:1,turn:1},f_=function t(e,r,i,n){var s,o,a,h,u=parseFloat(i)||0,l=(i+"").trim().substr((u+"").length)||"px",c=Mm.style,d=Gm.test(r),p="svg"===e.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m="px"===n,_="%"===n;return n===l||!u||p_[n]||p_[l]?u:("px"!==l&&!m&&(u=t(e,r,i,"px")),h=e.getCTM&&l_(e),!_&&"%"!==l||!Lm[r]&&!~r.indexOf("adius")?(c[d?"width":"height"]=100+(m?l:n),o=~r.indexOf("adius")||"em"===n&&e.appendChild&&!p?e:e.parentNode,h&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==Rm&&o.appendChild||(o=Rm.body),(a=o._gsap)&&_&&a.width&&d&&a.time===Uf.time?Lp(u/a.width*100):((_||"%"===l)&&(c.position=i_(e,"position")),o===e&&(c.position="static"),o.appendChild(Mm),s=Mm[f],o.removeChild(Mm),c.position="absolute",d&&_&&((a=Mp(o)).time=Uf.time,a.width=o[f]),Lp(m?s*u/100:s&&u?100/s*u:0))):(s=h?e.getBBox()[d?"width":"height"]:e[f],Lp(_?u/s*100:u/100*s)))},m_=function(t,e,r,i){var n;return Im||o_(),e in Xm&&"transform"!==e&&~(e=Xm[e]).indexOf(",")&&(e=e.split(",")[0]),Lm[e]&&"transform"!==e?(n=O_(t,i),n="transformOrigin"!==e?n[e]:R_(i_(t,e_))+" "+n.zOrigin+"px"):(!(n=t.style[e])||"auto"===n||i||~(n+"").indexOf("calc("))&&(n=b_[e]&&b_[e](t,e,r)||i_(t,e)||Cp(t,e)||("opacity"===e?1:0)),r&&!~(n+"").trim().indexOf(" ")?f_(t,e,n,r)+r:n},__=function(t,e,r,i){if(!r||"none"===r){var n=s_(e,t,1),s=n&&i_(t,n,1);s&&s!==r?(e=n,r=s):"borderColor"===e&&(r=i_(t,"borderTopColor"))}var o,a,h,u,l,c,d,p,f,m,_,g,v=new Tm(this._pt,t.style,e,0,1,_m),y=0,b=0;if(v.b=r,v.e=i,r+="","auto"===(i+="")&&(t.style[e]=i,i=i_(t,e)||i,t.style[e]=r),Bf(o=[r,i]),i=o[1],h=(r=o[0]).match(lp)||[],(i.match(lp)||[]).length){for(;a=lp.exec(i);)d=a[0],f=i.substring(y,a.index),l?l=(l+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(l=1),d!==(c=h[b++]||"")&&(u=parseFloat(c)||0,_=c.substr((u+"").length),(g="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),y=lp.lastIndex-m.length,m||(m=m||Hd.units[e]||_,y===i.length&&(i+=m,v.e+=m)),_!==m&&(u=f_(t,e,c,m)||0),v._pt={_next:v._pt,p:f||1===b?f:",",s:u,c:g?g*p:p-u,m:l&&l<4||"zIndex"===e?Math.round:0});v.c=y<i.length?i.substring(y,i.length):""}else v.r="display"===e&&"none"===i?qm:Ym;return dp.test(i)&&(v.e=0),this._pt=v,v},g_={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},v_=function(t){var e=t.split(" "),r=e[0],i=e[1]||"50%";return"top"!==r&&"bottom"!==r&&"left"!==i&&"right"!==i||(t=r,r=i,i=t),e[0]=g_[r]||r,e[1]=g_[i]||i,e.join(" ")},y_=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,i,n,s=e.t,o=s.style,a=e.u,h=s._gsap;if("all"===a||!0===a)o.cssText="",i=1;else for(n=(a=a.split(",")).length;--n>-1;)r=a[n],Lm[r]&&(i=1,r="transformOrigin"===r?e_:t_),c_(s,r);i&&(c_(s,t_),h&&(h.svg&&s.removeAttribute("transform"),O_(s,1),h.uncache=1))}},b_={clearProps:function(t,e,r,i,n){if("isFromStart"!==n.data){var s=t._pt=new Tm(t._pt,e,r,0,0,y_);return s.u=i,s.pr=-10,s.tween=n,t._props.push(r),1}}},x_=[1,0,0,1,0,0],T_={},E_=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},w_=function(t){var e=i_(t,t_);return E_(e)?x_:e.substr(7).match(up).map(Lp)},A_=function(t,e){var r,i,n,s,o=t._gsap||Mp(t),a=t.style,h=w_(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?x_:h:(h!==x_||t.offsetParent||t===Pm||o.svg||(n=a.display,a.display="block",(r=t.parentNode)&&t.offsetParent||(s=1,i=t.nextSibling,Pm.appendChild(t)),h=w_(t),n?a.display=n:c_(t,"display"),s&&(i?r.insertBefore(t,i):r?r.appendChild(t):Pm.removeChild(t))),e&&h.length>6?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)},S_=function(t,e,r,i,n,s){var o,a,h,u=t._gsap,l=n||A_(t,!0),c=u.xOrigin||0,d=u.yOrigin||0,p=u.xOffset||0,f=u.yOffset||0,m=l[0],_=l[1],g=l[2],v=l[3],y=l[4],b=l[5],x=e.split(" "),T=parseFloat(x[0])||0,E=parseFloat(x[1])||0;r?l!==x_&&(a=m*v-_*g)&&(h=T*(-_/a)+E*(m/a)-(m*b-_*y)/a,T=T*(v/a)+E*(-g/a)+(g*b-v*y)/a,E=h):(T=(o=u_(t)).x+(~x[0].indexOf("%")?T/100*o.width:T),E=o.y+(~(x[1]||x[0]).indexOf("%")?E/100*o.height:E)),i||!1!==i&&u.smooth?(y=T-c,b=E-d,u.xOffset=p+(y*m+b*g)-y,u.yOffset=f+(y*_+b*v)-b):u.xOffset=u.yOffset=0,u.xOrigin=T,u.yOrigin=E,u.smooth=!!i,u.origin=e,u.originIsAbsolute=!!r,t.style[e_]="0px 0px",s&&(d_(s,u,"xOrigin",c,T),d_(s,u,"yOrigin",d,E),d_(s,u,"xOffset",p,u.xOffset),d_(s,u,"yOffset",f,u.yOffset)),t.setAttribute("data-svg-origin",T+" "+E)},O_=function(t,e){var r=t._gsap||new Kf(t);if("x"in r&&!e&&!r.uncache)return r;var i,n,s,o,a,h,u,l,c,d,p,f,m,_,g,v,y,b,x,T,E,w,A,S,O,R,P,I,M,C,D,L,N=t.style,F=r.scaleX<0,B=i_(t,e_)||"0";return i=n=s=h=u=l=c=d=p=0,o=a=1,r.svg=!(!t.getCTM||!l_(t)),_=A_(t,r.svg),r.svg&&(S=!r.uncache&&!e&&t.getAttribute("data-svg-origin"),S_(t,S||B,!!S||r.originIsAbsolute,!1!==r.smooth,_)),f=r.xOrigin||0,m=r.yOrigin||0,_!==x_&&(b=_[0],x=_[1],T=_[2],E=_[3],i=w=_[4],n=A=_[5],6===_.length?(o=Math.sqrt(b*b+x*x),a=Math.sqrt(E*E+T*T),h=b||x?Bm(x,b)*Nm:0,(c=T||E?Bm(T,E)*Nm+h:0)&&(a*=Math.abs(Math.cos(c*Fm))),r.svg&&(i-=f-(f*b+m*T),n-=m-(f*x+m*E))):(L=_[6],C=_[7],P=_[8],I=_[9],M=_[10],D=_[11],i=_[12],n=_[13],s=_[14],u=(g=Bm(L,M))*Nm,g&&(S=w*(v=Math.cos(-g))+P*(y=Math.sin(-g)),O=A*v+I*y,R=L*v+M*y,P=w*-y+P*v,I=A*-y+I*v,M=L*-y+M*v,D=C*-y+D*v,w=S,A=O,L=R),l=(g=Bm(-T,M))*Nm,g&&(v=Math.cos(-g),D=E*(y=Math.sin(-g))+D*v,b=S=b*v-P*y,x=O=x*v-I*y,T=R=T*v-M*y),h=(g=Bm(x,b))*Nm,g&&(S=b*(v=Math.cos(g))+x*(y=Math.sin(g)),O=w*v+A*y,x=x*v-b*y,A=A*v-w*y,b=S,w=O),u&&Math.abs(u)+Math.abs(h)>359.9&&(u=h=0,l=180-l),o=Lp(Math.sqrt(b*b+x*x+T*T)),a=Lp(Math.sqrt(A*A+L*L)),g=Bm(w,A),c=Math.abs(g)>2e-4?g*Nm:0,p=D?1/(D<0?-D:D):0),r.svg&&(S=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!E_(i_(t,t_)),S&&t.setAttribute("transform",S))),Math.abs(c)>90&&Math.abs(c)<270&&(F?(o*=-1,c+=h<=0?180:-180,h+=h<=0?180:-180):(a*=-1,c+=c<=0?180:-180)),r.x=i-((r.xPercent=i&&(r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+"px",r.y=n-((r.yPercent=n&&(r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+"px",r.z=s+"px",r.scaleX=Lp(o),r.scaleY=Lp(a),r.rotation=Lp(h)+"deg",r.rotationX=Lp(u)+"deg",r.rotationY=Lp(l)+"deg",r.skewX=c+"deg",r.skewY=d+"deg",r.transformPerspective=p+"px",(r.zOrigin=parseFloat(B.split(" ")[2])||0)&&(N[e_]=R_(B)),r.xOffset=r.yOffset=0,r.force3D=Hd.force3D,r.renderTransform=r.svg?C_:Dm?M_:I_,r.uncache=0,r},R_=function(t){return(t=t.split(" "))[0]+" "+t[1]},P_=function(t,e,r){var i=pf(e);return Lp(parseFloat(e)+parseFloat(f_(t,"x",r+"px",i)))+i},I_=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,M_(t,e)},M_=function(t,e){var r=e||this,i=r.xPercent,n=r.yPercent,s=r.x,o=r.y,a=r.z,h=r.rotation,u=r.rotationY,l=r.rotationX,c=r.skewX,d=r.skewY,p=r.scaleX,f=r.scaleY,m=r.transformPerspective,_=r.force3D,g=r.target,v=r.zOrigin,y="",b="auto"===_&&t&&1!==t||!0===_;if(v&&("0deg"!==l||"0deg"!==u)){var x,T=parseFloat(u)*Fm,E=Math.sin(T),w=Math.cos(T);T=parseFloat(l)*Fm,x=Math.cos(T),s=P_(g,s,E*x*-v),o=P_(g,o,-Math.sin(T)*-v),a=P_(g,a,w*x*-v+v)}"0px"!==m&&(y+="perspective("+m+") "),(i||n)&&(y+="translate("+i+"%, "+n+"%) "),(b||"0px"!==s||"0px"!==o||"0px"!==a)&&(y+="0px"!==a||b?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+") "),"0deg"!==h&&(y+="rotate("+h+") "),"0deg"!==u&&(y+="rotateY("+u+") "),"0deg"!==l&&(y+="rotateX("+l+") "),"0deg"===c&&"0deg"===d||(y+="skew("+c+", "+d+") "),1===p&&1===f||(y+="scale("+p+", "+f+") "),g.style[t_]=y||"translate(0, 0)"},C_=function(t,e){var r,i,n,s,o,a=e||this,h=a.xPercent,u=a.yPercent,l=a.x,c=a.y,d=a.rotation,p=a.skewX,f=a.skewY,m=a.scaleX,_=a.scaleY,g=a.target,v=a.xOrigin,y=a.yOrigin,b=a.xOffset,x=a.yOffset,T=a.forceCSS,E=parseFloat(l),w=parseFloat(c);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=Fm,p*=Fm,r=Math.cos(d)*m,i=Math.sin(d)*m,n=Math.sin(d-p)*-_,s=Math.cos(d-p)*_,p&&(f*=Fm,o=Math.tan(p-f),n*=o=Math.sqrt(1+o*o),s*=o,f&&(o=Math.tan(f),r*=o=Math.sqrt(1+o*o),i*=o)),r=Lp(r),i=Lp(i),n=Lp(n),s=Lp(s)):(r=m,s=_,i=n=0),(E&&!~(l+"").indexOf("px")||w&&!~(c+"").indexOf("px"))&&(E=f_(g,"x",l,"px"),w=f_(g,"y",c,"px")),(v||y||b||x)&&(E=Lp(E+v-(v*r+y*n)+b),w=Lp(w+y-(v*i+y*s)+x)),(h||u)&&(o=g.getBBox(),E=Lp(E+h/100*o.width),w=Lp(w+u/100*o.height)),o="matrix("+r+","+i+","+n+","+s+","+E+","+w+")",g.setAttribute("transform",o),T&&(g.style[t_]=o)},D_=function(t,e,r,i,n,s){var o,a,h=Jd(n),u=parseFloat(n)*(h&&~n.indexOf("rad")?Nm:1),l=s?u*s:u-i,c=i+l+"deg";return h&&("short"===(o=n.split("_")[1])&&(l%=360)!==l%180&&(l+=l<0?360:-360),"cw"===o&&l<0?l=(l+36e9)%360-360*~~(l/360):"ccw"===o&&l>0&&(l=(l-36e9)%360-360*~~(l/360))),t._pt=a=new Tm(t._pt,e,r,i,l,jm),a.e=c,a.u="deg",t._props.push(r),a},L_=function(t,e){for(var r in e)t[r]=e[r];return t},N_=function(t,e,r){var i,n,s,o,a,h,u,l=L_({},r._gsap),c=r.style;for(n in l.svg?(s=r.getAttribute("transform"),r.setAttribute("transform",""),c[t_]=e,i=O_(r,1),c_(r,t_),r.setAttribute("transform",s)):(s=getComputedStyle(r)[t_],c[t_]=e,i=O_(r,1),c[t_]=s),Lm)(s=l[n])!==(o=i[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(a=pf(s)!==(u=pf(o))?f_(r,n,s,u):parseFloat(s),h=parseFloat(o),t._pt=new Tm(t._pt,i,n,a,h-a,$m),t._pt.u=u||0,t._props.push(n));L_(i,l)};Dp("padding,margin,Width,Radius",(function(t,e){var r="Top",i="Right",n="Bottom",s="Left",o=(e<3?[r,i,n,s]:[r+s,r+i,n+i,n+s]).map((function(r){return e<2?t+r:"border"+r+t}));b_[e>1?"border"+t:t]=function(t,e,r,i,n){var s,a;if(arguments.length<4)return s=o.map((function(e){return m_(t,e,r)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(i+"").split(" "),a={},o.forEach((function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,a,n)}}));var F_,B_,U_={name:"css",register:o_,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,i,n){var s,o,a,h,u,l,c,d,p,f,m,_,g,v,y,b=this._props,x=t.style,T=r.vars.startAt;for(c in Im||o_(),e)if("autoRound"!==c&&(o=e[c],!Ap[c]||!im(c,e,r,i,t,n)))if(u=typeof o,l=b_[c],"function"===u&&(u=typeof(o=o.call(r,i,t,n))),"string"===u&&~o.indexOf("random(")&&(o=wf(o)),l)l(this,t,c,o,r)&&(y=1);else if("--"===c.substr(0,2))s=(getComputedStyle(t).getPropertyValue(c)+"").trim(),o+="",Nf.lastIndex=0,Nf.test(s)||(d=pf(s),p=pf(o)),p?d!==p&&(s=f_(t,c,s,p)+p):d&&(o+=d),this.add(x,"setProperty",s,o,i,n,0,0,c);else if("undefined"!==u){if(T&&c in T?(s="function"==typeof T[c]?T[c].call(r,i,t,n):T[c],c in Hd.units&&!pf(s)&&(s+=Hd.units[c]),"="===(s+"").charAt(1)&&(s=m_(t,c))):s=m_(t,c),h=parseFloat(s),(f="string"===u&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),a=parseFloat(o),c in Xm&&("autoAlpha"===c&&(1===h&&"hidden"===m_(t,"visibility")&&a&&(h=0),d_(this,x,"visibility",h?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==c&&"transform"!==c&&~(c=Xm[c]).indexOf(",")&&(c=c.split(",")[0])),m=c in Lm)if(_||((g=t._gsap).renderTransform&&!e.parseTransform||O_(t,e.parseTransform),v=!1!==e.smoothOrigin&&g.smooth,(_=this._pt=new Tm(this._pt,x,t_,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===c)this._pt=new Tm(this._pt,g,"scaleY",g.scaleY,f?f*a:a-g.scaleY),b.push("scaleY",c),c+="X";else{if("transformOrigin"===c){o=v_(o),g.svg?S_(t,o,0,v,0,this):((p=parseFloat(o.split(" ")[2])||0)!==g.zOrigin&&d_(this,g,"zOrigin",g.zOrigin,p),d_(this,x,c,R_(s),R_(o)));continue}if("svgOrigin"===c){S_(t,o,1,v,0,this);continue}if(c in T_){D_(this,g,c,h,o,f);continue}if("smoothOrigin"===c){d_(this,g,"smooth",g.smooth,o);continue}if("force3D"===c){g[c]=o;continue}if("transform"===c){N_(this,o,t);continue}}else c in x||(c=s_(c)||c);if(m||(a||0===a)&&(h||0===h)&&!km.test(o)&&c in x)a||(a=0),(d=(s+"").substr((h+"").length))!==(p=pf(o)||(c in Hd.units?Hd.units[c]:d))&&(h=f_(t,c,s,p)),this._pt=new Tm(this._pt,m?g:x,c,h,f?f*a:a-h,m||"px"!==p&&"zIndex"!==c||!1===e.autoRound?$m:zm),this._pt.u=p||0,d!==p&&(this._pt.b=s,this._pt.r=Hm);else if(c in x)__.call(this,t,c,s,o);else{if(!(c in t)){vp(c,o);continue}this.add(t,c,t[c],o,i,n)}b.push(c)}y&&xm(this)},get:m_,aliases:Xm,getSetter:function(t,e,r){var i=Xm[e];return i&&i.indexOf(",")<0&&(e=i),e in Lm&&e!==e_&&(t._gsap.x||m_(t,"x"))?r&&Cm===r?"scale"===e?Km:Zm:(Cm=r||{})&&("scale"===e?Jm:Qm):t.style&&!ep(t.style[e])?Vm:~e.indexOf("-")?Wm:pm(t,e)},core:{_removeProperty:c_,_getMatrix:A_}};Sm.utils.checkPrefix=s_,B_=Dp("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(F_="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Lm[t]=1})),Dp(F_,(function(t){Hd.units[t]="deg",T_[t]=1})),Xm[B_[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+F_,Dp("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Xm[e[1]]=B_[e[0]]})),Dp("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Hd.units[t]="px"})),Sm.registerPlugin(U_);var G_,k_,X_,$_,j_,H_,z_,Y_,q_=Sm.registerPlugin(U_)||Sm,V_=(q_.core.Tween,function(){return"undefined"!=typeof window}),W_=function(){return G_||V_()&&(G_=window.gsap)&&G_.registerPlugin&&G_},Z_=function(t){return"function"==typeof t},K_=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],J_=.212671,Q_=.072169,tg=function(t,e){var r,i,n=[],s=0,o=0;for(r=0;r<4;r++){for(i=0;i<5;i++)o=4===i?t[s+4]:0,n[s+i]=t[s]*e[i]+t[s+1]*e[i+5]+t[s+2]*e[i+10]+t[s+3]*e[i+15]+o;s+=5}return n},eg=function(t,e){var r=1-e,i=r*J_,n=.71516*r,s=r*Q_;return tg([i+e,n,s,0,0,i,n+e,s,0,0,i,n,s+e,0,0,0,0,0,1,0],t)},rg=function(t,e,r){var i=X_(e),n=i[0]/255,s=i[1]/255,o=i[2]/255,a=1-r;return tg([a+r*n*J_,r*n*.71516,r*n*Q_,0,0,r*s*J_,a+r*s*.71516,r*s*Q_,0,0,r*o*J_,r*o*.71516,a+r*o*Q_,0,0,0,0,0,1,0],t)},ig=function(t,e){e*=Math.PI/180;var r=Math.cos(e),i=Math.sin(e);return tg([J_+.787329*r+i*-J_,.71516+-.71516*r+-.71516*i,Q_+r*-Q_+.927831*i,0,0,J_+r*-J_+.143*i,.71516+.28484*r+.14*i,Q_+r*-Q_+-.283*i,0,0,J_+r*-J_+-.787329*i,.71516+-.71516*r+.71516*i,Q_+.927831*r+i*Q_,0,0,0,0,0,1,0,0,0,0,0,1],t)},ng=function(t,e){return tg([e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0],t)},sg=function(t,e){var r,i,n=$_.filters[e],s=t.filters||[],o=s.length;for(n||(i=e+" not found. PixiPlugin.registerPIXI(PIXI)",console.warn(i));--o>-1;)if(s[o]instanceof n)return s[o];return r=new n,"BlurFilter"===e&&(r.blur=0),s.push(r),t.filters=s,r},og=function(t,e,r,i){e.add(r,t,r[t],i[t]),e._props.push(t)},ag=function(t,e){var r=new $_.filters.ColorMatrixFilter;return r.matrix=e,r.brightness(t,!0),r.matrix},hg={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},ug=function(t,e,r){var i,n,s,o=sg(t,"ColorMatrixFilter"),a=t._gsColorMatrixFilter=t._gsColorMatrixFilter||function(t){var e,r={};for(e in t)r[e]=t[e];return r}(hg),h=e.combineCMF&&!("colorMatrixFilter"in e&&!e.colorMatrixFilter);s=o.matrix,e.resolution&&(o.resolution=e.resolution),e.matrix&&e.matrix.length===s.length?(n=e.matrix,1!==a.contrast&&og("contrast",r,a,hg),a.hue&&og("hue",r,a,hg),1!==a.brightness&&og("brightness",r,a,hg),a.colorizeAmount&&(og("colorize",r,a,hg),og("colorizeAmount",r,a,hg)),1!==a.saturation&&og("saturation",r,a,hg)):(n=K_.slice(),null!=e.contrast?(n=ng(n,+e.contrast),og("contrast",r,a,e)):1!==a.contrast&&(h?n=ng(n,a.contrast):og("contrast",r,a,hg)),null!=e.hue?(n=ig(n,+e.hue),og("hue",r,a,e)):a.hue&&(h?n=ig(n,a.hue):og("hue",r,a,hg)),null!=e.brightness?(n=ag(+e.brightness,n),og("brightness",r,a,e)):1!==a.brightness&&(h?n=ag(a.brightness,n):og("brightness",r,a,hg)),null!=e.colorize?(e.colorizeAmount="colorizeAmount"in e?+e.colorizeAmount:1,n=rg(n,e.colorize,e.colorizeAmount),og("colorize",r,a,e),og("colorizeAmount",r,a,e)):a.colorizeAmount&&(h?n=rg(n,a.colorize,a.colorizeAmount):(og("colorize",r,a,hg),og("colorizeAmount",r,a,hg))),null!=e.saturation?(n=eg(n,+e.saturation),og("saturation",r,a,e)):1!==a.saturation&&(h?n=eg(n,a.saturation):og("saturation",r,a,hg))),i=n.length;for(;--i>-1;)n[i]!==s[i]&&r.add(s,i,s[i],n[i],"colorMatrixFilter");r._props.push("colorMatrixFilter")},lg=function(t,e){var r=e.t,i=e.p,n=e.color;(0,e.set)(r,i,n[0]<<16|n[1]<<8|n[2])},cg=function(t,e){var r=e.g;r&&(r.dirty++,r.clearDirty++)},dg=function(t,e){e.t.visible=!!e.t.alpha},pg=function(t,e,r,i){var n=t[e],s=X_(Z_(n)?t[e.indexOf("set")||!Z_(t["get"+e.substr(3)])?e:"get"+e.substr(3)]():n),o=X_(r);i._pt=new j_(i._pt,t,e,0,0,lg,{t:t,p:e,color:s,set:H_(t,e)}),i.add(s,0,s[0],o[0]),i.add(s,1,s[1],o[1]),i.add(s,2,s[2],o[2])},fg={tint:1,lineColor:1,fillColor:1},mg="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),_g={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},gg={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},vg=Math.PI/180,yg=function(t){return"string"==typeof t},bg=function(t){return yg(t)&&"="===t.charAt(1)?t.substr(0,2)+parseFloat(t.substr(2))*vg:t*vg},xg=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e5*(e.s+e.c*t))/1e5,e)},Tg=function(t,e,r,i,n,s){var o,a,h=360*(s?vg:1),u=yg(n),l=u&&"="===n.charAt(1)?+(n.charAt(0)+"1"):0,c=parseFloat(l?n.substr(2):n)*(s?vg:1),d=l?c*l:c-i,p=i+d;return u&&("short"===(o=n.split("_")[1])&&(d%=h)!==d%(h/2)&&(d+=d<0?h:-h),"cw"===o&&d<0?d=(d+1e10*h)%h-~~(d/h)*h:"ccw"===o&&d>0&&(d=(d-1e10*h)%h-~~(d/h)*h)),t._pt=a=new j_(t._pt,e,r,i,d,xg),a.e=p,a},Eg=function(){V_()&&(k_=window,G_=W_(),$_=$_||k_.PIXI,X_=function(t){return G_.utils.splitColor("0x"===(t+"").substr(0,2)?"#"+t.substr(2):t)})};
/*!
     * PixiPlugin 3.6.1
     * https://greensock.com
     *
     * @license Copyright 2008-2021, GreenSock. All rights reserved.
     * Subject to the terms at https://greensock.com/standard-license or for
     * Club GreenSock members, the agreement issued with that membership.
     * @author: Jack Doyle, jack@greensock.com
    */for(z_=0;z_<mg.length;z_++)Y_=mg[z_],_g[Y_+"X"]=Y_,_g[Y_+"Y"]=Y_;var wg={version:"3.6.1",name:"pixi",register:function(t,e,r){G_=t,j_=r,H_=e.getSetter,Eg()},registerPIXI:function(t){$_=t},init:function(t,e,r,i,n){if($_||Eg(),!t instanceof $_.DisplayObject)return!1;var s,o,a,h,u,l,c,d,p,f="4"===$_.VERSION.charAt(0);for(l in e){if(s=_g[l],a=e[l],s)o=~l.charAt(l.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(t[s],o,t[s][o],"skew"===s?bg(a):a);else if("scale"===l||"anchor"===l||"pivot"===l||"tileScale"===l)this.add(t[l],"x",t[l].x,a),this.add(t[l],"y",t[l].y,a);else if("rotation"===l||"angle"===l)Tg(this,t,l,t[l],a,"rotation"===l);else if(gg[l])h||(ug(t,e.colorMatrixFilter||e,this),h=!0);else if("blur"===l||"blurX"===l||"blurY"===l||"blurPadding"===l){if(u=sg(t,"BlurFilter"),this.add(u,l,u[l],a),0!==e.blurPadding)for(c=e.blurPadding||2*Math.max(u[l],a),d=t.filters.length;--d>-1;)t.filters[d].padding=Math.max(t.filters[d].padding,c)}else if(fg[l])if(("lineColor"===l||"fillColor"===l)&&t instanceof $_.Graphics)for(p=(t.geometry||t).graphicsData,this._pt=new j_(this._pt,t,l,0,0,cg,{g:t.geometry||t}),d=p.length;--d>-1;)pg(f?p[d]:p[d][l.substr(0,4)+"Style"],f?l:"color",a,this);else pg(t,l,a,this);else"autoAlpha"===l?(this._pt=new j_(this._pt,t,"visible",0,0,dg),this.add(t,"alpha",t.alpha,a),this._props.push("alpha","visible")):"resolution"!==l&&this.add(t,l,"get",a);this._props.push(l)}}};W_()&&G_.registerPlugin(wg);var Ag=re((function(t){!function(){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function r(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+e+";"}function n(t){var e=t.a.offsetWidth,r=e+100;return t.f.style.width=r+"px",t.c.scrollLeft=r,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function s(t,r){function i(){var t=s;n(t)&&t.a.parentNode&&r(t.g)}var s=t;e(t.b,i),e(t.c,i),n(t)}function o(t,e){var r=e||{};this.family=t,this.style=r.style||"normal",this.weight=r.weight||"normal",this.stretch=r.stretch||"normal"}var a=null,h=null,u=null,l=null;function c(){return null===l&&(l=!!document.fonts),l}function d(){if(null===u){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}u=""!==t.style.font}return u}function p(t,e){return[t.style,t.weight,d()?t.stretch:"","100px",e].join(" ")}o.prototype.load=function(t,e){var n=this,o=t||"BESbswy",u=0,l=e||3e3,d=(new Date).getTime();return new Promise((function(t,e){if(c()&&!function(){if(null===h)if(c()&&/Apple/.test(window.navigator.vendor)){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);h=!!t&&603>parseInt(t[1],10)}else h=!1;return h}()){var f=new Promise((function(t,e){!function r(){(new Date).getTime()-d>=l?e(Error(l+"ms timeout exceeded")):document.fonts.load(p(n,'"'+n.family+'"'),o).then((function(e){1<=e.length?t():setTimeout(r,25)}),e)}()})),m=new Promise((function(t,e){u=setTimeout((function(){e(Error(l+"ms timeout exceeded"))}),l)}));Promise.race([m,f]).then((function(){clearTimeout(u),t(n)}),e)}else!function(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e),t()})):document.attachEvent("onreadystatechange",(function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())}))}((function(){function h(){var e;(e=-1!=_&&-1!=g||-1!=_&&-1!=v||-1!=g&&-1!=v)&&((e=_!=g&&_!=v&&g!=v)||(null===a&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),a=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=a&&(_==y&&g==y&&v==y||_==b&&g==b&&v==b||_==x&&g==x&&v==x)),e=!e),e&&(T.parentNode&&T.parentNode.removeChild(T),clearTimeout(u),t(n))}var c=new r(o),f=new r(o),m=new r(o),_=-1,g=-1,v=-1,y=-1,b=-1,x=-1,T=document.createElement("div");T.dir="ltr",i(c,p(n,"sans-serif")),i(f,p(n,"serif")),i(m,p(n,"monospace")),T.appendChild(c.a),T.appendChild(f.a),T.appendChild(m.a),document.body.appendChild(T),y=c.a.offsetWidth,b=f.a.offsetWidth,x=m.a.offsetWidth,function t(){if((new Date).getTime()-d>=l)T.parentNode&&T.parentNode.removeChild(T),e(Error(l+"ms timeout exceeded"));else{var r=document.hidden;!0!==r&&void 0!==r||(_=c.a.offsetWidth,g=f.a.offsetWidth,v=m.a.offsetWidth,h()),u=setTimeout(t,50)}}(),s(c,(function(t){_=t,h()})),i(c,p(n,'"'+n.family+'",sans-serif')),s(f,(function(t){g=t,h()})),i(f,p(n,'"'+n.family+'",serif')),s(m,(function(t){v=t,h()})),i(m,p(n,'"'+n.family+'",monospace'))}))}))},t.exports=o}()})),Sg=function(t,e){return(Sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};
/*!
     * @pixi/filter-pixelate - v4.1.0
     * Compiled Mon, 03 May 2021 02:14:46 UTC
     *
     * @pixi/filter-pixelate is licensed under the MIT License.
     * http://www.opensource.org/licenses/mit-license
     */
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */!function(t){function e(e){void 0===e&&(e=10);var r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n\treturn floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n")||this;return r.size=e,r}(function(t,e){function r(){this.constructor=t}Sg(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this.uniforms.size},set:function(t){"number"==typeof t&&(t=[t,t]),this.uniforms.size=t},enumerable:!1,configurable:!0})}(Po);function Og(t){const e=t*t;return t<4/11?7.5625*e:t<8/11?9.075*e-9.9*t+3.4:t<.9?4356/361*e-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72}function Rg(t){const e=t-1;return e*e*e+1}const Pg=(t,e)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),Ig=(t,e)=>{const r=t.getBounds(),i=e.getBounds();return i.y<r.y+.5*r.height&&r.y+.5*r.height<i.y+i.height},Mg=(t,e,r,i,n)=>i+(n-i)*(t-e)/(r-e),Cg=async t=>new Promise(e=>{setTimeout(e,1e3*t)}),Dg=t=>{let e=t;const r=e.match(/"[^\"]*"/g);r&&r.forEach(t=>{e=e.replace(t,`&laquo;&nbsp;${t.slice(1,-1)}&nbsp;&raquo;`)});const i=e.match(/\*[^\*]*\*/g);i&&i.forEach(t=>{e=e.replace(t,`<b>${t.slice(1,-1)}</b>`)});const n=e.match(/_[^_]*_/g);n&&n.forEach(t=>{e=e.replace(t,`<i>${t.slice(1,-1)}</i>`)});const s=e.match(/\[[^\[\]]*\]\(\S+\)/g);return s&&s.forEach(t=>{const r=t.match(/\(\S+\)/)[0].slice(1,-1),i=t.match(/\[.+\]/)[0].slice(1,-1);e=e.replace(t,`<a href=${r} target=_blank>${i}</a>`)}),e=e.replace(/  /g," ").replace(/'/g,"&rsquo;").replace(/ :/g,"&nbsp;:").replace(/ ;/g,"&nbsp;;").replace(/ !/g,"&nbsp;!").replace(/ \?/g,"&nbsp;?").replace(/ - /g," &mdash;&nbsp;").replace(/ \%/g,"&nbsp;%"),e},Lg=()=>{const t=["Astra","Vax","Covi","Bio","Johnson&","Cure","Comir","Convi","Sino","Corona","Nova","Sputnik"].random(),e=["Zeneca","Vax","Vac","Zevria","Shield","&Johnson","NTech","Naty","decia","pharm"].filter(e=>e.replace("&","")!==t.replace("&","")).random();return t+e};function Ng(t,e,r){const i=t.slice();return i[13]=e[r],i}function Fg(t){let e,r;const i=new gv({props:{transition:t[8],$$slots:{default:[$g]},$$scope:{ctx:t}}}),n=new Av({props:{title:t[1],more:t[2],buttonText:"Niveau suivant",visible:t[4]}});return n.$on("click",t[12]),{c(){dt(i.$$.fragment),e=T(),dt(n.$$.fragment)},m(t,s){pt(i,t,s),g(t,e,s),pt(n,t,s),r=!0},p(t,e){const r={};65589&e&&(r.$$scope={dirty:e,ctx:t}),i.$set(r);const s={};2&e&&(s.title=t[1]),4&e&&(s.more=t[2]),16&e&&(s.visible=t[4]),n.$set(s)},i(t){r||(ot(i.$$.fragment,t),ot(n.$$.fragment,t),r=!0)},o(t){at(i.$$.fragment,t),at(n.$$.fragment,t),r=!1},d(t){ft(i,t),t&&v(e),ft(n,t)}}}function Bg(t){let e,r=Dg(t[7](t[13]))+"";return{c(){e=b("p")},m(t,i){g(t,e,i),e.innerHTML=r},p(t,i){32&i&&r!==(r=Dg(t[7](t[13]))+"")&&(e.innerHTML=r)},d(t){t&&v(e)}}}function Ug(t){let e,r,i,n,s,o,a=Dg(t[7](t[5].title))+"",h=t[5].text.split("\n"),u=[];for(let e=0;e<h.length;e+=1)u[e]=Bg(Ng(t,h,e));return{c(){e=b("img"),i=T(),n=b("h3"),s=T();for(let t=0;t<u.length;t+=1)u[t].c();o=E(),e.src!==(r="img/logo-aip.png")&&A(e,"src","img/logo-aip.png")},m(t,r){g(t,e,r),g(t,i,r),g(t,n,r),n.innerHTML=a,g(t,s,r);for(let e=0;e<u.length;e+=1)u[e].m(t,r);g(t,o,r)},p(t,e){if(32&e&&a!==(a=Dg(t[7](t[5].title))+"")&&(n.innerHTML=a),160&e){let r;for(h=t[5].text.split("\n"),r=0;r<h.length;r+=1){const i=Ng(t,h,r);u[r]?u[r].p(i,e):(u[r]=Bg(i),u[r].c(),u[r].m(o.parentNode,o))}for(;r<u.length;r+=1)u[r].d(1);u.length=h.length}},d(t){t&&v(e),t&&v(i),t&&v(n),t&&v(s),y(u,t),t&&v(o)}}}function Gg(t){let e;const r=new Vg({props:{$$slots:{default:[kg]},$$scope:{ctx:t}}});return r.$on("click",t[10]),{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};65536&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function kg(t){let e;return{c(){e=x("En savoir plus")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function Xg(t){let e,r="win"===t[0]?"Niveau suivant":"Recommencer";return{c(){e=x(r)},m(t,r){g(t,e,r)},p(t,i){1&i&&r!==(r="win"===t[0]?"Niveau suivant":"Recommencer")&&S(e,r)},d(t){t&&v(e)}}}function $g(t){let e,r,i;const n=new Kg({props:{$$slots:{default:[Ug]},$$scope:{ctx:t}}});let s="win"===t[0]&&t[2]&&Gg(t);const o=new Vg({props:{$$slots:{default:[Xg]},$$scope:{ctx:t}}});return o.$on("click",t[11]),{c(){dt(n.$$.fragment),e=T(),s&&s.c(),r=T(),dt(o.$$.fragment)},m(t,a){pt(n,t,a),g(t,e,a),s&&s.m(t,a),g(t,r,a),pt(o,t,a),i=!0},p(t,e){const i={};65568&e&&(i.$$scope={dirty:e,ctx:t}),n.$set(i),"win"===t[0]&&t[2]?s?(s.p(t,e),ot(s,1)):(s=Gg(t),s.c(),ot(s,1),s.m(r.parentNode,r)):s&&(nt(),at(s,1,1,()=>{s=null}),st());const a={};65537&e&&(a.$$scope={dirty:e,ctx:t}),o.$set(a)},i(t){i||(ot(n.$$.fragment,t),ot(s),ot(o.$$.fragment,t),i=!0)},o(t){at(n.$$.fragment,t),at(s),at(o.$$.fragment,t),i=!1},d(t){ft(n,t),t&&v(e),s&&s.d(t),t&&v(r),ft(o,t)}}}function jg(t){let e,r,i=t[3]&&Fg(t);return{c(){i&&i.c(),e=E()},m(t,n){i&&i.m(t,n),g(t,e,n),r=!0},p(t,[r]){t[3]?i?(i.p(t,r),ot(i,1)):(i=Fg(t),i.c(),ot(i,1),i.m(e.parentNode,e)):i&&(nt(),at(i,1,1,()=>{i=null}),st())},i(t){r||(ot(i),r=!0)},o(t){at(i),r=!1},d(t){i&&i.d(t),t&&v(e)}}}function Hg(t,e,r){let{key:i}=e,{title:n}=e,{alerts:s}=e,{more:o}=e,{visible:a=!1}=e,h=!1;const u=X();let l;return t.$set=t=>{"key"in t&&r(0,i=t.key),"title"in t&&r(1,n=t.title),"alerts"in t&&r(9,s=t.alerts),"more"in t&&r(2,o=t.more),"visible"in t&&r(3,a=t.visible)},t.$$.update=()=>{513&t.$$.dirty&&r(5,l=s&&s[i])},[i,n,o,a,h,l,u,t=>t.replace(/{{ LAB }}/g,localStorage.getItem("lab")).replace(/de A/g,"d'A").replace(/{{ JOUR }}/g,new Intl.DateTimeFormat("fr-FR",{weekday:"long"}).format(new Date)),(t,e)=>({duration:1e3,easing:Og,css:(t,e)=>`transform: translate(-50%, -50%) scale(${t});`}),s,()=>r(4,h=!0),()=>u("close"),()=>u("close")]}class zg extends gt{constructor(t){super(),_t(this,t,Hg,jg,o,{key:0,title:1,alerts:9,more:2,visible:3})}get key(){return this.$$.ctx[0]}set key(t){this.$set({key:t}),J()}get title(){return this.$$.ctx[1]}set title(t){this.$set({title:t}),J()}get alerts(){return this.$$.ctx[9]}set alerts(t){this.$set({alerts:t}),J()}get more(){return this.$$.ctx[2]}set more(t){this.$set({more:t}),J()}get visible(){return this.$$.ctx[3]}set visible(t){this.$set({visible:t}),J()}}function Yg(t){let e,r,i;const n=t[2].default,s=a(n,t,t[1],null);return{c(){e=b("div"),s&&s.c(),A(e,"class","button svelte-h8m34w"),R(e,"width",t[0])},m(n,o){g(n,e,o),s&&s.m(e,null),r=!0,i=w(e,"click",t[3])},p(t,[i]){s&&s.p&&2&i&&s.p(h(n,t,t[1],null),u(n,t[1],i,null)),(!r||1&i)&&R(e,"width",t[0])},i(t){r||(ot(s,t),r=!0)},o(t){at(s,t),r=!1},d(t){t&&v(e),s&&s.d(t),i()}}}function qg(t,e,r){let{width:i=null}=e,{$$slots:n={},$$scope:s}=e;return t.$set=t=>{"width"in t&&r(0,i=t.width),"$$scope"in t&&r(1,s=t.$$scope)},[i,s,n,function(e){$(t,e)}]}class Vg extends gt{constructor(t){super(),_t(this,t,qg,Yg,o,{width:0})}}function Wg(t){let e,r,i,n;const s=t[4].default,o=a(s,t,t[3],null);return{c(){e=b("div"),o&&o.c(),A(e,"class","content svelte-jvwj6l"),A(e,"style",r="font-size: "+t[2]+"px; max-height: "+(window.GAME&&.7*GAME.height)+"px; "+t[0]),Z(()=>t[5].call(e))},m(r,s){g(r,e,s),o&&o.m(e,null),i=P(e,t[5].bind(e)),n=!0},p(t,[i]){o&&o.p&&8&i&&o.p(h(s,t,t[3],null),u(s,t[3],i,null)),(!n||5&i&&r!==(r="font-size: "+t[2]+"px; max-height: "+(window.GAME&&.7*GAME.height)+"px; "+t[0]))&&A(e,"style",r)},i(t){n||(ot(o,t),n=!0)},o(t){at(o,t),n=!1},d(t){t&&v(e),o&&o.d(t),i.cancel()}}}function Zg(t,e,r){let i,n,{style:s=""}=e,{$$slots:o={},$$scope:a}=e;return t.$set=t=>{"style"in t&&r(0,s=t.style),"$$scope"in t&&r(3,a=t.$$scope)},t.$$.update=()=>{2&t.$$.dirty&&r(2,n=i&&Math.min(Math.max(.05*i,12),20))},[s,i,n,a,o,function(){i=this.clientWidth,r(1,i)}]}class Kg extends gt{constructor(t){super(),_t(this,t,Zg,Wg,o,{style:0})}}function Jg(t){let e;const r=new gv({props:{transition:t[3],$$slots:{default:[ev]},$$scope:{ctx:t}}});return{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};33&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function Qg(t){let e,r=Dg(t[0])+"";return{c(){e=b("p")},m(t,i){g(t,e,i),e.innerHTML=r},p(t,i){1&i&&r!==(r=Dg(t[0])+"")&&(e.innerHTML=r)},d(t){t&&v(e)}}}function tv(t){let e;return{c(){e=x("Jai compris")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function ev(t){let e,r;const i=new Kg({props:{$$slots:{default:[Qg]},$$scope:{ctx:t}}}),n=new Vg({props:{$$slots:{default:[tv]},$$scope:{ctx:t}}});return n.$on("click",t[4]),{c(){dt(i.$$.fragment),e=T(),dt(n.$$.fragment)},m(t,s){pt(i,t,s),g(t,e,s),pt(n,t,s),r=!0},p(t,e){const r={};33&e&&(r.$$scope={dirty:e,ctx:t}),i.$set(r);const s={};32&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){r||(ot(i.$$.fragment,t),ot(n.$$.fragment,t),r=!0)},o(t){at(i.$$.fragment,t),at(n.$$.fragment,t),r=!1},d(t){ft(i,t),t&&v(e),ft(n,t)}}}function rv(t){let e,r,i=t[1]&&Jg(t);return{c(){i&&i.c(),e=E()},m(t,n){i&&i.m(t,n),g(t,e,n),r=!0},p(t,[r]){t[1]?i?(i.p(t,r),ot(i,1)):(i=Jg(t),i.c(),ot(i,1),i.m(e.parentNode,e)):i&&(nt(),at(i,1,1,()=>{i=null}),st())},i(t){r||(ot(i),r=!0)},o(t){at(i),r=!1},d(t){i&&i.d(t),t&&v(e)}}}function iv(t,e,r){let{text:i}=e,{visible:n=!1}=e;const s=X();return t.$set=t=>{"text"in t&&r(0,i=t.text),"visible"in t&&r(1,n=t.visible)},[i,n,s,(t,e)=>({duration:300,css:(t,e)=>`opacity: ${t}; transform: translate(-50%, -50%) scale(${t});`}),()=>s("close")]}class nv extends gt{constructor(t){super(),_t(this,t,iv,rv,o,{text:0,visible:1})}get text(){return this.$$.ctx[0]}set text(t){this.$set({text:t}),J()}get visible(){return this.$$.ctx[1]}set visible(t){this.$set({visible:t}),J()}}function sv(t,{delay:r=0,duration:i=400,easing:n=e}){const s=+getComputedStyle(t).opacity;return{delay:r,duration:i,easing:n,css:t=>`opacity: ${t*s}`}}function ov(t,{delay:e=0,duration:r=400,easing:i=Rg,x:n=0,y:s=0,opacity:o=0}){const a=getComputedStyle(t),h=+a.opacity,u="none"===a.transform?"":a.transform,l=h*(1-o);return{delay:e,duration:r,easing:i,css:(t,e)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*n}px, ${(1-t)*s}px);\n\t\t\topacity: ${h-l*e}`}}function av(t){let e;const r=t[1].default,i=a(r,t,t[2],null);return{c(){i&&i.c()},m(t,r){i&&i.m(t,r),e=!0},p(t,e){i&&i.p&&4&e&&i.p(h(r,t,t[2],null),u(r,t[2],e,null))},i(t){e||(ot(i,t),e=!0)},o(t){at(i,t),e=!1},d(t){i&&i.d(t)}}}function hv(t){let e,r,i,n;const s=new Kg({props:{style:t[0]+" margin: 2rem 0; max-height: none !important;",$$slots:{default:[av]},$$scope:{ctx:t}}});return{c(){e=b("div"),r=b("div"),dt(s.$$.fragment),A(r,"class","container svelte-1eyo24q"),A(e,"class","long-text svelte-1eyo24q")},m(t,i){g(t,e,i),_(e,r),pt(s,r,null),n=!0},p(t,[e]){const r={};1&e&&(r.style=t[0]+" margin: 2rem 0; max-height: none !important;"),4&e&&(r.$$scope={dirty:e,ctx:t}),s.$set(r)},i(t){n||(ot(s.$$.fragment,t),Z(()=>{i||(i=lt(e,ov,{y:500},!0)),i.run(1)}),n=!0)},o(t){at(s.$$.fragment,t),i||(i=lt(e,ov,{y:500},!1)),i.run(0),n=!1},d(t){t&&v(e),ft(s),t&&i&&i.end()}}}function uv(t,e,r){let{style:i=""}=e,{$$slots:n={},$$scope:s}=e;return t.$set=t=>{"style"in t&&r(0,i=t.style),"$$scope"in t&&r(2,s=t.$$scope)},[i,n,s]}class lv extends gt{constructor(t){super(),_t(this,t,uv,hv,o,{style:0})}}function cv(e){let r,i;return{c(){r=b("div"),r.innerHTML='<span class="fi fi-home svelte-1tk3fvb"></span>',A(r,"class","menu-button svelte-1tk3fvb")},m(t,n){g(t,r,n),i=w(r,"click",e[0])},p:t,i:t,o:t,d(t){t&&v(r),i()}}}function dv(t){return[function(e){$(t,e)}]}class pv extends gt{constructor(t){super(),_t(this,t,dv,cv,o,{})}}function fv(e){let r,i;return{c(){r=b("div"),r.innerHTML='<span class="fi fi-close-a svelte-1ymbc3d"></span>',A(r,"class","close-button svelte-1ymbc3d")},m(t,n){g(t,r,n),i=w(r,"click",e[8])},p:t,d(t){t&&v(r),i()}}}function mv(r){let i,n,o,l,d,p,f,y,x;const E=r[7].default,w=a(E,r,r[6],null);let S=r[1]&&fv(r);return{c(){i=b("div"),w&&w.c(),n=T(),o=b("div"),l=T(),d=b("div"),p=T(),S&&S.c(),A(o,"class","rect border svelte-1ymbc3d"),A(d,"class","rect background svelte-1ymbc3d"),A(i,"class","modal svelte-1ymbc3d"),A(i,"style",r[4]),I(i,"fixed-height",r[0])},m(t,e){g(t,i,e),w&&w.m(i,null),_(i,n),_(i,o),_(i,l),_(i,d),_(i,p),S&&S.m(i,null),x=!0},p(t,[e]){w&&w.p&&64&e&&w.p(h(E,t,t[6],null),u(E,t[6],e,null)),t[1]?S?S.p(t,e):(S=fv(t),S.c(),S.m(i,null)):S&&(S.d(1),S=null),1&e&&I(i,"fixed-height",t[0])},i(n){x||(ot(w,n),Z(()=>{y&&y.end(1),f||(f=function(r,i,n){let o,a,h=i(r,n),u=!1,l=0;function d(){o&&U(r,o)}function p(){const{delay:i=0,duration:n=300,easing:s=e,tick:p=t,css:f}=h||ht;f&&(o=B(r,0,1,n,i,s,f,l++)),p(0,1);const _=c()+i,g=_+n;a&&a.abort(),u=!0,Z(()=>et(r,!0,"start")),a=m(t=>{if(u){if(t>=g)return p(1,0),et(r,!0,"end"),d(),u=!1;if(t>=_){const e=s((t-_)/n);p(e,1-e)}}return u})}let f=!1;return{start(){f||(U(r),s(h)?(h=h(),tt().then(p)):p())},invalidate(){f=!1},end(){u&&(d(),u=!1)}}}(i,r[2],{})),f.start()}),x=!0)},o(t){at(w,t),f&&f.invalidate(),y=ut(i,sv,{duration:250}),x=!1},d(t){t&&v(i),w&&w.d(t),S&&S.d(),t&&y&&y.end()}}}function _v(t,e,r){let{width:i}=e,{fixedHeight:n=!1}=e,{closable:s=!1}=e,{transition:o=(()=>{})}=e;const a=X(),h=`\n\t\twidth: ${i?`${100*i}%`:"90%"};\n\t\t--game-height: ${window.GAME&&GAME.height}px;\n\t`;let{$$slots:u={},$$scope:l}=e;return t.$set=t=>{"width"in t&&r(5,i=t.width),"fixedHeight"in t&&r(0,n=t.fixedHeight),"closable"in t&&r(1,s=t.closable),"transition"in t&&r(2,o=t.transition),"$$scope"in t&&r(6,l=t.$$scope)},[n,s,o,a,h,i,l,u,()=>a("close")]}class gv extends gt{constructor(t){super(),_t(this,t,_v,mv,o,{width:5,fixedHeight:0,closable:1,transition:2})}}function vv(t,e,r){const i=t.slice();return i[5]=e[r],i}function yv(t){let e;const r=new lv({props:{$$slots:{default:[Tv]},$$scope:{ctx:t}}});return{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};263&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function bv(t){let e,r=Dg(t[5])+"";return{c(){e=b("p"),A(e,"class","svelte-iw1y1f")},m(t,i){g(t,e,i),e.innerHTML=r},p(t,i){2&i&&r!==(r=Dg(t[5])+"")&&(e.innerHTML=r)},d(t){t&&v(e)}}}function xv(t){let e;return{c(){e=x(t[2])},m(t,r){g(t,e,r)},p(t,r){4&r&&S(e,t[2])},d(t){t&&v(e)}}}function Tv(t){let e,r,i,n,s,o,a,h,u=t[1],l=[];for(let e=0;e<u.length;e+=1)l[e]=bv(vv(t,u,e));const c=new Dv({props:{height:"1rem"}}),d=new Vg({props:{$$slots:{default:[xv]},$$scope:{ctx:t}}});return d.$on("click",t[4]),{c(){e=b("div"),e.innerHTML='<span class="fi fi-info svelte-iw1y1f"></span>',r=T(),i=b("h2"),n=x(t[0]),s=T();for(let t=0;t<l.length;t+=1)l[t].c();o=T(),dt(c.$$.fragment),a=T(),dt(d.$$.fragment),A(e,"class","info-icon svelte-iw1y1f"),A(i,"class","svelte-iw1y1f")},m(t,u){g(t,e,u),g(t,r,u),g(t,i,u),_(i,n),g(t,s,u);for(let e=0;e<l.length;e+=1)l[e].m(t,u);g(t,o,u),pt(c,t,u),g(t,a,u),pt(d,t,u),h=!0},p(t,e){if((!h||1&e)&&S(n,t[0]),2&e){let r;for(u=t[1],r=0;r<u.length;r+=1){const i=vv(t,u,r);l[r]?l[r].p(i,e):(l[r]=bv(i),l[r].c(),l[r].m(o.parentNode,o))}for(;r<l.length;r+=1)l[r].d(1);l.length=u.length}const r={};260&e&&(r.$$scope={dirty:e,ctx:t}),d.$set(r)},i(t){h||(ot(c.$$.fragment,t),ot(d.$$.fragment,t),h=!0)},o(t){at(c.$$.fragment,t),at(d.$$.fragment,t),h=!1},d(t){t&&v(e),t&&v(r),t&&v(i),t&&v(s),y(l,t),t&&v(o),ft(c,t),t&&v(a),ft(d,t)}}}function Ev(t){let e,r,i=t[3]&&yv(t);return{c(){i&&i.c(),e=E()},m(t,n){i&&i.m(t,n),g(t,e,n),r=!0},p(t,[r]){t[3]?i?(i.p(t,r),ot(i,1)):(i=yv(t),i.c(),ot(i,1),i.m(e.parentNode,e)):i&&(nt(),at(i,1,1,()=>{i=null}),st())},i(t){r||(ot(i),r=!0)},o(t){at(i),r=!1},d(t){i&&i.d(t),t&&v(e)}}}function wv(t,e,r){let{title:i}=e,{more:n}=e,{buttonText:s}=e,{visible:o}=e;return t.$set=t=>{"title"in t&&r(0,i=t.title),"more"in t&&r(1,n=t.more),"buttonText"in t&&r(2,s=t.buttonText),"visible"in t&&r(3,o=t.visible)},[i,n,s,o,function(e){$(t,e)}]}class Av extends gt{constructor(t){super(),_t(this,t,wv,Ev,o,{title:0,more:1,buttonText:2,visible:3})}}function Sv(t,e,r){const i=t.slice();return i[4]=e[r],i[6]=r,i}function Ov(t){let e;return{c(){e=b("div"),A(e,"class","dot svelte-1qlpg97"),I(e,"selected",t[0]===t[6])},m(t,r){g(t,e,r)},p(t,r){1&r&&I(e,"selected",t[0]===t[6])},d(t){t&&v(e)}}}function Rv(e){let r,i,s,o,a,h,u,l=Array.from({length:e[1]}),c=[];for(let t=0;t<l.length;t+=1)c[t]=Ov(Sv(e,l,t));return{c(){r=b("div"),i=b("div"),i.innerHTML='<span class="fi fi-angle-left svelte-1qlpg97"></span>',s=T(),o=b("div");for(let t=0;t<c.length;t+=1)c[t].c();a=T(),h=b("div"),h.innerHTML='<span class="fi fi-angle-right svelte-1qlpg97"></span>',A(i,"class","icon svelte-1qlpg97"),I(i,"hidden",0===e[0]),A(o,"class","dots svelte-1qlpg97"),A(h,"class","icon svelte-1qlpg97"),I(h,"hidden",e[0]===e[1]-1),A(r,"class","navigation svelte-1qlpg97")},m(t,n){g(t,r,n),_(r,i),_(r,s),_(r,o);for(let t=0;t<c.length;t+=1)c[t].m(o,null);_(r,a),_(r,h),u=[w(i,"click",e[2]),w(h,"click",e[3])]},p(t,[e]){if(1&e&&I(i,"hidden",0===t[0]),3&e){let r;for(l=Array.from({length:t[1]}),r=0;r<l.length;r+=1){const i=Sv(t,l,r);c[r]?c[r].p(i,e):(c[r]=Ov(i),c[r].c(),c[r].m(o,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=l.length}3&e&&I(h,"hidden",t[0]===t[1]-1)},i:t,o:t,d(t){t&&v(r),y(c,t),n(u)}}}function Pv(t,e,r){let{length:i}=e,{index:n}=e;return t.$set=t=>{"length"in t&&r(1,i=t.length),"index"in t&&r(0,n=t.index)},[n,i,()=>r(0,n=Math.max(n-1,0)),()=>r(0,n++,n)]}class Iv extends gt{constructor(t){super(),_t(this,t,Pv,Rv,o,{length:1,index:0})}}function Mv(e){let r;return{c(){r=b("div"),R(r,"height",e[0])},m(t,e){g(t,r,e)},p(t,[e]){1&e&&R(r,"height",t[0])},i:t,o:t,d(t){t&&v(r)}}}function Cv(t,e,r){let{height:i}=e;return t.$set=t=>{"height"in t&&r(0,i=t.height)},[i]}class Dv extends gt{constructor(t){super(),_t(this,t,Cv,Mv,o,{height:0})}}function Lv(t){let e,r;const i=new gv({props:{fixedHeight:!0,closable:!0,$$slots:{default:[Xv]},$$scope:{ctx:t}}});i.$on("close",t[10]);const n=new Av({props:{title:t[0],more:t[2],buttonText:"Retour au tutoriel",visible:t[5]}});return n.$on("click",t[11]),{c(){dt(i.$$.fragment),e=T(),dt(n.$$.fragment)},m(t,s){pt(i,t,s),g(t,e,s),pt(n,t,s),r=!0},p(t,e){const r={};4151&e&&(r.$$scope={dirty:e,ctx:t}),i.$set(r);const s={};1&e&&(s.title=t[0]),4&e&&(s.more=t[2]),32&e&&(s.visible=t[5]),n.$set(s)},i(t){r||(ot(i.$$.fragment,t),ot(n.$$.fragment,t),r=!0)},o(t){at(i.$$.fragment,t),at(n.$$.fragment,t),r=!1},d(t){ft(i,t),t&&v(e),ft(n,t)}}}function Nv(t){let e,r,i,n=Dg(t[0])+"",s=Dg(t[1][t[4]])+"";return{c(){e=b("h3"),r=T(),i=b("p")},m(t,o){g(t,e,o),e.innerHTML=n,g(t,r,o),g(t,i,o),i.innerHTML=s},p(t,r){1&r&&n!==(n=Dg(t[0])+"")&&(e.innerHTML=n),18&r&&s!==(s=Dg(t[1][t[4]])+"")&&(i.innerHTML=s)},d(t){t&&v(e),t&&v(r),t&&v(i)}}}function Fv(t){let e,r,i,n;const s=[Uv,Bv],o=[];function a(t,e){return GAME.finished&&t[2]?0:1}return e=a(t),r=o[e]=s[e](t),{c(){r.c(),i=E()},m(t,r){o[e].m(t,r),g(t,i,r),n=!0},p(t,n){let h=e;e=a(t),e===h?o[e].p(t,n):(nt(),at(o[h],1,1,()=>{o[h]=null}),st(),r=o[e],r||(r=o[e]=s[e](t),r.c()),ot(r,1),r.m(i.parentNode,i))},i(t){n||(ot(r),n=!0)},o(t){at(r),n=!1},d(t){o[e].d(t),t&&v(i)}}}function Bv(t){let e;const r=new Vg({props:{$$slots:{default:[Gv]},$$scope:{ctx:t}}});return r.$on("click",t[8]),{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};4096&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function Uv(t){let e;const r=new Vg({props:{$$slots:{default:[kv]},$$scope:{ctx:t}}});return r.$on("click",t[7]),{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};4096&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function Gv(t){let e;return{c(){e=x(" vous de jouer !")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function kv(t){let e;return{c(){e=x("En savoir plus")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function Xv(t){let e,r,i,n;const s=new Kg({props:{$$slots:{default:[Nv]},$$scope:{ctx:t}}});let o=t[4]===t[1].length-1&&Fv(t);function a(e){t[9].call(null,e)}let h={length:t[1].length};void 0!==t[4]&&(h.index=t[4]);const u=new Iv({props:h});return H.push(()=>ct(u,"index",a)),{c(){dt(s.$$.fragment),e=T(),o&&o.c(),r=T(),dt(u.$$.fragment)},m(t,i){pt(s,t,i),g(t,e,i),o&&o.m(t,i),g(t,r,i),pt(u,t,i),n=!0},p(t,e){const n={};4115&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n),t[4]===t[1].length-1?o?(o.p(t,e),ot(o,1)):(o=Fv(t),o.c(),ot(o,1),o.m(r.parentNode,r)):o&&(nt(),at(o,1,1,()=>{o=null}),st());const a={};2&e&&(a.length=t[1].length),!i&&16&e&&(i=!0,a.index=t[4],K(()=>i=!1)),u.$set(a)},i(t){n||(ot(s.$$.fragment,t),ot(o),ot(u.$$.fragment,t),n=!0)},o(t){at(s.$$.fragment,t),at(o),at(u.$$.fragment,t),n=!1},d(t){ft(s,t),t&&v(e),o&&o.d(t),t&&v(r),ft(u,t)}}}function $v(t){let e,r,i=t[3]&&Lv(t);return{c(){i&&i.c(),e=E()},m(t,n){i&&i.m(t,n),g(t,e,n),r=!0},p(t,[r]){t[3]?i?(i.p(t,r),ot(i,1)):(i=Lv(t),i.c(),ot(i,1),i.m(e.parentNode,e)):i&&(nt(),at(i,1,1,()=>{i=null}),st())},i(t){r||(ot(i),r=!0)},o(t){at(i),r=!1},d(t){i&&i.d(t),t&&v(e)}}}function jv(t,e,r){let{title:i}=e,{slides:n}=e,{more:s}=e,{visible:o=!1}=e;const a=X();let h=0,u=!1;return t.$set=t=>{"title"in t&&r(0,i=t.title),"slides"in t&&r(1,n=t.slides),"more"in t&&r(2,s=t.more),"visible"in t&&r(3,o=t.visible)},[i,n,s,o,h,u,a,()=>r(5,u=!0),()=>a("close"),function(t){h=t,r(4,h)},function(e){$(t,e)},()=>r(5,u=!1)]}class Hv extends gt{constructor(t){super(),_t(this,t,jv,$v,o,{title:0,slides:1,more:2,visible:3})}get title(){return this.$$.ctx[0]}set title(t){this.$set({title:t}),J()}get slides(){return this.$$.ctx[1]}set slides(t){this.$set({slides:t}),J()}get more(){return this.$$.ctx[2]}set more(t){this.$set({more:t}),J()}get visible(){return this.$$.ctx[3]}set visible(t){this.$set({visible:t}),J()}}var zv={intro:["La campagne de vaccination contre le Covid-19 bat son plein, et plus de *{{ NB_VACCINATIONS }} millions* de personnes ont dj reu une premire dose de vaccin dans le monde. Jamais des vaccins n'avaient t dvelopps aussi rapidement, grce  l'mergence de technologies nouvelles et une trs grande ractivit des laboratoires.","Dans ce jeu, *vous incarnez un laboratoire pharmaceutique* qui s'apprte  se lancer dans le dveloppement d'un vaccin contre le coronavirus SARS-CoV-2. Chaque tape de ce dveloppement, depuis le squenage du gnome du virus jusqu' la production massive de vaccins, prendra la forme d'un mini-jeu.","Rassurez-vous : votre progression est sauvegarde, et vous avez la possibilit de quitter et de reprendre le jeu  n'importe quel moment.","Commencez par choisir le nom de votre laboratoire, ou bien appuyez sur le bouton pour en gnrer un au hasard."],levels:[{title:"Le squenage du gnome du coronavirus",tutorial:["Le 11 janvier 2020, l'quipe chinoise du professeur Zhang Yongzhen publie pour la premire fois le *gnome* du virus SARS-CoV-2, ouvrant la voie au dveloppement de vaccins.","Le gnome, c'est la carte d'identit d'un organisme. Chez un virus comme celui du Covid-19, il est cod par *une longue squence d'ARN*, l'quivalent de l'ADN chez l'humain, compose de 4 types de molcules appeles *nuclotides* : l'adnine (A), l'uracile (U), la cytosine (C) et la guanine (G).","Squencer le gnome du virus vise donc  reconstituer cette squence, qui contient pour le virus du Covid-19 *prs de 30.000 nuclotides* ! En gnral, l'ARN n'est pas squenc en un seul morceau, mais plutt par brins qui sont ensuite combins par chevauchements pour obtenir le gnome entier, comme une photo panoramique.","*Comment jouer ?* Au fur et  mesure que les brins d'ARN apparaissent, appuyez sur le bouton correspondant  chaque nuclotide au moment o il atteint la zone verte."],alerts:{win:{title:"Covid-19 : {{ LAB }} se lance dans la course au vaccin",text:"PARIS - Les laboratoires {{ LAB }} ont annonc {{ JOUR }} qu'ils se lanaient dans le dveloppement d'un vaccin contre le SARS-CoV-2.\n_\"Grce  la publication du gnome du virus, nous avons bon espoir de pouvoir proposer un vaccin dans les prochains mois\"_ a dclar Alfred Zika, le directeur gnral de {{ LAB }}."},fail:{title:"Covid-19 : le bilan s'alourdit, et toujours aucun vaccin en vue",text:"PARIS - Le coronavirus SARS-CoV-2 a fait plus de 1.600 morts en Chine, tandis qu'un premier dcs a t enregistr en France le 14 fvrier.\n_\"Nous sommes prts  dvelopper un vaccin, mais sans le gnome du virus nous sommes impuissants\"_, a expliqu auprs de l'AIP Alfred Zika, le directeur gnral des laboratoires {{ LAB }}."}},more:["Squencer le gnome du SARS-CoV-2 permet donc de mieux le connatre en vue de dvelopper un vaccin. Mais le squenage permet galement de *suivre la diversit du virus*, comme l'explique Florence Dbarre, chercheuse en biologie volutive au CNRS : _\"Partout dans le monde, on continue  squencer des virus pour identifier les mutations, c'est--dire les diffrences dans le code gntique par rapport  une squence de rfrence.\"_ Si la plupart de ces mutations sont \"neutres\", c'est--dire qu'elles n'apportent pas d'avantage volutif, certaines peuvent entraner l'mergence d'un *variant plus contagieux ou plus dangereux*, comme les fameux variants anglais, sud-africain, brsilien et indien.","De plus, mesurer le nombre de mutations permet d'estimer la vitesse de transmission du virus, et mme de *retracer les chanes de contamination*. _\"En suivant &ldquo;l'arbre gnalogique&rdquo; du virus, on peut dtecter si deux malades font partie du mme cluster ou bien de deux clusters diffrents_, dtaille Florence Dbarre. _Par exemple, dans le cas du cluster  bord du porte-avions Charles-de-Gaulle [o plus de mille marins avaient t infects par le Covid-19], on s'est rendu compte qu'il y avait eu plusieurs introductions du virus  bord.\"_","Autre sujet : la *mise  disposition des squences*. Si le premier gnome du virus a t rendu public le 11 janvier 2020, le squenage tait pourtant termin ds le 5 janvier. Mais le professeur Zhang Yongzhen a alors fait face  un embargo de la Commission nationale de la sant, qui interdisait  toute quipe de recherche chinoise de publier des informations sur l'pidmie qui svissait  Wuhan. Face  la pression internationale, le gnome est finalement publi une semaine plus tard sur un forum acadmique, grce au chercheur australien Edward Holmes  qui Zhang avait envoy la squence.","Depuis, c'est au tour de la France d'tre rgulirement pingle pour *son manque de transparence et ses retards dans la communication des donnes gnomiques*. En juillet 2020, Mediapart rvle que [seules 394 squences avaient t partages](https://www.mediapart.fr/journal/france/110720/donnees-epidemiologiques-la-penurie-cachee) sur la base de donnes internationale [Gisaid](https://www.gisaid.org/) - moins de 1 % de l'ensemble des contributions. Faute d'investissement de l'tat dans le domaine, seuls 0,4 % des tests positifs ont fait l'objet d'un squenage, d'aprs [les donnes de Gisaid](https://covidcg.org/?tab=global_sequencing) (contre plus de 8 % pour le Royaume-Uni par exemple). Malgr tout, les choses tendent  s'amliorer : le dlai moyen entre le squenage et sa publication sur la plateforme, qui tait de 128 jours pour la France en dcembre, n'est dsormais plus que de 22 jours."]},{title:"Les vaccins  ARNm messager",tutorial:["Contrairement aux vaccins classiques, qui consistent en l'injection d'une version attnue ou dsactive d'un virus, la plupart des vaccins contre le SARS-CoV-2 utilisent *l'ADN ou l'ARN messager (ARNm)*.",'Concrtement, on injecte le "plan" permettant  nos cellules de rpliquer la *protine "Spike"*, prsente  la surface du coronavirus, afin que notre systme immunitaire apprenne  la reconnatre et fabrique des *anticorps* contre le vritable virus.','Les vaccins AstraZeneca et Johnson&Johnson sont dits *" vecteur viral"*, puisqu\'ils utilisent un autre virus, rendu inoffensif, pour transporter le matriel gntique du SARS-CoV-2.  l\'inverse, les vaccins des laboratoires Pfizer-BioNTech et Moderna sont dits *" ARNm"*, c\'est--dire que le "plan" codant pour la protine Spike est inject directement, sans intermdiaire.',"*Comment jouer ?* En suivant le plan de l'ARNm, reliez soigneusement les *acides amins* afin de fabriquer la protine Spike. Attention  bien respecter le bon ordre, et  ne pas aller trop vite !"],alerts:{win:{title:"Covid-19 : {{ LAB }} va pouvoir dbuter les essais cliniques pour son vaccin",text:"PARIS - Les laboratoires {{ LAB }} ont annonc {{ JOUR }} que les autorits avaient donn leur accord pour dmarrer un essai clinique de phase I pour leur candidat vaccin contre le SARS-CoV-2.\n_\"Nous avons fait le choix d'une technologie nouvelle, utilisant l'ARNm, qui s'est montre trs efficace lors des essais pr-cliniques\"_, a indiqu Alfred Zika, le directeur gnral du laboratoire."},fail:{title:"Covid-19 : {{ LAB }} renonce  son projet de vaccin, faute de rsultats satisfaisants",text:"PARIS - Les laboratoires {{ LAB }} ont pris la dcision d'abandonner le candidat vaccin contre le SARS-CoV-2 sur lequel ils travaillaient depuis plusieurs mois, a annonc {{ JOUR }} l'entreprise dans un communiqu.\n_\"Nous avions fait le choix d'une technologie nouvelle, utilisant l'ARNm, mais qui ne s'est pas rvle aussi efficace que nous le pensions pour dvelopper une immunit durable\"_, a dclar Alfred Zika, le directeur gnral du laboratoire."}},more:["Comment expliquer le succs des *vaccins  ARN messager* de Pfizer-BioNTech et Moderna ? Selon Steve Pascolo, chercheur  l'hpital universitaire de Zrich, cela tient  leur efficacit,  leur scurit et  leur versatilit. _\"Un vaccin classique est constitu de virus ou de protines qui sont difficiles  produire et qu'il faut purifier, prserver... il y a beaucoup de points d'interrogation_, dtaille-t-il. _Avec l'ARNm, il n'y a plus de points d'interrogation : une fois que l'on sait crer une squence, il est relativement facile et rapide de produire un vaccin.\"_ Steve Pascolo en sait quelque chose, puisqu'il est l'ancien directeur scientifique de *CureVac*, un laboratoire pharmaceutique allemand pionnier de l'ARNm qu'il a cofond en 2000. Leur vaccin anti-Covid vient de terminer ses essais cliniques de phase III et devrait tre homologu au mois de juin par l'Agence europenne des mdicaments (EMA).","Si les vaccins  ARNm ont pu susciter la mfiance, il ne s'agit pourtant pas d'une technologie entirement nouvelle, comme l'explique l'immunologiste. _\"Si vous avez dj t vaccin contre la rougeole, les oreillons et la rubole (ROR), *vous avez dj rencontr des vaccins  ARNm*_, prcise-t-il. _On injecte un virus vivant mais attnu, qui va librer son gnome sous forme d'ARN dans nos cellules et les forcer  produire des protines virales contre lesquelles notre systme immunitaire apprend  se dfendre.\"_ Le vaccin contre la fivre jaune, qui existe depuis prs de 80 ans, fonctionne galement sur le mme principe. La diffrence avec ces nouveaux vaccins ? _\"Le mode d'action est le mme, mais au lieu d'une membrane virale l'ARN est entour d'un *liposome entirement synthtique*, comme une couche de bulles de gras.\"_","C'est la fragilit de ce liposome qui explique les *conditions extrmes de conservation* des vaccins  ARNm (-20C pour Moderna, et jusqu' -70C pour Pfizer-BioNTech). _\"Contrairement  ce que l'on a parfois entendu, l'ARN est trs rsistant : c'est la seule molcule biologique que l'on peut lyophiliser, congeler ou chauffer  90C sans qu'elle soit dgrade !\"_ Mais ce n'est pas le cas des lipides qui l'entourent, qui  temprature ambiante ont tendance  fusionner ou  se rompre, laissant chapper l'ARN. Cette membrane est pourtant essentielle pour garantir l'efficacit du vaccin. _\"On pourrait injecter l'ARN directement, mais on n'a aucune certitude qu'il parvienne jusqu'aux cellules_, poursuit le chercheur. _C'est un peu comme si vous colliez un timbre sur un bout de papier : votre courrier a des chances d'arriver  destination, mais c'est beaucoup plus sr de faire appel  un transporteur comme DHL !\"_","Malgr une technologie nouvelle, les vaccins  ARNm ont su dmontrer leur efficacit dans la lutte contre le Covid-19. Mais qu'en est-il de la menace des *variants* ? _\"Pour le moment, les tudes ont prouv qu'ils restaient efficaces contre tous les variants, contrairement aux autres types de vaccins_, rassure Steve Pascolo. _Isral, o prs de 60 % de la population est vaccine, constitue un &ldquo;laboratoire en temps rel&rdquo; : s'il devait y avoir un variant rsistant aux vaccins, c'est l-bas qu'il apparatrait et on observerait alors une rsurgence de l'pidmie -  l'heure actuelle ce n'est pas le cas.\"_"]},{title:"Les essais cliniques",tutorial:["Les *phases I et II* des essais cliniques (parfois confondues pour acclrer le processus) ont lieu sur un petit groupe de volontaires. Elles ont pour objectif de s'assurer  la fois de *l'innocuit* (absence de danger et d'effets secondaires indsirables) et de *l'immunognicit* (capacit  susciter une rponse immunitaire) du vaccin.","La *phase III*, ralise  plus grande chelle (plusieurs dizaines de milliers de volontaires), permet d'valuer *l'efficacit* du vaccin. Il s'agit d'une tude \"randomise\", c'est--dire que seule la moiti des participants sont vaccins. Les autres recoivent, sans le savoir, un placebo : c'est le *groupe contrle*.","Au bout de quelques semaines, parmi les volontaires ayant contract le Covid-19, on tudie *la proportion d'entre eux qui avaient reu un placebo*. Si aucun des vaccins n'est tomb malade, le vaccin a une efficacit de 100 %. S'il y a autant de malades faisant partie du groupe contrle que de malades ayant t vaccins, alors le vaccin n'a aucune efficacit.","*Comment jouer ?* Appuyez sur chaque volontaire pour lui administrer soit une dose de vaccin, soit un placebo. Attention  ce qu'il y ait autant de participants dans le groupe contrle que de vaccins !"],infos:["Une fois que l'on a inject  tous les participants soit une dose de vaccin, soit un placebo, on attend quelques semaines pour voir lesquels parmi eux attrapent le Covid-19.","*Comment jouer ?* Moins il y a de volontaires vaccins parmi ceux ayant t infects, plus votre vaccin est efficace ! Appuyez sur chaque personne ayant attrap le Covid-19 pour rvler son dossier mdical et savoir si elle fait partie du groupe contrle ou bien si elle a t vaccine."],alerts:{win:{title:"Covid-19 : l'EMA donne son feu vert au vaccin {{ LAB }}",text:"LA HAYE - L'Agence europenne des mdicaments (EMA) a approuv {{ JOUR }} le vaccin dvelopp par le laboratoire {{ LAB }}, qui n'attend plus que l'autorisation de mise sur le march (AMM) de la Commission europenne pour tre distribu sur le continent.\n_\"Il s'agit vraiment d'une russite scientifique historique : les rsultats des essais cliniques montrent que ce vaccin est sr et efficace  prs de 92 %\"_, a soulign la directrice de l'EMA, Aine Taylor."},fail:{title:"Covid-19 : {{ LAB }} abandonne son candidat vaccin, pas assez efficace",text:"PARIS - Les laboratoires {{ LAB }} ont annonc {{ JOUR }} l'arrt de leur programme de dveloppement d'un vaccin contre le SARS-CoV-2.\n_\"Les rsultats intermdiaires des essais cliniques montrent que le vaccin a bien t tolr, mais les rponses immunitaires induites se sont avres infrieures  celles observes chez les personnes guries d'une infection naturelle\"_, prcise l'entreprise dans son communiqu de presse."},failTransparency:{title:'Vaccin {{ LAB }} : une annonce "prmature et peu crdible" selon l\'OMS',text:'GENVE - Les laboratoires {{ LAB }} ont annonc {{ JOUR }} avoir dvelopp un vaccin sr et efficace contre le SARS-CoV-2, une dclaration juge _"prmature et peu crdible"_ par l\'Organisation mondiale de la Sant (OMS).\n_"Les essais cliniques obissent  un protocole rigoureux :  l\'heure actuelle, tout porte  croire que celui-ci n\'a pas t respect"_, a dclar le directeur gnral de l\'OMS, Taye Abreham Elshaday. Il dplore _"un manque de transparence"_ de la part de {{ LAB }}, qui laisse planer _"un doute sur l\'efficacit relle de ce vaccin"_.'}},more:["Bien entendu, *le mini-jeu n'est absolument pas  l'chelle*. Dans la ralit, mme avec des essais cliniques de phase III portant sur des dizaines de milliers de volontaires, l'chantillon permettant de mesurer l'efficacit du vaccin reste de petite taille, dans la mesure o il correspond au nombre de participants infects par le Covid-19. Dans le cas du vaccin Pfizer-BioNTech, ce sont 43.548 personnes qui se sont vu injecter soit deux doses de vaccin, soit deux doses de placebo : parmi eux, 170 ont contract la maladie, dont seulement 8 avait t vaccins - ce qui donne un taux d'efficacit de 95 %. Pour Moderna, 196 volontaires sur plus de 30.000 ont t infects, et seuls 11 d'entre eux ne faisaient pas partie du groupe contrle - soit un taux d'efficacit similaire de 94,5 %.","Peu de temps aprs l'annonce de Pfizer-BioNTech en novembre 2020, la Russie revendique  son tour un taux d'efficacit de 92 %... sur un chantillon de seulement 20 cas confirms de coronavirus. *Ces mesures d'efficacit sont donc  prendre avec des pincettes*, puisqu'elles dpendent fortement de la taille et de la reprsentativit des chantillons, ainsi que du seuil statistique choisi par le laboratoire -  partir de combien de volontaires infects arrter l'essai clinique.","Le 25 janvier 2021, *l'Institut Pasteur annonce l'abandon de son candidat vaccin* le plus avanc, bas sur un vaccin contre la rougeole modifi pour lutter contre le SARS-CoV-2. Les essais cliniques de phase I avaient abouti sur un chec, avec un taux d'anticorps _\"deux  trois fois moindre que les moyennes observes chez un groupe de personnes guries d'une infection naturelle\"_, s'est justifi le professeur Bruno Hoen, directeur de la recherche mdicale de l'institut. Une immense dception pour qui avait l'espoir de voir l'mergence d'un vaccin franais avant la fin de l'anne.","Pourquoi l'Institut Pasteur a-t-il fait le choix de cette technologie, plutt que de prendre la voie des vaccins  ARNm qui se sont rvls les plus efficaces contre le virus ? _\"Dbut 2020, chaque laboratoire a commenc  travailler sur un vaccin avec la technologie qu'il matrisait_, explique Steve Pascolo, immunologiste  l'hpital universitaire de Zrich. _L'ARNm pour BioNTech et Moderna, les adnovirus pour AstraZeneca et Moderna, et le vecteur rougeole pour Pasteur. Avant les essais cliniques, personne ne pouvait savoir quels vaccins allaient tre les plus efficaces.\"_ Ironiquement, *c'est pourtant l'Institut Pasteur qui avait dcouvert l'ARN messager* en 1961. Mais les vaccins  ARNm ont longtemps t mpriss par la recherche acadmique. _\"Quand je prsentais mes rsultats, certains universitaires avaient le toupet de me dire que a ne pouvait pas fonctionner... quand bien mme mes recherches prouvaient le contraire !_ raconte Steve Pascolo. _Les investisseurs privs n'avaient pas ces prjugs.\"_"]},{title:"Production & pharmacovigilance",tutorial:["Flicitations, votre vaccin a t approuv par les autorits et *plusieurs centaines de millions de doses* ont dj t commandes par les pays dvelopps, l'Europe et les tats-Unis en tte.","Pour produire autant de vaccins dans un temps aussi rduit et avec cette technologie nouvelle de l'ARNm, vous allez devoir *sous-traiter une partie de la production et du conditionnement*  d'autres laboratoires, parfois concurrents, en leur octroyant des licences.","En parallle, la campagne de vaccination constitue la phase IV des essais cliniques. La *pharmacovigilance*, c'est--dire l'identification des effets secondaires indsirables que les essais cliniques n'avaient pas rvls, peut entraner une *suspension* de la distribution d'un vaccin si certains risques sont avrs.","*Comment jouer ?* Appuyez sur le bouton pour remplir les fioles de vaccin. Attention  remplir jusqu'en haut, mais sans dborder !"],alerts:{win:{title:"Vaccins : six millions de doses {{ LAB }} en plus au deuxime trimestre",text:"PARIS - La France devrait bnficier _\"d'au moins six millions de doses de vaccins supplmentaires au deuxime trimestre\"_, a indiqu {{ JOUR }} la ministre dlgue  l'Industrie, Anas Vannier-Rousseau.\nCette annonce fait suite  une forte acclration des livraisons de {{ LAB }}  l'Union europenne, qui a annonc qu'elle allait commander prs de 2 milliards de doses supplmentaires au laboratoire d'ici 2023."},fail:{title:"Vaccins : l'UE poursuit {{ LAB }} pour ses retards de livraisons",text:"BRUXELLES - La Commission europenne a annonc {{ JOUR }} son intention d'attaquer en justice le laboratoire {{ LAB }}, accus d'avoir failli  ses obligations pour les livraisons de son vaccin anti-Covid.\nLe laboratoire s'tait engag  livrer quelque 300 millions de doses au premier trimestre 2021, mais seules 80 millions ont finalement t reues.\n_\"Notre priorit est de nous assurer que les citoyens europens disposent d'un nombre suffisant de doses ; nous estimons que {{ LAB }} n'a pas respect les termes du contrat_\", a dclar la prsidente de la Commission, Ulrike von Limburg-Stirum."},randomFail:{title:"La France suspend la vaccination avec {{ LAB }}",text:"PARIS - Embotant le pas de ses voisins europens, la France a suspendu {{ JOUR }} l'utilisation du vaccin des laboratoires {{ LAB }}, en raison de cas exceptionnels de caillots sanguins graves chez plusieurs personnes vaccines.\n_\"J'ai saisi la Haute Autorit de Sant, qui sur la base des recommandations de l'Agence Nationale de Scurit du Mdicament (ANSM), se prononcera sur la poursuite ou non de la vaccination avec {{ LAB }}\"_, a dclar le ministre de la Sant Arnaud Virey.\nL'Agence europenne des mdicaments (EMA) a ouvert une enqute, et prvoit de s'exprimer la semaine prochaine sur _\"un ventuel lien entre les cas de thromboses recenss et le vaccin\"_, a indiqu sa directrice Aine Taylor."}},more:["Jamais une campagne de vaccination n'avait t organise  une telle chelle, avec prs d'1,4 milliard de doses administres  travers le monde  ce jour. Pour les laboratoires, la production de masse est un enjeu majeur, et beaucoup ont d s'adapter. _\"BioNTech, par exemple, tait une petite entreprise allemande avec une capacit de production limite, de l'ordre du million de doses_, raconte Steve Pascolo, chercheur  l'hpital universitaire de Zrich et spcialiste des vaccins. _L'ARNm est une technologie nouvelle qui tait surtout utilise pour traiter des maladies &ldquo;de niche&rdquo;, comme le cancer de la peau (mlanome).\"_ Pour tre en mesure de livrer *plusieurs milliards de doses*, BioNTech a d s'allier avec le gant amricain de l'industrie pharmaceutique Pfizer, qui a mis en place de nouvelles chanes de production aux tats-Unis et en Europe.","Il faut dire que les vaccins  ARNm et les vaccins  vecteur viral (AstraZeneca, Johnson&Johnson) ncessitent *des ingrdients spcifiques et des savoir-faire nouveaux*, que seuls les plus gros acteurs du secteur sont capables de dvelopper. La prsence de plusieurs goulots d'tranglement dans la chane d'approvisionnement explique les *retards* constats chez certains fabricants. C'est le cas d'AstraZeneca, attaqu en justice par la Commission europenne pour manquement  ses engagements, et dont les commandes ne seront pas renouveles  partir du mois de juin.","La France,  dfaut d'tre parvenue  mettre au point un vaccin, joue un rle de *sous-traitant*. L'entreprise Delpharm, qui depuis le mois d'avril met en flacon le vaccin Pfizer-BioNTech dans son usine d'Eure-et-Loire, a t la premire  produire des doses sur le sol hexagonal ; le gant Sanofi devrait prochainement mettre  disposition ses usines en Europe et aux tats-Unis pour ses concurrents. Mais la contribution franaise se limite pour le moment au conditionnement des vaccins - la production des principes actifs, elle, se fait dans d'autres pays europens, comme l'Allemagne ou la Belgique.",'*"Le risque zro n\'existe pas"*',"Si les vaccins ne sont approuvs que s'ils sont rputs srs  l'issue des essais cliniques de phase III, certains effets secondaires rares ne se manifestent qu'une fois la campagne de vaccination lance, avec un chantillon de plusieurs millions de personnes vaccines. Suivre ces effets secondaires, c'est le rle de la *pharmacovigilance*. En France, 31 centres rgionaux sont chargs de collecter les \"notifications spontanes\" des patients et des professionnels de sant, et de les transmettre  *l'Agence nationale de scurit du mdicament* (ANSM).","_\"Le risque zro n'existe pas_, explique Mounia Hocine, chercheuse en biostatistique au Conservatoire national des arts et mtiers. _Le rle de la pharmacovigilance, c'est de dterminer si les effets indsirables sont prsents dans la proportion qu'on attend ou non.\"_ Dans le cas des vaccins AstraZeneca et Johnson&Johnson, l'Agence europenne des mdicaments (EMA) a tabli un lien entre l'injection du vaccin et les effets indsirables constats - des caillots sanguins graves et une diminution du nombre de plaquettes. Mais elle a galement estim que d  leur extrme raret, la *balance bnfices-risques* de ces vaccins restait positive. _\"Il y a 100 fois plus de risques de faire une thrombose en prenant la pilule qu'en se faisant vacciner avec AstraZeneca !\"_, martle la chercheuse.","Rarement l'valuation des mdicaments n'aura occup une place aussi centrale dans le dbat public. _\"Cette campagne de vaccination massive, c'est une bonne chose pour la pharmacovigilance_, acquiesce Mounia Hocine. _L'EMA et toutes les agences nationales sont en mode &ldquo;sniper&rdquo; et surveillent trs attentivement les signaux. Il y a une mutualisation des ressources.\"_"]}],outro:{text:["Flicitations ! Vous tes parvenue en  peine un an  dvelopper *un vaccin sr et efficace* contre le Covid-19, et  produire *prs d'un milliard de doses* qui sauveront la vie de plusieurs centaines de milliers de personnes.","videmment, une grande partie du mrite revient aux efforts de vos quipes. Mais n'oubliez pas que rien n'aurait t possible sans plusieurs centaines de millions d'euros de *financements publics* et des dcennies de recherche fondamentale en virologie et immunologie.","Retour  la ralit.  l'heure actuelle, *l'pidmie fait rage en Inde et au Brsil*, avec l'mergence de variants plus contagieux. Les services de sant sont dbords et les doses de vaccins, accapares par les pays riches, tardent  arriver.","Le 5 mai 2021, le prsident des tats-Unis Joe Biden s'est montr favorable  *une leve des brevets*, qui pourrait permettre aux pays en voie de dveloppement de fabriquer des vaccins sur leur sol - si tant est qu'ils disposent des technologies, comptences et matires premires ncessaires pour ces vaccins d'un nouveau genre. Une dcision salue par l'OMS et plusieurs associations humanitaires.",'Et vous ? Seriez-vous prte  renoncer  votre brevet sur votre vaccin {{ LAB }} pour en faire _"un bien public mondial"_, comme l\'avait formul Emmanuel Macron en mai 2020 ?'],more:["Sur le papier, la leve des brevets sonne comme une vidence. Mais au-del des intrts financiers des laboratoires, *cette mesure n'aurait aucune efficacit* selon Steve Pascolo, immunologiste  l'hpital universitaire de Zrich. _\"Ce nest pas parce que les brevets sont levs que les autres entreprises vont tre capables de produire des vaccins  ARN messager_, explique-t-il. _C'est comme si vous disiez qu'en distribuant la recette des macarons Ladure, on allait crouler sous les ptisseries !\"_","Ces nouveaux vaccins ncessitent en effet des produits spcifiques, biologiques ou chimiques, parfois fournis par une seule entreprise dans le monde et dont l'approvisionnement limite les capacits de production. _\"C'est une longue chane de dominos_, prcise Steve Pascolo. _*Le problme ce n'est pas les brevets mais la monte en gamme de cette chane d'approvisionnement*, ce qui prend du temps.\"_","Pire : la leve des brevets pourrait tre contreproductive pour l'accs aux vaccins des pays en voie de dveloppement. _\"En dcourageant l'innovation, on prend le risque de *ralentir le dveloppement de nouveaux vaccins* ou l'amlioration des vaccins existants_, poursuit le chercheur. _Augmenter l'efficacit des vaccins pourrait permettre de fabriquer plus de doses avec la mme quantit d'ARN, et de fournir plus rapidement les autres pays.\"_","Car le temps presse : au-del de la situation sanitaire catastrophique dans les pays du Sud, ces derniers constituent *une rserve potentielle de variants*, qui s'ils se rvlaient rsistants aux vaccins actuels pourraient anantir tous nos efforts."]},makingOf:[{title:"Pourquoi un newsgame ?",text:[" l'image de l'article Wikipdia en franais qui y est ddi, [long d' peine une ligne](https://fr.wikipedia.org/wiki/Newsgame), le newsgame ou \"jeu d'informations\" est encore trs peu rpandu dans les mdias, en particulier franais.\nEn ayant l'ide de ce format, j'avais notamment en tte la web-srie interactive *Uchroniques*, ralise par Thierry Tripod et Patrick Mallet et publie en 2015 par France TV Nouvelles critures. Ce format hybride - malheureusement tomb dans les limbes d'Internet et dont il ne reste aujourd'hui que [quelques \"let's play\"](https://www.youtube.com/watch?v=2DH497MHRRo) - proposait  l'internaute de revisiter dix vnements historiques, de l'assassinat de Kennedy  la mission Apollo 13, en passant par la prsentation du premier Macintosh.","Chaque vnement incluait un mini-jeu, qui permettait selon la prestation du joueur de dbloquer une fin alternative parmi trois ou quatre possibilits, le tout illustr par des images d'archives, relles ou fabriques de toutes pices pour donner vie  ces uchronies plus ou moins farfelues. Pour ce projet de fin d'tudes, j'ai repens en particulier au niveau consacr  Louis Pasteur, qui prsentait *un mini-jeu expliquant le fonctionnement d'un vaccin.*","Plus rcemment, j'ai galement t marqu par [ce format interactif de Reuters](https://graphics.reuters.com/HEALTH-CORONAVIRUS/VACCINE/yzdpxqxnwvx/), qui illustre en animations le principe des diffrents vaccins anti-Covid alors en cours de dveloppement. Convaincu du potentiel de ce type de format pour vulgariser un sujet aussi complexe et qui nous touche toutes et tous, *je me suis lanc dans le dveloppement de mon propre newsgame.*"]},{title:"Le jeu",text:["Le newsgame est divis en *quatre niveaux*, correspondant aux diffrentes tapes du dveloppement des vaccins contre le Covid-19 : le squenage du gnome du virus, le fonctionnement des vaccins  ARNm (Pfizer-BioNTech, Moderna), les essais cliniques et enfin la production massive de doses et la pharmacovigilance.  chaque niveau, *un mini-jeu permet de vulgariser les enjeux du sujet* d'une manire plus stimulante qu'un simple article.","Le choix a t fait de btir le jeu *au format mobile*, et ce pour plusieurs raisons. D'une part, il s'agit de s'adapter aux usages : plus de 70 % des Franais consomment la presse depuis leur smartphone, et le mobile constitue le principal support sur lequel ils jouent aux jeux vido, d'aprs [le rapport 2020 du SELL](https://www.sell.fr/news/bilan-marche-jeu-video-2020). D'autre part, le gameplay de certains niveaux (notamment celui sur le fonctionnement des vaccins) tait beaucoup plus adapt au tactile qu' la souris.","Tout au long du jeu, *des dpches* d'une agence de presse fictive - inspires de vritables faits d'actualit - jalonnent le parcours du joueur et accompagnent ses succs ou ses checs. Dans la course au vaccin, il y a des gagnants et des perdants, et il me semblait important que *l'chec fasse partie intgrante du jeu*... y compris pour des raisons indpendantes de la volont de l'internaute, comme l'inefficacit d'un vaccin ou bien la dtection d'effets secondaires graves."]},{title:"Plusieurs dfis",text:["Quand j'ai eu l'ide de ce jeu, en janvier dernier, la campagne vaccinale venait tout juste de dbuter en France et en Europe. Quatre mois plus tard, la situation est bien diffrente : alors qu'[ peine plus d'un Franais sur quatre](https://twitter.com/BotDuVaccin) a dj reu une premire injection, l'Institut Pasteur a abandonn son projet de vaccin, les vaccins AstraZeneca et Johnson&Johnson ont t suspendus dans plusieurs pays  la suite de rares cas de thromboses, et les retards de livraisons s'accumulent pour plusieurs fabricants - autant d'vnements qui m'ont inspir pour diffrents aspects du jeu. Jusqu'au dernier jour, *il a donc fallu s'adapter en fonction de l'actualit rcente*.","Par ailleurs, la difficult dans ce genre de projet est de trouver *le bon niveau d'abstraction*. Un mini-jeu ne peut reprsenter fidlement la complexit des enjeux du dveloppement des vaccins, mais je ne voulais pas non plus que le gameplay ne soit qu'un prtexte pour distraire le joueur entre deux longs textes. En somme, il s'agissait d'atteindre le juste quilibre entre l'information et le jeu : trop d'info et l'internaute ne retiendrait rien, pas assez et le jeu en deviendrait superficiel. Finalement, la solution a t de laisser le choix au joueur d'approfondir tel ou tel aspect du sujet s'il le souhaite, mais d'apporter l'essentiel  travers le gameplay et les fausses dpches.","Pour m'aider dans cette tche, j'ai galement pu compter sur *l'expertise de spcialistes* comme Florence Dbarre, Steve Pascolo ou Mounia Hocine. Ceux-ci m'ont apport un clairage sur les enjeux du dveloppement des vaccins, et m'ont offert la lgitimit scientifique ncessaire pour mener  bien ce projet."]},{title:"Un peu de technique...",text:["Le jeu a t cod par mes soins de A  Z, en JavaScript et HTML/CSS. Le projet complet compte environ *3500 lignes de code* et a ncessit plus de 80 heures de dveloppement. J'ai utilis le framework [Svelte](https://svelte.dev/) pour l'interface utilisateur, le moteur de rendu [PIXI.js](https://www.pixijs.com/) pour le jeu, et les bibliothques [GSAP](https://greensock.com/gsap/) et [Howler.js](https://howlerjs.com/) pour les animations et le son, respectivement.",'Tous les graphismes _("sprites")_ ont t raliss sur le logiciel de dessin vectoriel [Inkscape](https://inkscape.org/fr/). Les musiques et effets sonores sont libres de droits et issus de [Freesound](https://freesound.org/). Les icnes proviennent de [Fontisto](https://www.fontisto.com/).']}],credits:[{label:"Conu et dvelopp par",items:"Tom Fvrier"},{label:"Ralis avec",items:["[Svelte](https://svelte.dev/)","[PIXI.js](https://www.pixijs.com/)","[GSAP](https://greensock.com/gsap/)","[Howler.js](https://howlerjs.com/)","[Fontisto](https://www.fontisto.com/)"]},{label:"Musiques et effets sonores",items:"[Freesound](https://freesound.org/)"},{label:"Avec l'aide prcieuse de",items:["Florence Dbarre","Steve Pascolo","Mounia Hocine","Guillaume Achaz","Marie Mawad"]}]};class Yv{constructor(){this.width=GAME.width,this.height=GAME.height,this.background=new PIXI.Container,this.background.sortableChildren=!0,GAME.stage.addChild(this.background),this.content=new PIXI.Container,this.content.sortableChildren=!0,this.content.zIndex=42,GAME.stage.addChild(this.content),this.setupMenuButton(),this.setupOverlay(),this.setupTutorial(),this.setupAlert()}get fail(){return this.nbErrors===this.nbLives}setupLives(){this.lives=new PIXI.Container,this.lives.position.set(this.width-30,30),this.lives.zIndex=24,this.content.addChild(this.lives);for(let t=0;t<this.nbLives;t++){const e=new PIXI.Container;e.y=42*t,this.lives.addChild(e);const r=new Kv("syringe",{width:42});e.addChild(r);const i=new Kv("crossed",{width:36});i.alpha=0,e.addChild(i)}}updateLives(){this.lives.children.filter((t,e,r)=>r.length-e<=this.nbErrors).forEach(t=>{t.getChildAt(0).alpha=.5,t.getChildAt(1).alpha=1})}setupMenuButton(){this.menuButton=new pv({target:GAME.view}),this.menuButton.$on("click",()=>GAME.goToState("menu"))}setupOverlay(){this.overlay=(new PIXI.Graphics).beginFill(16777215).drawRect(0,0,this.width,this.height).endFill(),GAME.stage.addChild(this.overlay),this.overlay.alpha=0,this.overlay.zIndex=101}setupTutorial(){this.tutorial=new Hv({target:GAME.view}),this.tutorial.$on("close",()=>{this.tutorial.visible=!1,this.setupLives(),this.start()})}showTutorial(){const t=zv.levels[this.index];this.tutorial.$set({title:t.title,slides:t.tutorial,more:t.more}),this.tutorial.visible=!0}setupAlert(){this.alert=new zg({target:GAME.view}),this.alert.$on("close",()=>{this.win?(this.index+1===4?GAME.goToState("outro"):GAME.goToLevel(this.index+1),setTimeout(()=>this.alert.$destroy(),500)):(this.clear(),this.setupLives(),this.start(),this.alert.visible=!1)})}showAlert(t){const e=zv.levels[this.index];this.alert.$set({key:t||(this.win?"win":"fail"),...e}),this.alert.visible=!0}handleWin(){GAME.sounds.fanfare.playing()||(GAME.sounds.fanfare.play(),this.showAlert(),this.launchConfettis(),GAME.finished||localStorage.setItem("level",this.index+1))}handleFail(t){GAME.sounds.fail.playing()||(GAME.sounds.fail.play(),this.showAlert(t))}launchConfettis(){const t=[4286945,11393254,3050327,16753920,11674146,16766720,15308410,14524637],e=new PIXI.Container;e.name="confettis",e.zIndex=1e3,GAME.stage.addChild(e);for(let r=0;r<256;r++){const i=t[r%t.length],n=~~(20+Math.random()*(this.width-40)),s=~~(20-Math.random()*this.height),o=~~(8+4*Math.random())/10,a=(new PIXI.Graphics).beginFill(i).drawRect(0,0,10,10).endFill();a.position.set(n,s),a.scale.set(o),a.skew.y=r%10*.1,a.rotation=.1*(r%5+1),e.addChild(a)}const r=t=>{e.children.forEach((r,i)=>{r.y+=5*t,r.skew.y+=.02*(i%5+1)*(i%2==0?1:-1)*t,r.rotation+=.01*(i%5+1)*(i%2==0?1:-1)*t,r.y>this.height&&e.removeChild(r)})};GAME.ticker.add(r),setTimeout(()=>GAME.ticker.remove(r),8e3)}clear(){this.content.removeChildren()}destroy(){this.menuButton.$destroy(),this.tutorial.$destroy(),this.alert.$destroy(),this.tickBackground&&GAME.ticker.remove(this.tickBackground),this.tick&&GAME.ticker.remove(this.tick),GAME.stage.removeChildren()}}var qv={levels:[{nucleotides:[{type:"A",color:"seagreen",hex:3050327},{type:"U",color:"firebrick",hex:11674146},{type:"C",color:"royalblue",hex:4286945},{type:"G",color:"gold",hex:16766720}]},{spikeTemplates:[[{x:.4,y:1},{x:.4,y:.4},{x:.2,y:0},{x:.8,y:0},{x:.6,y:.4},{x:.6,y:1}],[{x:.4,y:1},{x:.4,y:.4},{x:.2,y:0},{x:.4,y:0},{x:.5,y:.15},{x:.6,y:0},{x:.8,y:0},{x:.6,y:.4},{x:.6,y:1}],[{x:.4,y:1},{x:.4,y:.3},{x:.2,y:.3},{x:.2,y:0},{x:.4,y:0},{x:.5,y:.15},{x:.6,y:0},{x:.8,y:0},{x:.8,y:.3},{x:.6,y:.3},{x:.6,y:1}]],aminoAcidsColors:[4286945,11393254,3050327,16753920,11674146,16766720,15308410,14524637]},{hairCombinations:{type:{m:{white:["straight","straight","straight","curly"],asian:["straight"],mixed:["curly"],black:["curly"]},f:{white:["straight","curly","curly"],asian:["straight","straight","curly"],mixed:["curly","afro","afro"],black:["curly","afro","afro","afro"]}},color:{white:[1776411,1776411,9127187,9127187,16766720,16766720,16766720,16747520],asian:[1776411,1776411,1776411,9127187],mixed:[1776411,1776411,1776411,9127187],black:[1776411],midAged:6908265,old:14474460}},clothesColors:{shirt:[16777200,14596231,8421376,13458524,4286945,3050327,16753920,11674146,10040012,1776411],pants:[7833753,13468991,4286945,128,8388608,1776411],shoes:[16777200,2003199,9127187,11674146,1776411]}}]};var Vv=[class extends Yv{constructor(){super(),this.index=0,this.nucleotides=qv.levels[this.index].nucleotides,this.nbStrandsTotal=HACK?1:5,this.nbLives=HACK?1:5}launch(){this.setupBackground(),this.showTutorial()}get win(){return!this.fail&&0===this.strands.children.length}setupBackground(){this.background.zIndex=101,this.setupButtons()}setupButtons(){const t=(this.width-40)/1024;this.sequencer=new Kv("rna-sequencer",{scale:t,x:.5*this.width,anchorY:1,y:this.height}),this.background.addChild(this.sequencer),this.nucleotides.forEach((e,r)=>{const i=new PIXI.Container;i.x=20+(276+157*r)*t,i.y=this.height-.5*this.sequencer.height,this.background.addChild(i);const n=(new PIXI.Graphics).beginFill(e.hex,.5).drawRect(-78.5*t,-78.5*t,157*t,157*t).endFill();n.alpha=0,i.addChild(n),i.interactive=!0,i.buttonMode=!0,i.on("click",t=>this.handleClick(t,e.type)),window.TouchEvent&&i.on("touchstart",t=>this.handleClick(t,e.type))}),this.zone=(new PIXI.Graphics).beginFill(3329330,.2).drawRect(28,this.height-2*this.sequencer.height,this.width-40-16,this.sequencer.height).endFill(),this.background.addChild(this.zone)}start(){this.nbErrors=0,this.strands=new PIXI.Container,this.strands.name="strands",this.content.addChild(this.strands);let t=1;this.generateStrand(),this.interval=setInterval(()=>{if(t>=this.nbStrandsTotal)return clearInterval(this.interval);t++,this.generateStrand()},4e3),this.tick=t=>{const e=this.strands.children[0].getChildByName("nucleotides").children;for(const t of e)if(!t.sequenced&&t.getBounds().y>this.height-.5*this.sequencer.height)return t.sequenced=!0,!this.fail&&this.handleError();if(this.strands.children.forEach(e=>{e.y+=1.8*t,e.getBounds().y>this.height-.5*this.sequencer.height&&this.strands.removeChild(e)}),0===this.strands.children.length)return GAME.ticker.remove(this.tick),this.handleWin()},GAME.ticker.add(this.tick)}generateStrand(){const t=this.strands.children.length>0?~~(2+2*Math.random()):2,e=new PIXI.Container;e.position.x=~~(.3*this.width+Math.random()*this.width*.4),e.position.y=-100,this.strands.addChild(e);const r=new PIXI.Container;e.addChild(r);for(let e=0;e<t;e++){const t=new Kv("rna",{width:96});t.y=-e*t.height*8/9,r.addChild(t)}const i=new PIXI.Container;i.name="nucleotides",e.addChild(i);for(let e=0;e<2*(t-1)+1;e++){const{type:t,color:n,hex:s}=this.nucleotides[~~(4*Math.random())],o=new PIXI.Text(t,new PIXI.TextStyle({fontFamily:"Gotham",fontWeight:"bold",fontSize:55,fill:n}));o.anchor.set((e+1)%2,.5),o.y=-e*r.children[0].height*.5*8/9,o.type=t,o.hex=s,o.sequenced=!1,i.addChild(o)}}handleClick(t,e){if(!this.strands||0===this.strands.children.length)return;const r=this.strands.children[0].getChildByName("nucleotides").children;for(const t of r)if(Ig(t,this.zone)&&e===t.type)return t.sequenced=!0,void this.handleSuccess();this.handleError()}async handleSuccess(){GAME.sounds.success.play(),await Cg(1),this.win&&(GAME.ticker.remove(this.tick),this.handleWin())}async handleError(){this.nbErrors++,GAME.sounds.error.play(),this.updateLives(),this.overlay.tint=10485760,this.overlay.alpha=.5,await Cg(1),this.overlay.alpha=0,this.fail&&!this.win&&(GAME.ticker.remove(this.tick),clearInterval(this.interval),this.handleFail(),await Promise.all(this.strands.children.map(t=>GSAP.to(t,{pixi:{blur:20,alpha:0},duration:1}))),this.content.removeChild(this.strands))}},class extends Yv{constructor(){super(),this.index=1,this.markerRadius=14,this.spikeTemplates=qv.levels[this.index].spikeTemplates,this.aminoAcidsColors=qv.levels[this.index].aminoAcidsColors,this.nbLives=HACK?1:3}launch(){this.setupBackground(),this.showTutorial()}get win(){return this.nbProteins===(HACK?1:5)}setupBackground(){for(let t=0;t<50;t++){const t=Math.random(),e=new PIXI.filters.BlurFilter;e.blur=Mg(t,0,1,12,4);const r=new PIXI.Container;r.x=Math.random()*this.width,r.y=Math.random()*this.height,r.filters=[e],this.background.addChild(r);const i=Mg(t,0,1,5,30),n=(new PIXI.Graphics).beginFill(65535).drawCircle(0,0,i).endFill();n.alpha=.2,r.addChild(n);const s=(new PIXI.Graphics).beginFill(43424).drawCircle(0,0,.8*i).endFill();s.alpha=.3,r.addChild(s)}this.tickBackground=t=>{this.background.children.forEach(e=>{e.x+=(2*Math.random()-1)*t,e.y+=(2*Math.random()-1)*t,e.x+.5*e.width<0?e.x=this.width+.5*e.width:e.x-.5*e.width>this.width?e.x=.5*-e.width:e.y+.5*e.height<0?e.y=this.height+.5*e.height:e.y-.5*e.height>this.height&&(e.y=.5*-e.height)})},GAME.ticker.add(this.tickBackground)}start(){this.spikeTemplateIndex=0,this.nbProteins=0,this.nbErrors=0,this.setupDrawingBoard(),this.switchBlueprint(),this.generateMarkers()}setupDrawingBoard(){this.drawingBoard=new PIXI.Container,this.drawingBoard.name="drawingBoard",this.content.addChild(this.drawingBoard),this.drawingBoard.addChild((new PIXI.Graphics).drawRect(0,.5*this.height,this.width,.5*this.height)),this.drawingBoard.interactive=!0,this.drawingBoard.hitArea=new PIXI.Rectangle(0,.5*this.height,this.width,.5*this.height);let t=[],e=!1,r=!1;const i={width:5,color:43424,cap:PIXI.LINE_CAP.ROUND,join:PIXI.LINE_JOIN.ROUND},n=i=>{if(r)return;e=!0;const{x:n,y:s}=i.data.global;t.push({x:n,y:s}),this.trace=new PIXI.Container,this.trace.zIndex=42,this.trace.pivot.set(.5),this.drawingBoard.addChild(this.trace)},s=n=>{if(!e||r)return;const{x:s,y:a}=n.data.global,h=new PIXI.Graphics;h.lineStyle(i),h.moveTo(t.last().x,t.last().y),h.lineTo(s,a),t.push({x:s,y:a,line:h}),this.trace.addChild(h),this.markers.children.forEach(async(t,e)=>{((t,e)=>{const{x:r,y:i}=t instanceof PIXI.DisplayObject?{x:t.getBounds().x+t.getBounds().width/2,y:t.getBounds().y+t.getBounds().height/2}:t,{x:n,y:s}=e instanceof PIXI.DisplayObject?{x:e.getBounds().x+t.getBounds().width/2,y:e.getBounds().y+e.getBounds().height/2}:e;return Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2))})(t,{x:s,y:a})>1.2*this.markerRadius||(e>0?o():(this.markers.removeChild(t),GAME.sounds.pop.play()))})},o=async()=>{if(!e||r)return;if(e=!1,r=!0,setTimeout(()=>r=!1,2e3),0===t.length)return;const n=0===this.markers.children.length;if(n){this.handleSuccess();const e=new PIXI.Graphics;e.lineStyle(i),e.moveTo(t.last().x,t.last().y),e.lineTo(t[0].x,t[0].y),this.trace.addChild(e)}else this.handleError();t=[],await Cg(1),this.spikeTemplateIndex=~~(Math.random()*this.spikeTemplates.length),this.switchBlueprint(),this.generateMarkers(),n?GSAP.to(this.trace,{pixi:{x:"+="+this.width},duration:.5}).then(()=>this.drawingBoard.removeChild(this.trace)):GSAP.to(this.trace,{pixi:{blur:10,alpha:0},duration:1}).then(()=>this.drawingBoard.removeChild(this.trace))};this.drawingBoard.on("mousedown",n),window.TouchEvent&&this.drawingBoard.on("touchstart",n),this.drawingBoard.on("mousemove",s),window.TouchEvent&&this.drawingBoard.on("touchmove",s),this.drawingBoard.on("mouseup",o),window.TouchEvent&&this.drawingBoard.on("touchend",o)}async switchBlueprint(){const t=this.content.getChildByName("blueprint");if(t&&(await GSAP.to(t,{pixi:{x:1.5*this.width,rotation:45},duration:.75}),this.content.removeChild(t)),this.win||this.fail)return;const e=new PIXI.Container;e.name="blueprint",e.position.set(.5*-this.width,.4*this.width),e.rotation=-Math.PI/4,this.content.addChild(e),e.addChild(new Kv("blueprint-background",{width:.7*this.width})),e.addChild(new Kv(`spike-${this.spikeTemplateIndex}`,{width:.7*this.width})),GSAP.to(e,{pixi:{x:.5*this.width,rotation:0},duration:.75})}async generateMarkers(){if(this.markers?(await Promise.all(this.markers.children.map(t=>(t.animation.kill(),GSAP.to(t,{pixi:{y:this.height+2*this.markerRadius},duration:.5,delay:.5*Math.random()})))),this.content.removeChild(this.markers)):await Cg(1),this.win||this.fail)return;this.markers=new PIXI.Container,this.markers.name="markers",this.content.addChild(this.markers);const t=this.drawingBoard.getBounds(),e=20,r=0,i=50,n=0;this.spikeTemplates[this.spikeTemplateIndex].forEach((s,o)=>{const a=new PIXI.Container;a.position.set(t.x+n+s.x*(t.width-n-r),this.height+2*this.markerRadius),a.name=`marker-${o}`,this.markers.addChild(a),GSAP.to(a,{pixi:{y:t.y+e+s.y*(t.height-e-i)},duration:.5,delay:.5*Math.random()}),a.animation=GSAP.to(a,{pixi:{scale:1.2},duration:1,repeat:-1,yoyo:!0,delay:Math.random()});const h=(new PIXI.Graphics).beginFill(this.aminoAcidsColors.random()).drawCircle(0,0,this.markerRadius).endFill();a.addChild(h);const u=new Kv("amino-acid-highlight",{width:2*this.markerRadius,height:2*this.markerRadius});a.addChild(u)})}async handleSuccess(){this.nbProteins++,GAME.sounds.success.play(),await Cg(1.5),this.win&&this.handleWin()}async handleError(){this.nbErrors++,GAME.sounds.error.play(),this.updateLives(),this.overlay.tint=10485760,this.overlay.alpha=.5,await Cg(1),this.overlay.alpha=0,await Cg(.5),this.fail&&this.handleFail()}},class extends Yv{constructor(){super(),this.index=2,this.hairCombinations=qv.levels[this.index].hairCombinations,this.clothesColors=qv.levels[this.index].clothesColors,this.randomFailed=!1}get win(){return this.nbControlRevealed/this.nbRevealed>.9}get infectedPersons(){return this.persons&&this.persons.filter(t=>t.infected)}showInfo(t,e){this.info=new nv({target:GAME.view,props:{text:zv.levels[this.index].infos[t]}}),this.info.$on("close",()=>{this.info.visible=!1,setTimeout(()=>this.info.$destroy(),1e3),e()}),this.info.visible=!0}launch(){this.showTutorial()}start(){this.nbRevealed=0,this.nbControlRevealed=0,this.padding={top:100,right:20,bottom:20,left:20},this.setupClock(),!this.randomFailed&&this.setupMedicalFile(),this.setupGroup()}setupClock(){this.clock=new PIXI.Container,this.clock.zIndex=101,this.clock.position.set(.5*-this.width,.5*this.height),this.content.addChild(this.clock);const t=new Kv("clock",{scale:.75});this.clock.addChild(t);const e=new Kv("clock-hand-hour",{scale:.75,anchorY:1});e.name="hour-hand",this.clock.addChild(e);const r=new Kv("clock-hand-min",{scale:.75,anchorY:1});r.name="min-hand",this.clock.addChild(r)}async showClock(t){GSAP.to(this.clock,{x:.5*this.width,duration:1}),GSAP.to(this.clock.getChildByName("hour-hand"),{rotation:Math.PI*t*2/3,duration:t,ease:"power2.inOut"}),GSAP.to(this.clock.getChildByName("min-hand"),{rotation:Math.PI*t*2,duration:t,ease:"power2.inOut"}),await GSAP.to(this.clock,{x:1.5*this.width,duration:1,delay:t})}setupMedicalFile(){this.medicalFile=new PIXI.Container,this.medicalFile.zIndex=101,this.medicalFile.position.set(.5*-this.width,.5*this.height),this.medicalFile.angle=-45,this.content.addChild(this.medicalFile);this.medicalFile.addChild(new Kv("medical-file-choice",{scale:.75}));const t=(new PIXI.Graphics).beginFill(16711680).drawRect(36,85.5,36,36).endFill();t.pivot.set(.5*this.medicalFile.width,.5*this.medicalFile.height),t.alpha=0,t.interactive=!0,t.buttonMode=!0,this.medicalFile.addChild(t);const e=new Kv("tick",{scale:.75,x:39});e.pivot.set(.5*this.medicalFile.width,.5*this.medicalFile.height),e.alpha=0,this.medicalFile.addChild(e);const r=(new PIXI.Graphics).beginFill(16711680).drawRect(36,181.5,36,36).endFill();r.pivot.set(.5*this.medicalFile.width,.5*this.medicalFile.height),r.alpha=0,r.interactive=!0,r.buttonMode=!0,this.medicalFile.addChild(r);let i=0,n=0;const s=async t=>{i++,t&&n++,this.chosenPerson.placebo=t,e.y=t?151.5:55.5,e.alpha=1,await Cg(.5),await GSAP.to(this.medicalFile,{pixi:{x:1.5*this.width,rotation:45},duration:.5}),this.medicalFile.x=.5*-this.width,this.medicalFile.angle=-45,e.alpha=0,i<(HACK?2:6)||(this.content.removeChild(this.medicalFile),n===i/2?(GAME.sounds.success.play(),await Cg(1),this.vaccinate()):(GAME.sounds.error.play(),await Cg(1),this.handleFail("failTransparency")))};t.on("mousedown",()=>s(!1)),window.TouchEvent&&t.on("touchstart",()=>s(!1)),r.on("mousedown",()=>s(!0)),window.TouchEvent&&r.on("touchstart",()=>s(!0))}setupGroup(){this.scale=5e-4*this.width,this.persons=[];for(let t=0;t<42;t++){const t=["m","f"].random(),e=["young","young","young","midAged","midAged","old"].random();this.persons.push(this.getRandomPerson(t,e))}const t=this.persons[0].height;this.group=new PIXI.Container,this.group.position.set(.5*this.width,.5*this.height),this.group.pivot.x=.5*this.width,this.group.pivot.y=.5*(this.padding.top+this.height-this.padding.bottom),this.group.scale.set(this.randomFailed?1:1.8),this.group.zIndex=42,this.content.addChild(this.group);const e=(this.width-this.padding.left-this.padding.right)/7,r=(this.height-this.padding.top-this.padding.bottom-t)/5,i=.5*(this.padding.top-this.padding.bottom);for(let t=0;t<6;t++)for(let n=0;n<7;n++){const s=this.persons[7*t+n];if(s.x=this.padding.left+(n+.5)*e,s.y=this.padding.top+t*r+i,s.zIndex=7*t+n,this.group.addChild(s),!this.randomFailed)if(s.isInMiddle=t>=2&&t<=3&&n>=2&&n<=4,s.isInMiddle){s.interactive=!0,s.buttonMode=!0;const t=new Kv("syringe-rotated",{width:32,anchorX:1,x:.5*-s.width+20*this.scale-10,anchorY:1,y:280*this.scale-10});t.alpha=0,t.name="syringe",s.addChild(t);const e=async()=>{s.removeAllListeners(),this.chosenPerson=s,GSAP.to(this.medicalFile,{pixi:{x:.5*this.width,rotation:0},duration:.5})};s.on("mousedown",e),window.TouchEvent&&s.on("touchstart",e)}else s.y+=10,s.alpha=0}this.randomFailed?setTimeout(()=>{this.assignControl(),this.getPersonsInfected()},1e3):this.group.pivot.y+=.5*(this.padding.top-this.padding.bottom)}async vaccinate(){const t=this.persons.filter(t=>t.isInMiddle);for(const e of t){const t=e.getChildByName("syringe");await GSAP.to(t,{alpha:1,x:"+=10",y:"+=10",duration:.25}),await Cg(.5),GSAP.to(t,{alpha:0,x:"-=10",y:"-=10",duration:.25}).then(()=>e.removeChild(t))}await Cg(1),this.assignControl(),this.zoomOut()}assignControl(){this.persons.filter(t=>void 0===t.placebo).shuffle().forEach((t,e,r)=>t.placebo=e<.5*r.length)}async zoomOut(){await GSAP.to(this.group,{pixi:{scale:1,pivotY:`-=${.5*(this.padding.top-this.padding.bottom)}`},duration:1}),await Promise.all(this.persons.filter(t=>0===t.alpha).map(t=>GSAP.to(t,{alpha:1,y:"-=10",delay:2*Math.random(),duration:.5,ease:"power2.InOut"}))),await Cg(1),this.randomFailed?this.getPersonsInfected():this.showInfo(0,()=>this.getPersonsInfected())}async getPersonsInfected(){const t=this.persons.filter(t=>t.placebo),e=this.persons.filter(t=>!t.placebo);if(this.randomFailed){for(let e=0;e<11;e++){let e=t.random();for(;e.infected;)e=t.random();e.infected=!0}e.random().infected=!0}else for(let r=0;r<6;r++){let r=t.random();for(;r.infected;)r=t.random();r.infected=!0;let i=e.random();for(;i.infected;)i=e.random();i.infected=!0}this.persons.forEach(t=>{if(t.infected){const e=new Kv("bubble-virus",{width:32,x:0,y:10,anchorY:1});e.zIndex=99,e.alpha=0,e.name="bubble",t.addChild(e);const r=`medical-file-${t.placebo?"placebo":"vax"}`,i=new Kv(r,{width:32,y:t.width/256*180+10,anchorY:0});i.zIndex=99,i.alpha=0,i.name="medical-file",t.addChild(i)}});this.infectedPersons.forEach(t=>{GSAP.to(t.getChildByName("bubble"),{alpha:1,y:-4,duration:.5,delay:1+4*Math.random()})}),setTimeout(()=>GAME.sounds.cough1.play(),2e3),setTimeout(()=>GAME.sounds.cough2.play(),4e3),await this.showClock(6),this.rearrangeInfectedPersons()}async rearrangeInfectedPersons(){const t=this.infectedPersons.length/4,e=1.25*this.infectedPersons[0].height,r=(this.width-this.padding.left-this.padding.right)/4,i=(this.height-this.padding.top-this.padding.bottom-e)/(t-1),n=this.padding.top-this.padding.bottom-34,s=Array.from({length:this.infectedPersons.length},(t,e)=>({x:this.padding.left+(e%4+.5)*r,y:this.padding.top+~~(e/4)*i+n,zIndex:e}));await Promise.all(this.persons.map(t=>{if(t.infected){const e=s.filter(t=>!t.taken).reduce((e,r)=>e?Pg(t,r)<Pg(t,e)?r:e:r,null);return e.taken=!0,t.zIndex=e.zIndex,setTimeout(()=>this.group.sortChildren(),3e3),GSAP.to(t,{pixi:{x:e.x,y:e.y,scale:1.25},delay:3,duration:.5,ease:"power2.Out"})}return GSAP.to(t,{pixi:{blur:10,alpha:0},delay:2*Math.random(),duration:.5}).then(()=>this.group.removeChild(t))})),await Cg(1),this.randomFailed?this.setupReveal():this.showInfo(1,()=>this.setupReveal())}setupReveal(){const t=t=>{GAME.sounds.pop.play(),GSAP.to(t.getChildByName("medical-file"),{alpha:1,y:"-=10",duration:.5}),this.nbRevealed++,t.placebo&&this.nbControlRevealed++,this.nbRevealed===this.infectedPersons.length&&setTimeout(()=>{this.win?this.handleWin():(this.handleFail(),this.randomFailed=!0)},1e3)};this.infectedPersons.forEach(e=>{e.interactive=!0,e.buttonMode=!0,e.on("mousedown",()=>t(e)),window.TouchEvent&&e.on("touchstart",()=>t(e))})}async switchRandomPersons(){for(let t=0;t<12;t++){const t=this.persons.random(),e=this.persons.filter(e=>e.zIndex!==t.zIndex).random();t.zIndex+=e.zIndex,e.zIndex=t.zIndex-e.zIndex,t.zIndex-=e.zIndex,this.group.sortChildren(),GSAP.to(t,{x:e.x,y:e.y,duration:.5}),GSAP.to(e,{x:t.x,y:t.y,duration:.5}),await Cg(.5)}}getRandomPerson(t,e){const r=["white","white","white","asian","asian","mixed","black","black"].random(),i=this.hairCombinations.type[t][r].random(),n="young"===e?this.hairCombinations.color[r].random():this.hairCombinations.color[e],s="m"===t&&"young"!==e&&Math.random()<.25,o=this.clothesColors.shirt.random(),a=this.clothesColors.pants.filter(t=>t!==o).random(),h=this.clothesColors.shoes.filter(t=>t!==a).random(),u=new PIXI.Container,l=new Kv(`arms-${t}-${r}`,{scale:this.scale,anchorY:0,y:246*this.scale});u.addChild(l);const c=new Kv(`pants-${t}`,{scale:this.scale,anchorY:0,y:420*this.scale,tint:a});u.addChild(c);const d=new Kv("shoes",{scale:this.scale,anchorY:0,y:706*this.scale,tint:h});u.addChild(d);const p=new Kv(`shirt-${t}`,{scale:this.scale,anchorY:0,y:165*this.scale,tint:o});u.addChild(p);const f=new Kv(`face-${t}-${r}`,{scale:this.scale,anchorY:0,y:4*this.scale});u.addChild(f);const m=new Kv("mask",{scale:this.scale,anchorY:0,y:92*this.scale});if(u.addChild(m),!s){const e=new Kv(`hair-${t}-${i}`,{scale:this.scale,anchorY:0,y:"afro"===i?38*-this.scale:0,tint:n});u.addChild(e)}return u}},class extends Yv{constructor(){super(),this.index=3,this.nbLives=HACK?1:3,this.randomFailed=!1}launch(){this.setupBackground(),this.showTutorial()}get win(){return this.nbVialsFilled===(HACK?2:3)}get vialBbox(){const t=this.vial.getBounds();return{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}}get volumeIsCorrect(){return this.volume>=.9&&this.volume<=.95}setupBackground(){this.conveyorBelt=new Kv("conveyor-belt",{width:2*this.width,anchorX:1,x:this.width,anchorY:1,y:this.height}),this.background.addChild(this.conveyorBelt);const t=new PIXI.Container;t.zIndex=42,this.background.addChild(t),t.addChild(new Kv("vaccine-machine",{width:256,anchorY:0,x:.5*this.width}))}start(){this.nbVialsFilled=0,this.nbErrors=0,this.setupVial(),this.setupButton()}async setupVial(){this.vial=new PIXI.Container,this.vial.name="vial",this.content.addChild(this.vial);const t=new Kv("vaccine-serum",{width:256});t.name="serum",this.vial.addChild(t);const e=new Kv("vaccine-vial",{width:256});this.vial.addChild(e),this.cap=new Kv("vaccine-cap",{width:150,anchorY:1,x:.5*this.width,y:0}),this.cap.zIndex=42,this.content.addChild(this.cap);const r=new PIXI.Text(localStorage.getItem("lab"),new PIXI.TextStyle({fontFamily:"Gotham",fontWeight:"bold",align:"center",fontSize:16,fill:"black"}));r.anchor.set(.5,.5),this.vial.addChild(r),this.vial.position.set(.5*this.width,this.height-.4*this.vial.height-.5*this.conveyorBelt.height),this.mask=(new PIXI.Graphics).drawRect(0,0,this.width,this.vial.height),this.mask.scale.y=0,this.mask.position.y=this.vialBbox.bottom,this.content.addChild(this.mask),t.mask=this.mask,this.vial.x=.5*-this.width,GSAP.to(this.conveyorBelt,{x:2*this.width,duration:1}),await GSAP.to(this.vial,{x:.5*this.width,duration:1}),this.conveyorBelt.x=this.width}setupButton(){this.button=(new PIXI.Graphics).beginFill(0).drawCircle(.5*this.width,63,30).endFill(),this.button.alpha=0,this.content.addChild(this.button);let t=!1,e=!1;const r=async()=>{e=!1,this.flow.visible=!0,await GSAP.to(this.flow.scale,{y:1,duration:.25,ease:"linear"}),t=!0},i=()=>{e||(t=!1,e=!0,this.flow.visible=!1,this.volumeIsCorrect?this.handleSuccess():this.handleError(),this.switchVial())};this.button.interactive=!0,this.button.buttonMode=!0,this.button.on("mousedown",r),window.TouchEvent&&this.button.on("touchstart",r),this.button.on("mouseup",i),window.TouchEvent&&this.button.on("touchend",i),this.flow=(new PIXI.Graphics).beginFill(16765286,.75).drawRect(.5*this.width-20,0,40,this.vialBbox.bottom).endFill(),this.flow.scale.y=0,this.background.addChild(this.flow),this.volume=0,this.tick=e=>{t&&(this.mask.scale.y=this.volume,this.mask.position.y=this.vialBbox.bottom-this.volume*this.vial.height,this.flow.scale.y=1-this.vial.height/this.vialBbox.bottom*this.volume,this.volume>=1&&i(),this.volume+=.005*e)},GAME.ticker.add(this.tick)}async switchVial(){if(this.button.interactive=!1,this.volumeIsCorrect&&await GSAP.to(this.cap,{y:this.vialBbox.top+45,duration:.5}),GSAP.to(this.conveyorBelt,{x:2*this.width,duration:1}).then(()=>this.conveyorBelt.x=this.width),await Promise.all([this.cap,this.vial].map(t=>GSAP.to(t,{x:1.5*this.width,duration:1}))),!this.randomFailed&&this.nbVialsFilled===(HACK?1:2))return this.background.removeChild(this.flow),this.handleFail("randomFail"),void(this.randomFailed=!0);this.win||this.fail||(this.volume=0,this.mask.scale.y=0,this.mask.position.y=this.vialBbox.bottom,this.vial.x=.5*-this.width,this.cap.position.set(.5*this.width,0),GSAP.to(this.conveyorBelt,{x:2*this.width,duration:1}).then(()=>this.conveyorBelt.x=this.width),await GSAP.to(this.vial,{x:.5*this.width,duration:1}),this.button.interactive=!0)}async handleSuccess(){this.nbVialsFilled++,GAME.sounds.success.play(),await Cg(1),this.win&&(GAME.ticker.remove(this.tick),this.button.interactive=!1,this.handleWin())}async handleError(){this.nbErrors++,GAME.sounds.error.play(),this.updateLives(),this.overlay.tint=10485760,this.overlay.alpha=.5,await Cg(1),this.overlay.alpha=0,this.fail&&(GAME.ticker.remove(this.tick),this.button.interactive=!1,this.background.removeChild(this.flow),this.handleFail())}}],Wv={sprites:["syringe.png","crossed.png","rna.png","rna-sequencer.png","amino-acid-highlight.png","blueprint-background.png","spike-0.png","spike-1.png","spike-2.png","clock.png","clock-hand-min.png","clock-hand-hour.png","arms-m-asian.png","arms-m-black.png","arms-m-mixed.png","arms-m-white.png","arms-f-asian.png","arms-f-black.png","arms-f-mixed.png","arms-f-white.png","face-m-asian.png","face-m-black.png","face-m-mixed.png","face-m-white.png","face-f-asian.png","face-f-black.png","face-f-mixed.png","face-f-white.png","hair-m-straight.png","hair-m-curly.png","hair-f-straight.png","hair-f-curly.png","hair-f-afro.png","pants-m.png","pants-f.png","shirt-m.png","shirt-f.png","shoes.png","mask.png","tick.png","medical-file-choice.png","syringe-rotated.png","bubble-virus.png","medical-file-vax.png","medical-file-placebo.png","vaccine-machine.png","conveyor-belt.png","vaccine-vial.png","vaccine-serum.png","vaccine-cap.png"],sounds:["success.mp3","error.mp3","fanfare.mp3","fail.mp3","pop.mp3","cough1.mp3","cough2.mp3"]};window.HACK=!1,window.NODELAY=!1,window.SKIP_MENU=!1;class Zv{constructor(t,e){window.PIXI=pd,this.app=new va({view:e.querySelector("canvas"),width:t,height:16*t/9,backgroundColor:14483453,antialias:!0,autoDensity:!0,resolution:2,failIfMajorPerformanceCaveat:!0}),this.view=e,this.overlay=this.view.querySelector(".overlay"),this.width=this.app.renderer.width/this.app.renderer.resolution,this.height=this.app.renderer.height/this.app.renderer.resolution,this.stage=this.app.stage,this.ticker=this.app.ticker,this.resources=this.app.loader.resources,this.stage.sortableChildren=!0,this.ticker.maxFPS=120,this.level=null,q_.registerPlugin(wg),wg.registerPIXI(pd),window.GSAP=q_}get finished(){return+localStorage.getItem("level")===Vv.length}async preload(){return new Promise(async t=>{const e=(new Date).getTime(),r=await fetch("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/vaccinations.json"),i=await r.json();this.nbVaccinations=~~(i.find(t=>"OWID_WRL"===t.iso_code).data.last().people_vaccinated/1e6),await new Ag("Gotham",{weight:"bold"}).load(),Howler.volume(.2),this.sounds={},Object.entries(Wv).forEach(([t,e])=>{"sounds"!==t?e.forEach(e=>{const r=`${t}/${e}`;this.app.loader.add(r.replace(".png",""),r)}):e.forEach(t=>{const e=t.substring(0,t.indexOf("."));this.sounds[e]=new Howl({src:[`sounds/${t}`]})})}),this.app.loader.load(),this.app.loader.onComplete.add(()=>{const r=(new Date).getTime()-e,i=Math.max(0,3e3-r);setTimeout(t,NODELAY?0:i)})})}start(){this.goToLevel(0)}goToLevel(t){this.overlay.style.opacity=1,setTimeout(()=>{this.level&&this.level.destroy(),this.level=new Vv[t]},500),setTimeout(()=>{this.overlay.style.opacity=0,this.level.launch()},1e3)}goToState(t){this.overlay.style.opacity=1,setTimeout(()=>{this.level&&this.level.destroy()},500),setTimeout(()=>{this.overlay.style.opacity=0,this.setState(t)},1e3)}pause(){this.ticker.stop()}unpause(){this.ticker.start()}}class Kv{constructor(t,e={}){const r=new gl(GAME.resources["sprites/"+t].texture);return e.scale?(r.width*=e.scale,r.height*=e.scale):(r.height=e.height||(e.width?e.width/r.width*r.height:r.height),r.width=e.width||r.width),r.x=e.x||r.x,r.y=e.y||r.y,r.angle=e.rotation||0,r.name=e.name,r.anchor.set(void 0!==e.anchorX?e.anchorX:.5,void 0!==e.anchorY?e.anchorY:.5),r.tint=e.tint||16777215,r}}function Jv(t,e,r){const i=t.slice();return i[5]=e[r],i}function Qv(t,e,r){const i=t.slice();return i[2]=e[r],i}function ty(t){let e;const r=new lv({props:{style:"text-align: center;",$$slots:{default:[oy]},$$scope:{ctx:t}}});return{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};257&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function ey(e){let r,i=Dg(e[2].items)+"";return{c(){r=b("b")},m(t,e){g(t,r,e),r.innerHTML=i},p:t,d(t){t&&v(r)}}}function ry(t){let e,r=t[2].items,i=[];for(let e=0;e<r.length;e+=1)i[e]=iy(Jv(t,r,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=E()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);g(t,e,r)},p(t,n){if(0&n){let s;for(r=t[2].items,s=0;s<r.length;s+=1){const o=Jv(t,r,s);i[s]?i[s].p(o,n):(i[s]=iy(o),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}},d(t){y(i,t),t&&v(e)}}}function iy(e){let r,i,n,s=Dg(e[5])+"";return{c(){r=b("b"),i=T(),n=b("br")},m(t,e){g(t,r,e),r.innerHTML=s,g(t,i,e),g(t,n,e)},p:t,d(t){t&&v(r),t&&v(i),t&&v(n)}}}function ny(t){let e,r,i,n,s,o,a,h=Dg(t[2].label)+"";let u=function(t,e){return Array.isArray(t[2].items)?ry:ey}(t)(t);const l=new Dv({props:{height:"0.5rem"}});return{c(){e=b("p"),i=T(),n=b("br"),s=T(),u.c(),o=T(),dt(l.$$.fragment),r=new C(h,i)},m(t,h){g(t,e,h),r.m(e),_(e,i),_(e,n),_(e,s),u.m(e,null),g(t,o,h),pt(l,t,h),a=!0},p(t,e){u.p(t,e)},i(t){a||(ot(l.$$.fragment,t),a=!0)},o(t){at(l.$$.fragment,t),a=!1},d(t){t&&v(e),u.d(),t&&v(o),ft(l,t)}}}function sy(t){let e;return{c(){e=x("Retour au menu")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function oy(t){let e,r,i,n,s,o=zv.credits,a=[];for(let e=0;e<o.length;e+=1)a[e]=ny(Qv(t,o,e));const h=t=>at(a[t],1,1,()=>{a[t]=null}),u=new Dv({props:{height:"1rem"}}),l=new Vg({props:{$$slots:{default:[sy]},$$scope:{ctx:t}}});return l.$on("click",t[1]),{c(){e=b("h2"),e.textContent="Crdits",r=T();for(let t=0;t<a.length;t+=1)a[t].c();i=T(),dt(u.$$.fragment),n=T(),dt(l.$$.fragment)},m(t,o){g(t,e,o),g(t,r,o);for(let e=0;e<a.length;e+=1)a[e].m(t,o);g(t,i,o),pt(u,t,o),g(t,n,o),pt(l,t,o),s=!0},p(t,e){if(0&e){let r;for(o=zv.credits,r=0;r<o.length;r+=1){const n=Qv(t,o,r);a[r]?(a[r].p(n,e),ot(a[r],1)):(a[r]=ny(n),a[r].c(),ot(a[r],1),a[r].m(i.parentNode,i))}for(nt(),r=o.length;r<a.length;r+=1)h(r);st()}const r={};256&e&&(r.$$scope={dirty:e,ctx:t}),l.$set(r)},i(t){if(!s){for(let t=0;t<o.length;t+=1)ot(a[t]);ot(u.$$.fragment,t),ot(l.$$.fragment,t),s=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)at(a[t]);at(u.$$.fragment,t),at(l.$$.fragment,t),s=!1},d(t){t&&v(e),t&&v(r),y(a,t),t&&v(i),ft(u,t),t&&v(n),ft(l,t)}}}function ay(t){let e,r,i=t[0]&&ty(t);return{c(){i&&i.c(),e=E()},m(t,n){i&&i.m(t,n),g(t,e,n),r=!0},p(t,[r]){t[0]?i?(i.p(t,r),ot(i,1)):(i=ty(t),i.c(),ot(i,1),i.m(e.parentNode,e)):i&&(nt(),at(i,1,1,()=>{i=null}),st())},i(t){r||(ot(i),r=!0)},o(t){at(i),r=!1},d(t){i&&i.d(t),t&&v(e)}}}function hy(t,e,r){let{visible:i}=e;return t.$set=t=>{"visible"in t&&r(0,i=t.visible)},[i,()=>r(0,i=!1)]}class uy extends gt{constructor(t){super(),_t(this,t,hy,ay,o,{visible:0})}}function ly(t){let e,r,i,s,o,a;return{c(){e=b("div"),r=b("input"),s=T(),o=b("div"),o.innerHTML='<span class="fi fi-spinner-rotate-forward svelte-1h8y0wf"></span>',A(r,"maxlength",i=15),r.required=!0,A(r,"class","svelte-1h8y0wf"),A(o,"class","random-icon svelte-1h8y0wf"),I(o,"spinning",t[2]),A(e,"class","input-container svelte-1h8y0wf")},m(i,n){g(i,e,n),_(e,r),O(r,t[1]),_(e,s),_(e,o),a=[w(r,"input",t[8]),w(o,"click",t[5])]},p(t,e){2&e&&r.value!==t[1]&&O(r,t[1]),4&e&&I(o,"spinning",t[2])},d(t){t&&v(e),n(a)}}}function cy(t){let e,r,i,n=Dg(t[3][t[0]])+"",s=t[0]===t[3].length-1&&ly(t);return{c(){e=b("p"),r=T(),s&&s.c(),i=E(),A(e,"class","svelte-1h8y0wf")},m(t,o){g(t,e,o),e.innerHTML=n,g(t,r,o),s&&s.m(t,o),g(t,i,o)},p(t,r){1&r&&n!==(n=Dg(t[3][t[0]])+"")&&(e.innerHTML=n),t[0]===t[3].length-1?s?s.p(t,r):(s=ly(t),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(t){t&&v(e),t&&v(r),s&&s.d(t),t&&v(i)}}}function dy(t){let e;const r=new Vg({props:{$$slots:{default:[py]},$$scope:{ctx:t}}});return r.$on("click",t[4]),{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};1024&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function py(t){let e;return{c(){e=x("Commencer")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function fy(t){let e,r,i,n;const s=new Kg({props:{$$slots:{default:[cy]},$$scope:{ctx:t}}});let o=t[0]===t[3].length-1&&dy(t);function a(e){t[9].call(null,e)}let h={length:t[3].length};void 0!==t[0]&&(h.index=t[0]);const u=new Iv({props:h});return H.push(()=>ct(u,"index",a)),{c(){dt(s.$$.fragment),e=T(),o&&o.c(),r=T(),dt(u.$$.fragment)},m(t,i){pt(s,t,i),g(t,e,i),o&&o.m(t,i),g(t,r,i),pt(u,t,i),n=!0},p(t,e){const n={};1031&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n),t[0]===t[3].length-1?o?(o.p(t,e),ot(o,1)):(o=dy(t),o.c(),ot(o,1),o.m(r.parentNode,r)):o&&(nt(),at(o,1,1,()=>{o=null}),st());const a={};!i&&1&e&&(i=!0,a.index=t[0],K(()=>i=!1)),u.$set(a)},i(t){n||(ot(s.$$.fragment,t),ot(o),ot(u.$$.fragment,t),n=!0)},o(t){at(s.$$.fragment,t),at(o),at(u.$$.fragment,t),n=!1},d(t){ft(s,t),t&&v(e),o&&o.d(t),t&&v(r),ft(u,t)}}}function my(t){let e;const r=new gv({props:{fixedHeight:!0,$$slots:{default:[fy]},$$scope:{ctx:t}}});return{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,[e]){const i={};1031&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function _y(t,e,r){let{state:i}=e;const n=zv.intro.map(t=>t.replace("{{ NB_VACCINATIONS }}",GAME.nbVaccinations));let s=0,o=Lg(),a=!1;return t.$set=t=>{"state"in t&&r(6,i=t.state)},[s,o,a,n,()=>{localStorage.clear(),localStorage.setItem("lab",o.slice(0,15).toUpperCase()),localStorage.setItem("level",0),GAME.start(),setTimeout(()=>r(6,i="game"),500)},()=>{r(2,a=!0),r(1,o=Lg()),setTimeout(()=>r(2,a=!1),500)},i,void 0,function(){o=this.value,r(1,o)},function(t){s=t,r(0,s)}]}class gy extends gt{constructor(t){super(),_t(this,t,_y,my,o,{state:6})}}function vy(t,e,r){const i=t.slice();return i[7]=e[r],i[9]=r,i}function yy(t){let e;const r=new lv({props:{$$slots:{default:[Ty]},$$scope:{ctx:t}}});return{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};1025&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function by(t){let e,r;function i(...e){return t[5](t[9],...e)}return{c(){e=b("div"),e.innerHTML=`<img src="img/level-${t[9]+1}.png" class="svelte-1hm7uz6"> \n\t\t\t\t`,A(e,"class","level svelte-1hm7uz6"),I(e,"active",t[1]&&t[9]<=+t[1])},m(t,n){g(t,e,n),r=w(e,"click",i)},p(r,i){t=r,2&i&&I(e,"active",t[1]&&t[9]<=+t[1])},d(t){t&&v(e),r()}}}function xy(t){let e;return{c(){e=x("Retour au menu")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function Ty(t){let e,r,i,n,s,o,a=zv.levels,h=[];for(let e=0;e<a.length;e+=1)h[e]=by(vy(t,a,e));const u=new Dv({props:{height:"1rem"}}),l=new Vg({props:{$$slots:{default:[xy]},$$scope:{ctx:t}}});return l.$on("click",t[6]),{c(){e=b("h2"),e.textContent="Niveaux",r=T(),i=b("div");for(let t=0;t<h.length;t+=1)h[t].c();n=T(),dt(u.$$.fragment),s=T(),dt(l.$$.fragment),A(e,"class","svelte-1hm7uz6"),A(i,"class","grid svelte-1hm7uz6")},m(t,a){g(t,e,a),g(t,r,a),g(t,i,a);for(let t=0;t<h.length;t+=1)h[t].m(i,null);g(t,n,a),pt(u,t,a),g(t,s,a),pt(l,t,a),o=!0},p(t,e){if(6&e){let r;for(a=zv.levels,r=0;r<a.length;r+=1){const n=vy(t,a,r);h[r]?h[r].p(n,e):(h[r]=by(n),h[r].c(),h[r].m(i,null))}for(;r<h.length;r+=1)h[r].d(1);h.length=a.length}const r={};1024&e&&(r.$$scope={dirty:e,ctx:t}),l.$set(r)},i(t){o||(ot(u.$$.fragment,t),ot(l.$$.fragment,t),o=!0)},o(t){at(u.$$.fragment,t),at(l.$$.fragment,t),o=!1},d(t){t&&v(e),t&&v(r),t&&v(i),y(h,t),t&&v(n),ft(u,t),t&&v(s),ft(l,t)}}}function Ey(t){let e,r,i=t[0]&&yy(t);return{c(){i&&i.c(),e=E()},m(t,n){i&&i.m(t,n),g(t,e,n),r=!0},p(t,[r]){t[0]?i?(i.p(t,r),ot(i,1)):(i=yy(t),i.c(),ot(i,1),i.m(e.parentNode,e)):i&&(nt(),at(i,1,1,()=>{i=null}),st())},i(t){r||(ot(i),r=!0)},o(t){at(i),r=!1},d(t){i&&i.d(t),t&&v(e)}}}function wy(t,e,r){let{visible:i=!1}=e,{state:n}=e;const s=localStorage.getItem("level"),o=t=>{!s||t>+s||(GAME.goToLevel(t),setTimeout(()=>{r(0,i=!1),r(3,n="game")},500))};return t.$set=t=>{"visible"in t&&r(0,i=t.visible),"state"in t&&r(3,n=t.state)},[i,s,o,n,()=>{GAME.goToState("outro"),setTimeout(()=>{r(0,i=!1)},500)},t=>o(t),()=>r(0,i=!1)]}class Ay extends gt{constructor(t){super(),_t(this,t,wy,Ey,o,{visible:0,state:3})}}function Sy(e){let r,i,n;return{c(){r=b("div"),r.innerHTML='<div class="bar svelte-lh9cy9"><div class="bar-full svelte-lh9cy9"></div></div>',A(r,"class","loading-screen svelte-lh9cy9")},m(t,e){g(t,r,e),n=!0},p:t,i(t){n||(i&&i.end(1),n=!0)},o(t){i=ut(r,sv,{duration:300}),n=!1},d(t){t&&v(r),t&&i&&i.end()}}}class Oy extends gt{constructor(t){super(),_t(this,t,null,Sy,o,{})}}function Ry(t,e,r){const i=t.slice();return i[5]=e[r],i}function Py(t,e,r){const i=t.slice();return i[2]=e[r],i}function Iy(t){let e;const r=new lv({props:{$$slots:{default:[Ny]},$$scope:{ctx:t}}});return{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};257&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function My(e){let r,i=Dg(e[5])+"";return{c(){r=b("p")},m(t,e){g(t,r,e),r.innerHTML=i},p:t,d(t){t&&v(r)}}}function Cy(t){let e,r,i,n,s=Dg(t[2].title)+"",o=t[2].text,a=[];for(let e=0;e<o.length;e+=1)a[e]=My(Ry(t,o,e));const h=new Dv({props:{height:"1rem"}});return{c(){e=b("h3"),r=T();for(let t=0;t<a.length;t+=1)a[t].c();i=T(),dt(h.$$.fragment)},m(t,o){g(t,e,o),e.innerHTML=s,g(t,r,o);for(let e=0;e<a.length;e+=1)a[e].m(t,o);g(t,i,o),pt(h,t,o),n=!0},p(t,e){if(0&e){let r;for(o=t[2].text,r=0;r<o.length;r+=1){const n=Ry(t,o,r);a[r]?a[r].p(n,e):(a[r]=My(n),a[r].c(),a[r].m(i.parentNode,i))}for(;r<a.length;r+=1)a[r].d(1);a.length=o.length}},i(t){n||(ot(h.$$.fragment,t),n=!0)},o(t){at(h.$$.fragment,t),n=!1},d(t){t&&v(e),t&&v(r),y(a,t),t&&v(i),ft(h,t)}}}function Dy(t){let e;return{c(){e=x("Voir le code source")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function Ly(t){let e;return{c(){e=x("Retour au menu")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function Ny(t){let e,r,i,n,s,o,a=zv.makingOf,h=[];for(let e=0;e<a.length;e+=1)h[e]=Cy(Py(t,a,e));const u=t=>at(h[t],1,1,()=>{h[t]=null}),l=new Vg({props:{$$slots:{default:[Dy]},$$scope:{ctx:t}}}),c=new Vg({props:{$$slots:{default:[Ly]},$$scope:{ctx:t}}});return c.$on("click",t[1]),{c(){e=b("h2"),e.textContent="Coulisses",r=T();for(let t=0;t<h.length;t+=1)h[t].c();i=T(),n=b("a"),dt(l.$$.fragment),s=T(),dt(c.$$.fragment),A(e,"class","svelte-ms1mku"),A(n,"href","https://github.com/TomFevrier/newsgame-vaccin-pfe"),A(n,"target","_blank")},m(t,a){g(t,e,a),g(t,r,a);for(let e=0;e<h.length;e+=1)h[e].m(t,a);g(t,i,a),g(t,n,a),pt(l,n,null),g(t,s,a),pt(c,t,a),o=!0},p(t,e){if(0&e){let r;for(a=zv.makingOf,r=0;r<a.length;r+=1){const n=Py(t,a,r);h[r]?(h[r].p(n,e),ot(h[r],1)):(h[r]=Cy(n),h[r].c(),ot(h[r],1),h[r].m(i.parentNode,i))}for(nt(),r=a.length;r<h.length;r+=1)u(r);st()}const r={};256&e&&(r.$$scope={dirty:e,ctx:t}),l.$set(r);const n={};256&e&&(n.$$scope={dirty:e,ctx:t}),c.$set(n)},i(t){if(!o){for(let t=0;t<a.length;t+=1)ot(h[t]);ot(l.$$.fragment,t),ot(c.$$.fragment,t),o=!0}},o(t){h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)at(h[t]);at(l.$$.fragment,t),at(c.$$.fragment,t),o=!1},d(t){t&&v(e),t&&v(r),y(h,t),t&&v(i),t&&v(n),ft(l),t&&v(s),ft(c,t)}}}function Fy(t){let e,r,i=t[0]&&Iy(t);return{c(){i&&i.c(),e=E()},m(t,n){i&&i.m(t,n),g(t,e,n),r=!0},p(t,[r]){t[0]?i?(i.p(t,r),ot(i,1)):(i=Iy(t),i.c(),ot(i,1),i.m(e.parentNode,e)):i&&(nt(),at(i,1,1,()=>{i=null}),st())},i(t){r||(ot(i),r=!0)},o(t){at(i),r=!1},d(t){i&&i.d(t),t&&v(e)}}}function By(t,e,r){let{visible:i=!1}=e;return t.$set=t=>{"visible"in t&&r(0,i=t.visible)},[i,()=>r(0,i=!1)]}class Uy extends gt{constructor(t){super(),_t(this,t,By,Fy,o,{visible:0})}}function Gy(t){let e;return{c(){e=x("Nouvelle partie")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function ky(t){let e;return{c(){e=x("Niveaux")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function Xy(t){let e;return{c(){e=x("Coulisses")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function $y(t){let e;return{c(){e=x("Crdits")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function jy(t){let e,r,i;const n=new gv({props:{width:.75,closable:!0,$$slots:{default:[zy]},$$scope:{ctx:t}}});return n.$on("close",t[9]),{c(){e=b("div"),dt(n.$$.fragment),A(e,"class","overlay svelte-1n0rx1k")},m(t,r){g(t,e,r),pt(n,e,null),i=!0},p(t,e){const r={};16384&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){i||(ot(n.$$.fragment,t),r&&r.end(1),i=!0)},o(t){at(n.$$.fragment,t),r=ut(e,sv,{duration:300}),i=!1},d(t){t&&v(e),ft(n),t&&r&&r.end()}}}function Hy(t){let e,r,i;return{c(){e=b("div"),e.innerHTML='<span class="fi fi-mobile-alt svelte-1n0rx1k"></span>',r=T(),i=b("p"),i.textContent="Ce jeu est optimis pour une exprience sur mobile. Nous vous conseillons donc d'y jouer depuis votre tlphone, sur un navigateur comme Firefox ou Chrome.",A(e,"class","icon-mobile svelte-1n0rx1k"),A(i,"class","svelte-1n0rx1k")},m(t,n){g(t,e,n),g(t,r,n),g(t,i,n)},d(t){t&&v(e),t&&v(r),t&&v(i)}}}function zy(t){let e;const r=new Kg({props:{style:"text-align: center;",$$slots:{default:[Hy]},$$scope:{ctx:t}}});return{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};16384&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function Yy(t){let e,r,i,n,s,o,a,h,u,l,c,d,p,f,m,y,x,E;const w=new Vg({props:{width:"12rem",$$slots:{default:[Gy]},$$scope:{ctx:t}}});w.$on("click",t[5]);const S=new Vg({props:{width:"12rem",$$slots:{default:[ky]},$$scope:{ctx:t}}});S.$on("click",t[6]);const O=new Vg({props:{width:"12rem",$$slots:{default:[Xy]},$$scope:{ctx:t}}});O.$on("click",t[7]);const R=new Vg({props:{width:"12rem",$$slots:{default:[$y]},$$scope:{ctx:t}}});R.$on("click",t[8]);let P=t[1]&&jy(t);function I(e){t[10].call(null,e)}function M(e){t[11].call(null,e)}let C={};void 0!==t[0]&&(C.state=t[0]),void 0!==t[2]&&(C.visible=t[2]);const D=new Ay({props:C});function L(e){t[12].call(null,e)}H.push(()=>ct(D,"state",I)),H.push(()=>ct(D,"visible",M));let N={};void 0!==t[3]&&(N.visible=t[3]);const F=new Uy({props:N});function B(e){t[13].call(null,e)}H.push(()=>ct(F,"visible",L));let U={};void 0!==t[4]&&(U.visible=t[4]);const G=new uy({props:U});return H.push(()=>ct(G,"visible",B)),{c(){e=b("div"),r=b("img"),n=T(),s=b("h1"),s.innerHTML='Fabriquez votre vaccin<br class="svelte-1n0rx1k">contre le Covid-19',o=T(),dt(w.$$.fragment),a=T(),dt(S.$$.fragment),h=T(),dt(O.$$.fragment),u=T(),dt(R.$$.fragment),l=T(),P&&P.c(),c=T(),dt(D.$$.fragment),f=T(),dt(F.$$.fragment),y=T(),dt(G.$$.fragment),r.src!==(i="img/syringe-large.png")&&A(r,"src","img/syringe-large.png"),A(r,"class","svelte-1n0rx1k"),A(s,"class","svelte-1n0rx1k"),A(e,"class","menu svelte-1n0rx1k")},m(t,i){g(t,e,i),_(e,r),_(e,n),_(e,s),_(e,o),pt(w,e,null),_(e,a),pt(S,e,null),_(e,h),pt(O,e,null),_(e,u),pt(R,e,null),_(e,l),P&&P.m(e,null),_(e,c),pt(D,e,null),_(e,f),pt(F,e,null),_(e,y),pt(G,e,null),E=!0},p(t,[r]){const i={};16384&r&&(i.$$scope={dirty:r,ctx:t}),w.$set(i);const n={};16384&r&&(n.$$scope={dirty:r,ctx:t}),S.$set(n);const s={};16384&r&&(s.$$scope={dirty:r,ctx:t}),O.$set(s);const o={};16384&r&&(o.$$scope={dirty:r,ctx:t}),R.$set(o),t[1]?P?(P.p(t,r),ot(P,1)):(P=jy(t),P.c(),ot(P,1),P.m(e,c)):P&&(nt(),at(P,1,1,()=>{P=null}),st());const a={};!d&&1&r&&(d=!0,a.state=t[0],K(()=>d=!1)),!p&&4&r&&(p=!0,a.visible=t[2],K(()=>p=!1)),D.$set(a);const h={};!m&&8&r&&(m=!0,h.visible=t[3],K(()=>m=!1)),F.$set(h);const u={};!x&&16&r&&(x=!0,u.visible=t[4],K(()=>x=!1)),G.$set(u)},i(t){E||(ot(w.$$.fragment,t),ot(S.$$.fragment,t),ot(O.$$.fragment,t),ot(R.$$.fragment,t),ot(P),ot(D.$$.fragment,t),ot(F.$$.fragment,t),ot(G.$$.fragment,t),E=!0)},o(t){at(w.$$.fragment,t),at(S.$$.fragment,t),at(O.$$.fragment,t),at(R.$$.fragment,t),at(P),at(D.$$.fragment,t),at(F.$$.fragment,t),at(G.$$.fragment,t),E=!1},d(t){t&&v(e),ft(w),ft(S),ft(O),ft(R),P&&P.d(),ft(D),ft(F),ft(G)}}}function qy(t,e,r){let{state:i}=e,n=window.matchMedia("(min-aspect-ratio: 1)").matches,s=!1,o=!1,a=!1;return t.$set=t=>{"state"in t&&r(0,i=t.state)},[i,n,s,o,a,()=>GAME.goToState("intro"),()=>r(2,s=!0),()=>r(3,o=!0),()=>r(4,a=!0),()=>r(1,n=!1),function(t){i=t,r(0,i)},function(t){s=t,r(2,s)},function(t){o=t,r(3,o)},function(t){a=t,r(4,a)}]}class Vy extends gt{constructor(t){super(),_t(this,t,qy,Yy,o,{state:0})}}function Wy(t){let e,r=Dg(t[2][t[0]])+"";return{c(){e=b("p"),A(e,"class","svelte-1a32at0")},m(t,i){g(t,e,i),e.innerHTML=r},p(t,i){1&i&&r!==(r=Dg(t[2][t[0]])+"")&&(e.innerHTML=r)},d(t){t&&v(e)}}}function Zy(t){let e,r,i=zv.outro.more&&function(t){let e;const r=new Vg({props:{$$slots:{default:[Ky]},$$scope:{ctx:t}}});return r.$on("click",t[3]),{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,e){const i={};128&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}(t);const n=new Vg({props:{$$slots:{default:[Jy]},$$scope:{ctx:t}}});return n.$on("click",t[4]),{c(){i&&i.c(),e=T(),dt(n.$$.fragment)},m(t,s){i&&i.m(t,s),g(t,e,s),pt(n,t,s),r=!0},p(t,e){zv.outro.more&&i.p(t,e);const r={};128&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||(ot(i),ot(n.$$.fragment,t),r=!0)},o(t){at(i),at(n.$$.fragment,t),r=!1},d(t){i&&i.d(t),t&&v(e),ft(n,t)}}}function Ky(t){let e;return{c(){e=x("En savoir plus")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function Jy(t){let e;return{c(){e=x("Retour au menu")},m(t,r){g(t,e,r)},d(t){t&&v(e)}}}function Qy(t){let e,r,i,n,s;const o=new Kg({props:{$$slots:{default:[Wy]},$$scope:{ctx:t}}});let a=t[0]===t[2].length-1&&Zy(t);function h(e){t[5].call(null,e)}let u={length:t[2].length};void 0!==t[0]&&(u.index=t[0]);const l=new Iv({props:u});H.push(()=>ct(l,"index",h));const c=new Av({props:{title:"La leve des brevets, vraiment utile ?",more:zv.outro.more,buttonText:"Retour au menu",visible:t[1]}});return c.$on("click",t[6]),{c(){dt(o.$$.fragment),e=T(),a&&a.c(),r=T(),dt(l.$$.fragment),n=T(),dt(c.$$.fragment)},m(t,i){pt(o,t,i),g(t,e,i),a&&a.m(t,i),g(t,r,i),pt(l,t,i),g(t,n,i),pt(c,t,i),s=!0},p(t,e){const n={};129&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),t[0]===t[2].length-1?a?(a.p(t,e),ot(a,1)):(a=Zy(t),a.c(),ot(a,1),a.m(r.parentNode,r)):a&&(nt(),at(a,1,1,()=>{a=null}),st());const s={};!i&&1&e&&(i=!0,s.index=t[0],K(()=>i=!1)),l.$set(s);const h={};2&e&&(h.visible=t[1]),c.$set(h)},i(t){s||(ot(o.$$.fragment,t),ot(a),ot(l.$$.fragment,t),ot(c.$$.fragment,t),s=!0)},o(t){at(o.$$.fragment,t),at(a),at(l.$$.fragment,t),at(c.$$.fragment,t),s=!1},d(t){ft(o,t),t&&v(e),a&&a.d(t),t&&v(r),ft(l,t),t&&v(n),ft(c,t)}}}function tb(t){let e;const r=new gv({props:{fixedHeight:!0,$$slots:{default:[Qy]},$$scope:{ctx:t}}});return{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},p(t,[e]){const i={};131&e&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function eb(t,e,r){const i=zv.outro.text.map(t=>t.replace(/{{ LAB }}/g,localStorage.getItem("lab")));let n=0,s=!1;return[n,s,i,()=>r(1,s=!0),()=>GAME.goToState("menu"),function(t){n=t,r(0,n)},()=>GAME.goToState("menu")]}class rb extends gt{constructor(t){super(),_t(this,t,eb,tb,o,{})}}function ib(e){let r;const i=new rb({});return{c(){dt(i.$$.fragment)},m(t,e){pt(i,t,e),r=!0},p:t,i(t){r||(ot(i.$$.fragment,t),r=!0)},o(t){at(i.$$.fragment,t),r=!1},d(t){ft(i,t)}}}function nb(t){let e,r;function i(e){t[5].call(null,e)}let n={};void 0!==t[2]&&(n.state=t[2]);const s=new gy({props:n});return H.push(()=>ct(s,"state",i)),{c(){dt(s.$$.fragment)},m(t,e){pt(s,t,e),r=!0},p(t,r){const i={};!e&&4&r&&(e=!0,i.state=t[2],K(()=>e=!1)),s.$set(i)},i(t){r||(ot(s.$$.fragment,t),r=!0)},o(t){at(s.$$.fragment,t),r=!1},d(t){ft(s,t)}}}function sb(t){let e,r;function i(e){t[4].call(null,e)}let n={};void 0!==t[2]&&(n.state=t[2]);const s=new Vy({props:n});return H.push(()=>ct(s,"state",i)),{c(){dt(s.$$.fragment)},m(t,e){pt(s,t,e),r=!0},p(t,r){const i={};!e&&4&r&&(e=!0,i.state=t[2],K(()=>e=!1)),s.$set(i)},i(t){r||(ot(s.$$.fragment,t),r=!0)},o(t){at(s.$$.fragment,t),r=!1},d(t){ft(s,t)}}}function ob(t){let e;const r=new Oy({});return{c(){dt(r.$$.fragment)},m(t,i){pt(r,t,i),e=!0},i(t){e||(ot(r.$$.fragment,t),e=!0)},o(t){at(r.$$.fragment,t),e=!1},d(t){ft(r,t)}}}function ab(t){let e,r,i,n,s,o,a,h,u,l;const c=[sb,nb,ib],d=[];function p(t,e){return"menu"===t[2]?0:"intro"===t[2]?1:"outro"===t[2]?2:-1}~(n=p(t))&&(s=d[n]=c[n](t));let f=t[3]&&ob();return{c(){e=b("div"),r=b("canvas"),i=T(),s&&s.c(),o=T(),f&&f.c(),a=T(),h=b("div"),A(r,"class","svelte-1yy8s9z"),A(h,"class","overlay svelte-1yy8s9z"),A(e,"class","game svelte-1yy8s9z"),Z(()=>t[7].call(e))},m(s,c){g(s,e,c),_(e,r),_(e,i),~n&&d[n].m(e,null),_(e,o),f&&f.m(e,null),_(e,a),_(e,h),t[6](e),u=P(e,t[7].bind(e)),l=!0},p(t,[r]){let i=n;n=p(t),n===i?~n&&d[n].p(t,r):(s&&(nt(),at(d[i],1,1,()=>{d[i]=null}),st()),~n?(s=d[n],s||(s=d[n]=c[n](t),s.c()),ot(s,1),s.m(e,o)):s=null),t[3]?f?ot(f,1):(f=ob(),f.c(),ot(f,1),f.m(e,a)):f&&(nt(),at(f,1,1,()=>{f=null}),st())},i(t){l||(ot(s),ot(f),l=!0)},o(t){at(s),at(f),l=!1},d(r){r&&v(e),~n&&d[n].d(),f&&f.d(),t[6](null),u.cancel()}}}function hb(t,e,r){let i,n,s=SKIP_MENU?"":"menu",o=!0;var a;return a=async()=>{r(1,n.style.maxWidth=`${9*window.innerHeight/16}px`,n),window.GAME=new Zv(Math.min(i,9*window.innerHeight/16),n),GAME.setState=t=>r(2,s=t),await GAME.preload(),r(3,o=!1),SKIP_MENU&&GAME.start()},k().$$.on_mount.push(a),[i,n,s,o,function(t){s=t,r(2,s)},function(t){s=t,r(2,s)},function(t){H[t?"unshift":"push"](()=>{r(1,n=t)})},function(){i=this.clientWidth,r(0,i)}]}class ub extends gt{constructor(t){super(),_t(this,t,hb,ab,o,{})}}function lb(e){let r,i;const n=new ub({});return{c(){r=b("main"),dt(n.$$.fragment),A(r,"class","svelte-1b8pzpx")},m(t,e){g(t,r,e),pt(n,r,null),i=!0},p:t,i(t){i||(ot(n.$$.fragment,t),i=!0)},o(t){at(n.$$.fragment,t),i=!1},d(t){t&&v(r),ft(n)}}}function cb(t){return Object.defineProperty(Array.prototype,"last",{value(){return this[this.length-1]}}),Object.defineProperty(Array.prototype,"random",{value(){return this[~~(Math.random()*this.length)]}}),Object.defineProperty(Array.prototype,"shuffle",{value(){return this.sort((t,e)=>.5-Math.random())}}),[]}return new class extends gt{constructor(t){super(),_t(this,t,cb,lb,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
